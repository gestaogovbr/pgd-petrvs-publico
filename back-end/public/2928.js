"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[2928],{2928:(de,S,d)=>{d.r(S),d.d(S,{ConsultasModule:()=>re});var g=d(6610),P=d(8069),C=d(1620),F=d(6819),u=d(3308),h=d(1641),x=d(5413),U=d(3130),y=d(24),E=d(4489),e=d(3279),k=d(16);function $(a,l){1&a&&(e.j41(0,"div",9),e.nrm(1,"span",10),e.k0s())}function G(a,l){if(1&a&&(e.j41(0,"div",11),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.erros)}}let T=(()=>{class a extends y.n{constructor(t){super(t,U.P,x._),this.injector=t,this.erros="",this.integrantes=[],this.validate=(n,o)=>{let i=null;return["cpf"].indexOf(o)>=0&&!n.value?.length&&(i="Obrigat\xf3rio"),i},this.integranteDao=t.get(E.f),this.form=this.fh.FormBuilder({cpf:{default:""}},this.cdRef,this.validate)}loadData(t,n){}initializeData(t){}saveData(t){throw new Error("Method not implemented.")}onClickCPF(){var t=this;return(0,u.A)(function*(){if(t.form.valid){t.loading=!0,t.clearErros();try{const o=t.form.get("cpf")?.value.replace(/\D/g,""),i=yield t.dao?.query({where:[["cpf","==",o]]}).asPromise();if(i&&(t.usuario=i[0]),t.integrantes=[],t.usuario){const s=yield t.integranteDao.carregarIntegrantes("",t.usuario.id);t.integrantes=s.integrantes.filter(r=>r.atribuicoes?.length>0)}t.dao.consultarSIAPE(o).subscribe(s=>{s.success&&(t.dadosPessoais=s.pessoais,t.dadosFuncionais=s.funcionais,t.loading=!1,t.go.navigate({route:["consultas","cpf-siape-result"]},{metadata:{cpf:t.form.get("cpf")?.value,usuario:t.usuario,dadosPessoais:s.pessoais,dadosFuncionais:s.funcionais,integrantes:t.integrantes}}))},s=>{t.loading=!1,console.log(s),t.error("Erro ao consultar CPF no SIAPE: "+s.error?.message)})}catch(o){t.loading=!1,console.log(o),t.erros=o}}})()}ngOnInit(){super.ngOnInit()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["consulta-cpf-siape-form"]],viewQuery:function(n,o){if(1&n&&e.GBs(h.Q,5),2&n){let i;e.mGM(i=e.lsd())&&(o.editableForm=i.first)}},features:[e.Vt3],decls:15,vars:9,consts:[["class","spinner-border","role","status",4,"ngIf"],[1,"consulta-cpf-siape-form"],[3,"form","disabled","title"],["class","alert alert-danger mt-2 break-spaces","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-4","intro"],[1,"col-md-4"],["controlName","cpf","label","CPF","labelInfo","Informe o CPF para busca no SIAPE","hostClass","inputCPF","relativeId","inputCPF","placeholder","Informe o CPF",3,"size","maskFormat"],["type","button",1,"btn","btn-outline-primary","btn-block","btn-cpf",3,"click","disabled"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger","mt-2","break-spaces"]],template:function(n,o){1&n&&(e.DNE(0,$,2,0,"div",0),e.j41(1,"div",1)(2,"editable-form",2),e.DNE(3,G,2,1,"div",3),e.j41(4,"div",4)(5,"div",5)(6,"h2"),e.EFF(7,"Consulta CPF SIAPE"),e.k0s(),e.j41(8,"p"),e.EFF(9,"Para acessar as informa\xe7\xf5es do servidor no SIAPE, informe o n\xfamero do CPF abaixo e clique em Localizar CPF. "),e.k0s()()(),e.j41(10,"div",4)(11,"div",6),e.nrm(12,"input-text",7),e.j41(13,"button",8),e.bIt("click",function(){return o.onClickCPF()}),e.EFF(14," Localizar CPF "),e.k0s()()()()()),2&n&&(e.Y8G("ngIf",o.loading),e.R7$(2),e.Y8G("form",o.form)("disabled",!1)("title",o.isModal?"":o.title),e.R7$(),e.Y8G("ngIf",null==o.erros?null:o.erros.length),e.R7$(9),e.Y8G("size",4)("maskFormat","000.000.000-00"),e.BMQ("maxlength",15),e.R7$(),e.Y8G("disabled",o.loading||!o.form.valid))},dependencies:[g.bT,h.Q,k.H],styles:[".btn-cpf[_ngcontent-%COMP%]{width:100%;background-color:#007bff;color:#fff;border-radius:5px;margin-top:10px;font-size:20px;text-align:center}.btn-cpf[_ngcontent-%COMP%]:hover{background-color:#0056b3}  .consulta-cpf-siape-form input[type=text]{font-size:20px!important;text-align:center!important}"]})}}return a})();var w=d(204),O=d(3535);function M(a,l){1&a&&(e.j41(0,"div",9),e.nrm(1,"span",10),e.k0s())}function z(a,l){if(1&a&&(e.j41(0,"div",11),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.erros)}}let _=(()=>{class a extends y.n{constructor(t){super(t,w.h,O.s),this.injector=t,this.erros="",this.integrantes=[],this.validate=(n,o)=>{let i=null;return["unidade"].indexOf(o)>=0&&!n.value?.length&&(i="Obrigat\xf3rio"),i},this.integranteDao=t.get(E.f),this.form=this.fh.FormBuilder({unidade:{default:""}},this.cdRef,this.validate)}onClickUnidade(){var t=this;return(0,u.A)(function*(){if(t.form.valid){t.loading=!0,t.clearErros();try{const o=t.form.get("unidade")?.value.replace(/\D/g,""),i=yield t.dao?.query({where:[["codigo","==",o]]}).asPromise();if(i&&(t.unidade=i[0]),t.integrantes=[],t.unidade){const s=yield t.integranteDao.carregarIntegrantes(t.unidade.id,"");t.integrantes=s.integrantes.filter(r=>r.atribuicoes?.length>0)}t.dao.consultaUnidadeSIAPE(o).subscribe(s=>{s.success&&(t.dados=s.dados,t.loading=!1,t.go.navigate({route:["consultas","unidade-siape-result"]},{metadata:{codigoUnidade:t.form.get("unidade")?.value,unidade:t.unidade,dados:s.dados,integrantes:t.integrantes}}))},s=>{t.loading=!1,console.log(s),t.error("Erro ao consultar Unidade no SIAPE: "+s.error?.message)})}catch(o){t.loading=!1,console.log(o),t.erros=o}}})()}loadData(t,n,o){}initializeData(t){}saveData(t){throw new Error("Method not implemented.")}ngOnInit(){super.ngOnInit()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["consulta-cpf-siape-form"]],viewQuery:function(n,o){if(1&n&&e.GBs(h.Q,5),2&n){let i;e.mGM(i=e.lsd())&&(o.editableForm=i.first)}},features:[e.Vt3],decls:15,vars:8,consts:[["class","spinner-border","role","status",4,"ngIf"],[1,"consulta-unidade-siape-form"],[3,"form","disabled","title"],["class","alert alert-danger mt-2 break-spaces","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-4","intro"],[1,"col-md-4"],["controlName","unidade","label","Unidade","labelInfo","Informe o c\xf3digo da unidade para busca no SIAPE","hostClass","inputUnidade","relativeId","inputUnidade","placeholder","Informe o c\xf3digo unidade",3,"size"],["type","button",1,"btn","btn-outline-primary","btn-block","btn-unidade",3,"click","disabled"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger","mt-2","break-spaces"]],template:function(n,o){1&n&&(e.DNE(0,M,2,0,"div",0),e.j41(1,"div",1)(2,"editable-form",2),e.DNE(3,z,2,1,"div",3),e.j41(4,"div",4)(5,"div",5)(6,"h2"),e.EFF(7,"Consulta Unidade Siape"),e.k0s(),e.j41(8,"p"),e.EFF(9,"Para acessar as informa\xe7\xf5es do servidor no SIAPE, informe o c\xf3digo da unidade abaixo e clique em Localizar. "),e.k0s()()(),e.j41(10,"div",4)(11,"div",6),e.nrm(12,"input-text",7),e.j41(13,"button",8),e.bIt("click",function(){return o.onClickUnidade()}),e.EFF(14," Localizar "),e.k0s()()()()()),2&n&&(e.Y8G("ngIf",o.loading),e.R7$(2),e.Y8G("form",o.form)("disabled",!1)("title",o.isModal?"":o.title),e.R7$(),e.Y8G("ngIf",null==o.erros?null:o.erros.length),e.R7$(9),e.Y8G("size",4),e.BMQ("maxlength",50),e.R7$(),e.Y8G("disabled",o.loading||!o.form.valid))},dependencies:[g.bT,h.Q,k.H],styles:[".btn-unidade[_ngcontent-%COMP%]{width:100%;background-color:#007bff;color:#fff;border-radius:5px;margin-top:10px;font-size:20px;text-align:center}.btn-unidade[_ngcontent-%COMP%]:hover{background-color:#0056b3}  .consulta-unidade-siape-form input[type=text]{font-size:20px!important;text-align:center!important}"]})}}return a})();var L=d(943),N=d(4500);function R(a,l){const t="object"==typeof l;return new Promise((n,o)=>{const i=new N.Ms({next:s=>{n(s),i.unsubscribe()},error:o,complete:()=>{t?n(l.defaultValue):o(new L.G)}});a.subscribe(i)})}var j=d(7065),A=d(2305),D=d(8857);function Y(a,l){1&a&&(e.j41(0,"div",6),e.nrm(1,"span",7),e.k0s())}function B(a,l){1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.EFF(3,"Dados n\xe3o encontrados no SIAPE para o CPF informado."),e.k0s()()())}function Q(a,l){if(1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"p")(5,"span",13),e.EFF(6),e.k0s()()()()),2&a){const t=l.$implicit;e.R7$(3),e.SpI("Matr\xedcula: ",t.matriculaSiape,""),e.R7$(3),e.SpI(" ",t.codUorgExercicio+" - "+t.unidadeSigla," ")}}function X(a,l){if(1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.nrm(3,"i",11),e.EFF(4," Dados localizados no SIAPE "),e.k0s()(),e.j41(5,"div",9)(6,"p")(7,"b"),e.EFF(8),e.k0s()()(),e.DNE(9,Q,7,2,"div",12),e.k0s()),2&a){const t=e.XpG();e.R7$(8),e.JRh(t.dadosPessoais.nome),e.R7$(),e.Y8G("ngForOf",t.dadosFuncionais)}}function V(a,l){1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.EFF(3,"Nenhum usu\xe1rio encontrado no Petrvs com o CPF informado."),e.k0s()()())}function J(a,l){if(1&a&&(e.j41(0,"span",13),e.EFF(1),e.k0s()),2&a){const t=l.$implicit;e.R7$(),e.SpI(" ",t.unidade_codigo+" - "+t.unidade_sigla+" ("+t.atribuicoes.join("/")+")"," ")}}function Z(a,l){if(1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.nrm(3,"i",14),e.EFF(4," Usu\xe1rio encontrado no Petrvs "),e.k0s()(),e.j41(5,"div",9)(6,"p")(7,"b"),e.EFF(8),e.k0s()(),e.j41(9,"p"),e.EFF(10),e.k0s(),e.j41(11,"p"),e.DNE(12,J,2,1,"span",15),e.k0s()()()),2&a){const t=e.XpG();e.R7$(8),e.JRh(t.usuario.nome),e.R7$(2),e.SpI("Matr\xedcula #",t.usuario.matricula,""),e.R7$(2),e.Y8G("ngForOf",t.integrantes)}}function K(a,l){1&a&&(e.j41(0,"div",6),e.nrm(1,"span",7),e.k0s())}function W(a,l){1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.EFF(3,"Dados n\xe3o encontrados no SIAPE para a unidade informada."),e.k0s()()())}function q(a,l){if(1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.nrm(3,"i",11),e.EFF(4," Dados localizados no SIAPE "),e.k0s()(),e.j41(5,"div",9)(6,"p"),e.EFF(7,"Sigla: "),e.j41(8,"b"),e.EFF(9),e.k0s()()(),e.j41(10,"div",9)(11,"p"),e.EFF(12,"Nome: "),e.j41(13,"b"),e.EFF(14),e.k0s()()()()),2&a){const t=e.XpG();e.R7$(9),e.JRh(t.dados.siglaOrgao),e.R7$(5),e.JRh(t.dados.nomeExtendido)}}function ee(a,l){1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.EFF(3,"Nenhuma unidade encontrado no Petrvs com o Unidade informada."),e.k0s()()())}function te(a,l){if(1&a&&(e.j41(0,"div",8)(1,"div",9)(2,"p",10),e.nrm(3,"i",12),e.EFF(4," Unidade encontrada no Petrvs "),e.k0s()(),e.j41(5,"div",9)(6,"p"),e.EFF(7,"Sigla: "),e.j41(8,"b"),e.EFF(9),e.k0s()(),e.j41(10,"p"),e.EFF(11,"Nome: "),e.j41(12,"b"),e.EFF(13),e.k0s()()()()),2&a){const t=e.XpG();e.R7$(9),e.JRh(null==t.unidade?null:t.unidade.sigla),e.R7$(4),e.JRh(null==t.unidade?null:t.unidade.nome)}}const oe=[{path:"unidade-siape",component:_,canActivate:[C.q],resolve:{config:F.L},runGuardsAndResolvers:"always",data:{}},{path:"cpf-siape",component:T,canActivate:[C.q],resolve:{config:F.L},runGuardsAndResolvers:"always",data:{}},{path:"cpf-siape-result",component:(()=>{class a extends y.n{constructor(t){var n,o;super(t,U.P,x._),n=this,this.injector=t,this.erros="",this.log="",this.cpf=null,this.integrantes=[],this.toolbarButtons=[{label:"Baixar Dados",icon:"bi bi-download",onClick:(o=(0,u.A)(function*(){n.loading=!0;try{const s=yield R(n.dao.exportarCPFSIAPE(n.cpf)),r=s.type,c=(new Date).toISOString().slice(0,10),f={"application/xml":"xml","text/plain":"txt","application/zip":"zip"}[r]??(console.warn("Tipo de conte\xfado inesperado:",r),"txt"),p=`dados_cpf_${n.cpf}_${c}.${f}`,I=new Blob([s],{type:r}),b=window.URL.createObjectURL(I),m=document.createElement("a");m.href=b,m.download=p,m.click(),window.URL.revokeObjectURL(b),n.loading=!1}catch(s){n.erros=s}finally{n.loading=!1}}),function(){return o.apply(this,arguments)})},{label:"Processar",icon:"bi bi-gear",onClick:function(){var o=(0,u.A)(function*(){if(yield n.dialog.confirm("ATEN\xc7\xc3O","CONFIRMA A SINCRONIZA\xc7\xc3O DO USU\xc1RIO?")){n.loading=!0,n.log="Processando...";try{n.dao.sincronizarSIAPE(n.cpf).subscribe(function(){var r=(0,u.A)(function*(c){n.loading=!1,c?.success?(yield n.loadUsuario(),n.dialog.alert("Sucesso",c.message),n.log=c.log):n.dialog.alert("Erro","Erro ao processar CPF: "+c?.message),n.downloadSiape()});return function(c){return r.apply(this,arguments)}}(),r=>{n.loading=!1,console.log(r),n.log=r.error?.message,n.error("Erro ao processar CPF: "+r.error?.message),n.dialog.alert("Erro","Erro ao processar CPF: "+(r.message??r.error?.message))})}catch(r){n.loading=!1,console.log(r),n.erros=r}}});return function(){return o.apply(this,arguments)}}()}],this.validate=(o,i)=>{let s=null;return["cpf"].indexOf(i)>=0&&!o.value?.length&&(s="Obrigat\xf3rio"),s},this.dialog=this.injector.get(j.o),this.integranteDao=t.get(E.f)}loadData(t,n){}initializeData(t){}saveData(t){throw new Error("Method not implemented.")}ngOnInit(){super.ngOnInit(),this.metadata?.cpf&&(this.cpf=this.metadata?.cpf,this.title="Dados do CPF: "+this.cpf),this.metadata?.usuario&&(this.usuario=this.metadata?.usuario),this.metadata?.dadosPessoais&&(this.dadosPessoais=this.metadata?.dadosPessoais),this.metadata?.dadosFuncionais&&(this.dadosFuncionais=this.metadata?.dadosFuncionais),this.metadata?.integrantes&&(this.integrantes=this.metadata?.integrantes)}downloadSiape(){var t=this;return(0,u.A)(function*(){t.loading=!0;try{const n=yield R(t.dao.baixaLogSiape(t.cpf)),o=n.type,i=(new Date).toISOString().slice(0,10),r={"application/xml":"xml","text/plain":"txt","application/zip":"zip"}[o]??(console.warn("Tipo de conte\xfado inesperado:",o),"txt"),c=`log_cpf_${t.cpf}_${i}.${r}`,v=new Blob([n],{type:o}),f=window.URL.createObjectURL(v),p=document.createElement("a");p.href=f,p.download=c,p.click(),window.URL.revokeObjectURL(f)}catch(n){t.erros=n}finally{t.loading=!1}})()}loadUsuario(){var t=this;return(0,u.A)(function*(){t.loading=!0;try{const n=t.cpf?.replace(/\D/g,""),o=yield t.dao?.query({where:[["cpf","==",n]]}).asPromise();if(o&&(t.usuario=o[0]),t.usuario){const i=yield t.integranteDao.carregarIntegrantes("",t.usuario.id);t.integrantes=i.integrantes.filter(s=>s.atribuicoes?.length>0)}}finally{t.loading=!1}})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["consulta-cpf-siape-result"]],viewQuery:function(n,o){if(1&n&&e.GBs(h.Q,5),2&n){let i;e.mGM(i=e.lsd())&&(o.editableForm=i.first)}},features:[e.Vt3],decls:11,vars:6,consts:[["class","spinner-border","role","status",4,"ngIf"],[1,"consulta-cpf-siape-result"],[1,"dados-siape"],["class","row",4,"ngIf"],[1,"dados-petrvs"],[3,"buttons"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"row"],[1,"col-md-12"],[1,"subtitle"],[1,"bi","bi-cloud-arrow-down-fill"],["class","row",4,"ngFor","ngForOf"],[1,"unidade"],[1,"bi","bi-person"],["class","unidade",4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(e.DNE(0,Y,2,0,"div",0),e.j41(1,"div",1)(2,"div",2),e.DNE(3,B,4,0,"div",3)(4,X,10,2,"div",3),e.k0s(),e.nrm(5,"separator"),e.j41(6,"div",4),e.DNE(7,V,4,0,"div",3)(8,Z,13,3,"div",3),e.k0s(),e.j41(9,"separator"),e.nrm(10,"toolbar",5),e.k0s()()),2&n&&(e.Y8G("ngIf",o.loading),e.R7$(3),e.Y8G("ngIf",!o.dadosPessoais||!o.dadosFuncionais),e.R7$(),e.Y8G("ngIf",o.dadosPessoais&&o.dadosFuncionais),e.R7$(3),e.Y8G("ngIf",!o.usuario),e.R7$(),e.Y8G("ngIf",o.usuario),e.R7$(2),e.Y8G("buttons",o.toolbarButtons))},dependencies:[g.Sq,g.bT,A.H,D.F],styles:[".subtitle[_ngcontent-%COMP%]{font-weight:700;font-style:italic}.subtitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.dados-siape[_ngcontent-%COMP%]{margin-bottom:20px}.unidade[_ngcontent-%COMP%]{color:#fff;background-color:#4169e1;border-radius:10px;float:left;padding:5px 10px;margin-right:10px;font-size:12px}"]})}}return a})(),canActivate:[C.q],resolve:{config:F.L},runGuardsAndResolvers:"always",data:{modal:!0,title:"Consulta SIAPE por CPF - Resultados"}},{path:"unidade-siape-result",component:(()=>{class a extends y.n{constructor(t){var n,o;super(t,w.h,O.s),n=this,this.injector=t,this.erros="",this.log="",this.codigoUnidade=null,this.integrantes=[],this.toolbarButtons=[{label:"Baixar Dados",icon:"bi bi-download",onClick:(o=(0,u.A)(function*(){n.loading=!0;try{const s=yield R(n.dao.exportarUnidadeSIAPE(n.codigoUnidade)),r=s.type,c=(new Date).toISOString().slice(0,10),f={"application/xml":"xml","text/plain":"txt","application/zip":"zip"}[r]??(console.warn("Tipo de conte\xfado inesperado:",r),"txt"),p=`dados_unidade_${n.codigoUnidade}_${c}.${f}`,I=new Blob([s],{type:r}),b=window.URL.createObjectURL(I),m=document.createElement("a");m.href=b,m.download=p,m.click(),window.URL.revokeObjectURL(b),n.loading=!1}catch(s){n.erros=s}finally{n.loading=!1}}),function(){return o.apply(this,arguments)})},{label:"Processar",icon:"bi bi-gear",onClick:function(){var o=(0,u.A)(function*(){if(yield n.dialog.confirm("ATEN\xc7\xc3O","CONFIRMA A SINCRONIZA\xc7\xc3O DA UNIDADE?")){n.loading=!0,n.log="Processando...";try{n.dao.sincronizarSIAPE(n.codigoUnidade).subscribe(function(){var r=(0,u.A)(function*(c){n.loading=!1,c?.success?(yield n.loadUnidade(),n.dialog.alert("Sucesso",c.message),n.log=c.log):n.dialog.alert("Erro","Erro ao processar a Unidade: "+c?.message),n.downloadSiape()});return function(c){return r.apply(this,arguments)}}(),r=>{n.loading=!1,console.log(r),n.log=r.error?.message,n.error("Erro ao processar a Unidade: "+r.error?.message),n.dialog.alert("Erro","Erro ao processar a Unidade: "+(r.message??r.error?.message))})}catch(r){n.loading=!1,console.log(r),n.erros=r}}});return function(){return o.apply(this,arguments)}}()}],this.validate=(o,i)=>{let s=null;return["cpf"].indexOf(i)>=0&&!o.value?.length&&(s="Obrigat\xf3rio"),s},this.dialog=this.injector.get(j.o),this.integranteDao=t.get(E.f)}loadData(t,n,o){throw new Error("Method not implemented.")}saveData(t){throw new Error("Method not implemented.")}initializeData(t){}ngOnInit(){super.ngOnInit(),this.metadata?.unidade&&(this.codigoUnidade=this.metadata?.codigoUnidade,this.title="Dados da Unidade: "+this.codigoUnidade),this.metadata?.unidade&&(this.unidade=this.metadata?.unidade),this.metadata?.dados&&(this.dados=this.metadata?.dados),this.metadata?.integrantes&&(this.integrantes=this.metadata?.integrantes)}downloadSiape(){var t=this;return(0,u.A)(function*(){t.loading=!0;try{const n=yield R(t.dao.baixaLogSiape(t.codigoUnidade)),o=n.type,i=(new Date).toISOString().slice(0,10),r={"application/xml":"xml","text/plain":"log","application/zip":"zip"}[o]??(console.warn("Tipo de conte\xfado inesperado:",o),"txt"),c=`log_unidade_${t.codigoUnidade}_${i}.${r}`,v=new Blob([n],{type:o}),f=window.URL.createObjectURL(v),p=document.createElement("a");p.href=f,p.download=c,p.click(),window.URL.revokeObjectURL(f)}catch(n){t.erros=n}finally{t.loading=!1}})()}loadUnidade(){var t=this;return(0,u.A)(function*(){t.loading=!0;try{const n=t.codigoUnidade?.replace(/\D/g,""),o=yield t.dao?.query({where:[["codigo","==",n]]}).asPromise();o&&(t.unidade=o[0])}finally{t.loading=!1}})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["consulta-unidade-siape-result"]],viewQuery:function(n,o){if(1&n&&e.GBs(h.Q,5),2&n){let i;e.mGM(i=e.lsd())&&(o.editableForm=i.first)}},features:[e.Vt3],decls:11,vars:6,consts:[["class","spinner-border","role","status",4,"ngIf"],[1,"consulta-unidade-siape-result"],[1,"dados-siape"],["class","row",4,"ngIf"],[1,"dados-petrvs"],[3,"buttons"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"row"],[1,"col-md-12"],[1,"subtitle"],[1,"bi","bi-cloud-arrow-down-fill"],[1,"bi","bi-building"]],template:function(n,o){1&n&&(e.DNE(0,K,2,0,"div",0),e.j41(1,"div",1)(2,"div",2),e.DNE(3,W,4,0,"div",3)(4,q,15,2,"div",3),e.k0s(),e.nrm(5,"separator"),e.j41(6,"div",4),e.DNE(7,ee,4,0,"div",3)(8,te,14,2,"div",3),e.k0s(),e.j41(9,"separator"),e.nrm(10,"toolbar",5),e.k0s()()),2&n&&(e.Y8G("ngIf",o.loading),e.R7$(3),e.Y8G("ngIf",!o.dados),e.R7$(),e.Y8G("ngIf",o.dados),e.R7$(3),e.Y8G("ngIf",!o.unidade),e.R7$(),e.Y8G("ngIf",o.unidade),e.R7$(2),e.Y8G("buttons",o.toolbarButtons))},dependencies:[g.bT,A.H,D.F],styles:[".subtitle[_ngcontent-%COMP%]{font-weight:700;font-style:italic}.subtitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.dados-siape[_ngcontent-%COMP%]{margin-bottom:20px}.unidade[_ngcontent-%COMP%]{color:#fff;background-color:#4169e1;border-radius:10px;float:left;padding:5px 10px;margin-right:10px;font-size:12px}"]})}}return a})(),canActivate:[C.q],resolve:{config:F.L},runGuardsAndResolvers:"always",data:{modal:!0,title:"Consulta SIAPE por Unidade - Resultados"}}];let ae=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[P.iI.forChild(oe),P.iI]})}}return a})();var ie=d(9455),se=d(8832);let re=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[g.MD,ie.h,se.X1,ae]})}}return a})()}}]);
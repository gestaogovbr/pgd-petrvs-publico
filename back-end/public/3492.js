"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[3492],{3492:(J,f,n)=>{n.r(f),n.d(f,{CapacidadeModule:()=>X});var r=n(6610),u=n(8069),c=n(1620),p=n(6819),G=n(3308),h=n(1641),C=n(4654),d=n(730),D=n(24),v=n(4927),g=n(9419),t=n(3279),R=n(9226),I=n(3678);const T=["tipo_capacidade"];function j(i,l){if(1&i&&(t.j41(0,"h3",6),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.title)}}let y=(()=>{class i extends D.n{constructor(e){super(e,d.I,C.J),this.injector=e,this.validate=(o,a)=>{let s=null;return["perfil_id"].indexOf(a)>=0&&!o.value?.length&&(s="Obrigat\xf3rio"),s},this.titleEdit=o=>"Editando "+this.lex.translate("Capacidade")+": "+(o?.perfil?.nome||"")+": "+(o?.tipo_capacidade?.codigo||""),this.tipoCapacidadeDao=e.get(v.T),this.perfilDao=e.get(g.e),this.form=this.fh.FormBuilder({perfil_id:{default:""},tipo_capacidade_id:{default:""}},this.cdRef,this.validate),this.join=["tipo_capacidade"]}loadData(e,o){var a=this;return(0,G.A)(function*(){let s=Object.assign({},o.value);yield Promise.all([a.tipoCapacidade.loadSearch(e.tipo_capacidade||e.tipo_capacidade_id)]),o.patchValue(a.util.fillForm(s,e))})()}initializeData(e){e.patchValue(new d.I)}saveData(e){return new Promise((o,a)=>{const s=this.util.fill(new d.I,this.entity);o(this.util.fillForm(s,this.form.value))})}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-capacidade-form"]],viewQuery:function(o,a){if(1&o&&(t.GBs(h.Q,5),t.GBs(T,5)),2&o){let s;t.mGM(s=t.lsd())&&(a.editableForm=s.first),t.mGM(s=t.lsd())&&(a.tipoCapacidade=s.first)}},features:[t.Vt3],decls:7,vars:7,consts:[["tipo_capacidade",""],["class","my-2",4,"ngIf"],["initialFocus","tipo_capacidade_id",3,"submit","cancel","form"],[1,"row"],["controlName","tipo_capacidade_id",3,"size","dao"],["controlName","perfil_id","required","",3,"size","label","dao"],[1,"my-2"]],template:function(o,a){if(1&o){const s=t.RV6();t.DNE(0,j,2,1,"h3",1),t.j41(1,"editable-form",2),t.bIt("submit",function(){return t.eBV(s),t.Njj(a.onSaveData())})("cancel",function(){return t.eBV(s),t.Njj(a.onCancel())}),t.j41(2,"div",3),t.nrm(3,"input-search",4,0),t.k0s(),t.j41(5,"div",3),t.nrm(6,"input-select",5),t.k0s()()}2&o&&(t.Y8G("ngIf",!a.isModal),t.R7$(),t.Y8G("form",a.form),t.R7$(2),t.Y8G("size",12)("dao",a.tipoCapacidadeDao),t.R7$(3),t.Y8G("size",6)("label",a.lex.translate("Perfil"))("dao",a.perfilDao))},dependencies:[r.bT,h.Q,R.O,I.K]})}}return i})();var F=n(5611),E=n(9062),P=n(2034),$=n(5852),B=n(7772),L=n(2305),M=n(6764),O=n(16);function Y(i,l){if(1&i&&(t.j41(0,"h3",12),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.title)}}function b(i,l){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=l.row;t.R7$(),t.SpI(" ",e.perfil.nome,"")}}function A(i,l){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=l.row;t.R7$(),t.SpI(" ",e.tipo_capacidade.codigo,"")}}function V(i,l){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=l.row;t.R7$(),t.SpI(" ",e.tipo_capacidade.descricao,"")}}const N=[{path:"",component:(()=>{class i extends E.P{constructor(e){super(e,d.I,C.J),this.injector=e,this.filterWhere=o=>{let a=[];return o.value.descricao?.length&&a.push(["perfil_id","=",this.urlParams?.get("perfil_id")]),a},this.join=["tipo_capacidade","perfil"],this.tipoCapacidadeDao=e.get(v.T),this.perfilDao=e.get(g.e),this.title=this.lex.translate("Capacidades"),this.code="MOD_TIPO_CAP",this.filter=this.fh.FormBuilder({descricao:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_CAP")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_TIPO_CAP_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)})}ngOnInit(){super.ngOnInit(),this.perfilDao.getById(this.urlParams.get("perfil_id")).then(e=>{this.title=this.lex.translate("Capacidades")+" do perfil "+e?.nome,this.cdRef.detectChanges()})}filterClear(e){e.controls.descricao.setValue(""),super.filterClear(e)}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-capacidade-list"]],viewQuery:function(o,a){if(1&o&&t.GBs(F._,5),2&o){let s;t.mGM(s=t.lsd())&&(a.grid=s.first)}},features:[t.Vt3],decls:18,vars:25,consts:[["columnPerfil",""],["columnCodCapacidade",""],["columnTipoCapacidade",""],["class","my-2",4,"ngIf"],[3,"dao","add","orderBy","groupBy","join"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","descricao",3,"size","label","control"],[3,"title","template"],["title","C\xf3digo",3,"template"],["type","options",3,"onEdit","onDelete"],[3,"rows"],[1,"my-2"]],template:function(o,a){if(1&o&&(t.DNE(0,Y,2,1,"h3",3),t.j41(1,"grid",4),t.nrm(2,"toolbar"),t.j41(3,"filter",5)(4,"div",6),t.nrm(5,"input-text",7),t.k0s()(),t.j41(6,"columns")(7,"column",8),t.DNE(8,b,2,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(10,"column",9),t.DNE(11,A,2,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(13,"column",8),t.DNE(14,V,2,1,"ng-template",null,2,t.C5r),t.k0s(),t.nrm(16,"column",10),t.k0s(),t.nrm(17,"pagination",11),t.k0s()),2&o){const s=t.sdS(9),m=t.sdS(12),U=t.sdS(15);t.Y8G("ngIf",!a.isModal),t.R7$(),t.Y8G("dao",a.dao)("add",a.add)("orderBy",a.orderBy)("groupBy",a.groupBy)("join",a.join),t.R7$(2),t.Y8G("deleted",a.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",a.filter)("where",a.filterWhere)("submit",a.filterSubmit.bind(a))("clear",a.filterClear.bind(a))("collapseChange",a.filterCollapseChange.bind(a))("collapsed",a.filterCollapsed),t.R7$(2),t.Y8G("size",12)("label",a.lex.translate("Capacidade"))("control",a.filter.controls.descricao),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("title",a.lex.translate("Perfil"))("template",s),t.R7$(3),t.Y8G("template",m),t.R7$(3),t.Y8G("title",a.lex.translate("Capacidade"))("template",U),t.R7$(3),t.Y8G("onEdit",a.edit)("onDelete",a.delete),t.R7$(),t.Y8G("rows",a.rowsLimit)}},dependencies:[r.bT,F._,P.T,$.I,B.i,L.H,M.e,O.H]})}}return i})(),canActivate:[c.q],resolve:{config:p.L},runGuardsAndResolvers:"always",data:{title:"Capacidades"}},{path:"new",component:y,canActivate:[c.q],resolve:{config:p.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Capacidade",modal:!0}},{path:":id/edit",component:y,canActivate:[c.q],resolve:{config:p.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Capacidade",modal:!0}}];let z=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(N),u.iI]})}}return i})();var S=n(9455),Q=n(8832);let X=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[r.MD,S.h,Q.X1,z]})}}return i})()}}]);
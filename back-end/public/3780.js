"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[3780],{3780:(W,h,s)=>{s.r(h),s.d(h,{FeriadoModule:()=>H});var p=s(6610),v=s(8069),r=s(1620),d=s(6819),C=s(3308),b=s(1641),u=s(1143),G=s(7509),A=s(291);class c extends A.C{constructor(m){super(),this.nome="",this.dia=1,this.mes=1,this.ano=null,this.recorrente=1,this.abrangencia="NACIONAL",this.codigo_ibge=null,this.entidade_id=null,this.cidade_id=null,this.uf=null,this.initialization(m)}}var E=s(24),D=s(9337),e=s(3279),N=s(4734),y=s(9226),g=s(16),z=s(9742),I=s(3678);const R=["cidade"],M=["entidade"];function L(n,m){if(1&n&&e.nrm(0,"input-search",14,1),2&n){const t=e.XpG();e.Y8G("size",6)("dao",t.cidadeDao)}}function T(n,m){if(1&n&&e.nrm(0,"input-select",15),2&n){const t=e.XpG();e.Y8G("size",6)("items",t.lookup.UF)}}function B(n,m){1&n&&e.nrm(0,"input-display",16),2&n&&e.Y8G("size",6)}let f=(()=>{class n extends E.n{constructor(t){super(t,c,u.E),this.injector=t,this.validate=(o,i)=>{let a=null;return["nome"].indexOf(i)>=0&&!o.value?.length?a="Obrigat\xf3rio":"ano"==i&&0==this.form?.controls.recorrente.value&&!this.util.between(parseInt(o.value||0),{start:2e3,end:2100})&&(a="Inv\xe1lido"),a},this.titleEdit=o=>"Editando "+this.lex.translate("Feriado")+": "+(o?.nome||""),this.entidadeDao=t.get(G.M),this.cidadeDao=t.get(D.a),this.form=this.fh.FormBuilder({nome:{default:""},dia:{default:""},mes:{default:""},ano:{default:null},recorrente:{default:1},abrangencia:{default:"NACIONAL"},codigo_ibge:{default:null},cidade_id:{default:null},uf:{default:null},entidade_id:{default:null},data_inicio:{default:new Date},data_fim:{default:new Date}},this.cdRef,this.validate),this.join=["cidade","entidade"]}checkAnoDisabled(){const t=!this.form?.controls.recorrente.value;return!t&&null!=this.form?.controls.ano.value&&(this.form?.controls.ano.setValue(null),this.cdRef.markForCheck()),t?void 0:"true"}loadData(t,o){var i=this;return(0,C.A)(function*(){let a=Object.assign({},o.value),l=i.util.fillForm(a,t);yield Promise.all([i.cidade?.loadSearch(t.cidade||t.cidade_id),i.entidade.loadSearch(t.entidade||t.entidade_id)]),o.patchValue(l)})()}initializeData(t){this.loadData(new c,t)}saveData(t){return new Promise((o,i)=>{let a=this.util.fill(new c,this.entity);a=this.util.fillForm(a,this.form.value),a.codigo_ibge="MUNICIPAL"==a.abrangencia&&this.cidade?.selectedEntity?(this.cidade?.selectedEntity).codigo_ibge:"ESTADUAL"==a.abrangencia?this.lookup.UF.find(l=>l.key==a.uf)?.code:null,o(a)})}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-feriado-form"]],viewQuery:function(o,i){if(1&o&&(e.GBs(b.Q,5),e.GBs(R,5),e.GBs(M,5)),2&o){let a;e.mGM(a=e.lsd())&&(i.editableForm=a.first),e.mGM(a=e.lsd())&&(i.cidade=a.first),e.mGM(a=e.lsd())&&(i.entidade=a.first)}},features:[e.Vt3],decls:15,vars:21,consts:[["entidade",""],["cidade",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Descri\xe7\xe3o","icon","far fa-edit","controlName","nome","required","",3,"size"],["label","Abrang\xeancia","controlName","abrangencia","icon","bi bi-globe-americas",3,"size","items"],["label","Recorrente","icon","fas fa-redo","controlName","recorrente","labelInfo","Se o feriado \xe9 recorrente todos os anos... se n\xe3o, informar o ano.",3,"size","items"],["label","Dia","icon","bi bi-calendar-date","controlName","dia",3,"size","items"],["label","M\xeas","icon","bi bi-calendar-date","controlName","mes",3,"size","items"],["numbers","","label","Ano","icon","bi bi-calendar-date","controlName","ano",3,"size","disabled"],["controlName","cidade_id",3,"size","dao",4,"ngIf"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items",4,"ngIf"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size",4,"ngIf"],["controlName","entidade_id",3,"size","dao"],["controlName","cidade_id",3,"size","dao"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size"]],template:function(o,i){if(1&o){const a=e.RV6();e.j41(0,"editable-form",2),e.bIt("submit",function(){return e.eBV(a),e.Njj(i.onSaveData())})("cancel",function(){return e.eBV(a),e.Njj(i.onCancel())}),e.j41(1,"div",3),e.nrm(2,"input-text",4)(3,"input-select",5),e.k0s(),e.j41(4,"div",3),e.nrm(5,"input-radio",6)(6,"input-select",7)(7,"input-select",8)(8,"input-text",9),e.k0s(),e.j41(9,"div",3),e.DNE(10,L,2,2,"input-search",10)(11,T,1,2,"input-select",11)(12,B,1,1,"input-display",12),e.nrm(13,"input-search",13,0),e.k0s()()}2&o&&(e.Y8G("form",i.form)("disabled",i.formDisabled)("title",i.isModal?"":i.title),e.R7$(2),e.Y8G("size",8),e.BMQ("maxlength",250),e.R7$(),e.Y8G("size",4)("items",i.lookup.ABRANGENCIA),e.R7$(2),e.Y8G("size",3)("items",i.lookup.SIMNAO),e.R7$(),e.Y8G("size",3)("items",i.lookup.DIA_MES),e.R7$(),e.Y8G("size",3)("items",i.lookup.MESES),e.R7$(),e.Y8G("size",3)("disabled",i.checkAnoDisabled()),e.BMQ("maxlength",250),e.R7$(2),e.Y8G("ngIf","MUNICIPAL"==i.form.controls.abrangencia.value),e.R7$(),e.Y8G("ngIf","ESTADUAL"==i.form.controls.abrangencia.value),e.R7$(),e.Y8G("ngIf","NACIONAL"==i.form.controls.abrangencia.value),e.R7$(),e.Y8G("size",6)("dao",i.entidadeDao))},dependencies:[p.bT,b.Q,N.Q,y.O,g.H,z.t,I.K]})}}return n})();var F=s(5611),O=s(9062),Y=s(2034),j=s(5852),$=s(7772),U=s(2305),S=s(6764);const P=[{path:"",component:(()=>{class n extends O.P{constructor(t,o){super(t,c,u.E),this.injector=t,this.filterWhere=i=>{let a=[],l=i.value;return l.nome?.length&&a.push(["nome","like","%"+l.nome.trim().replace(" ","%")+"%"]),a},this.dao=o,this.title=this.lex.translate("Feriados"),this.code="MOD_FER",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_FER")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_FER_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(t){t.controls.nome.setValue(""),super.filterClear(t)}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(e.zZn),e.rXU(u.E))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-feriado-list"]],viewQuery:function(o,i){if(1&o&&e.GBs(F._,5),2&o){let a;e.mGM(a=e.lsd())&&(i.grid=a.first)}},features:[e.Vt3],decls:12,vars:23,consts:[[3,"dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","nome",3,"size","label","control","placeholder"],["title","Descri\xe7\xe3o","field","nome"],["title","Dia","field","dia"],["title","M\xeas","field","mes"],["title","Ano","field","ano"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(o,i){1&o&&(e.j41(0,"grid",0),e.nrm(1,"toolbar"),e.j41(2,"filter",1)(3,"div",2),e.nrm(4,"input-text",3),e.k0s()(),e.j41(5,"columns"),e.nrm(6,"column",4)(7,"column",5)(8,"column",6)(9,"column",7)(10,"column",8),e.k0s(),e.nrm(11,"pagination",9),e.k0s()),2&o&&(e.Y8G("dao",i.dao)("add",i.add)("title",i.isModal?"":i.title)("orderBy",i.orderBy)("groupBy",i.groupBy)("join",i.join)("hasAdd",i.auth.hasPermissionTo("MOD_FER_INCL"))("hasEdit",i.auth.hasPermissionTo("MOD_FER_EDT")),e.R7$(2),e.Y8G("deleted",i.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",i.filter)("where",i.filterWhere)("submit",i.filterSubmit.bind(i))("clear",i.filterClear.bind(i))("collapseChange",i.filterCollapseChange.bind(i))("collapsed",i.filterCollapsed),e.R7$(2),e.Y8G("size",12)("label","Nome "+i.lex.translate("Feriado"))("control",i.filter.controls.nome)("placeholder","Nome "+i.lex.translate("feriado")),e.BMQ("maxlength",250),e.R7$(6),e.Y8G("onEdit",i.edit)("options",i.options),e.R7$(),e.Y8G("rows",i.rowsLimit))},dependencies:[F._,Y.T,j.I,$.i,U.H,S.e,g.H]})}}return n})(),canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Feriados"}},{path:"new",component:f,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Feriado",modal:!0}},{path:":id/edit",component:f,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Feriado",modal:!0}},{path:":id/consult",component:f,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Consulta a Feriado",modal:!0}}];let V=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[v.iI.forChild(P),v.iI]})}}return n})();var Q=s(9455),X=s(8832);let H=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[p.MD,Q.h,X.X1,V]})}}return n})()}}]);
"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[4272],{4272:(H,f,i)=>{i.r(f),i.d(f,{ClienteModule:()=>P});var y=i(6610),j=i(8832),B=i(9455),h=i(8069),r=i(1620),d=i(6819),v=i(5611),c=i(5099),C=i(5492),m=i(2096),D=i(9062),e=i(3279),E=i(2034),T=i(5852),F=i(7772),L=i(2305),R=i(6764),g=i(16),b=i(3678);function V(s,X){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const n=X.row;e.R7$(),e.SpI(" ",null==n.tipo_cliente?null:n.tipo_cliente.nome,"")}}let M=(()=>{class s extends D.P{constructor(n,l){super(n,m.t,c.K),this.injector=n,this.filterWhere=t=>{let o=[],a=t.value;return a.nome?.length&&o.push(["nome","like","%"+a.nome.trim().replace(" ","%")+"%"]),t?.controls.tipo_cliente_id?.value?.length&&o.push(["tipo_cliente_id","==",t?.controls.tipo_cliente_id?.value]),o},this.tipoClienteDao=n.get(C.E),this.dao=l,this.title=this.lex.translate("Clientes"),this.filter=this.fh.FormBuilder({nome:{default:""},tipo_cliente_id:{default:null}}),this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.join=["tipoCliente"],this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(n){n.controls.nome.setValue(""),super.filterClear(n)}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(e.zZn),e.rXU(c.K))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-cliente-list"]],viewQuery:function(l,t){if(1&l&&e.GBs(v._,5),2&l){let o;e.mGM(o=e.lsd())&&(t.grid=o.first)}},features:[e.Vt3],decls:13,vars:29,consts:[["columnTipo",""],[3,"select","dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit","selectable"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","tipo_cliente_id","nullable","",3,"size","label","control","dao"],["controlName","nome",3,"size","label","control","placeholder"],["title","Tipo",3,"template"],["title","Descri\xe7\xe3o","field","nome"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(l,t){if(1&l){const o=e.RV6();e.j41(0,"grid",1),e.bIt("select",function(p){return e.eBV(o),e.Njj(t.onSelect(p))}),e.nrm(1,"toolbar"),e.j41(2,"filter",2)(3,"div",3),e.nrm(4,"input-select",4)(5,"input-text",5),e.k0s()(),e.j41(6,"columns")(7,"column",6),e.DNE(8,V,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.nrm(10,"column",7)(11,"column",8),e.k0s(),e.nrm(12,"pagination",9),e.k0s()}if(2&l){const o=e.sdS(9);e.Y8G("dao",t.dao)("add",t.add)("title",t.isModal?"":t.title)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join)("hasAdd",t.auth.isUsuarioDeveloper())("hasEdit",t.auth.isUsuarioDeveloper())("selectable",t.selectable),e.R7$(2),e.Y8G("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",t.filterCollapsed),e.R7$(2),e.Y8G("size",4)("label",t.lex.translate("Tipo Cliente"))("control",t.filter.controls.tipo_cliente_id)("dao",t.tipoClienteDao),e.R7$(),e.Y8G("size",8)("label","Nome")("control",t.filter.controls.nome)("placeholder","Nome"),e.BMQ("maxlength",250),e.R7$(2),e.Y8G("template",o),e.R7$(4),e.Y8G("onEdit",t.edit)("options",t.options),e.R7$(),e.Y8G("rows",t.rowsLimit)}},dependencies:[v._,E.T,T.I,F.i,L.H,R.e,g.H,b.K]})}}return s})();var N=i(3308),G=i(1641),z=i(3535),A=i(24),I=i(9226);const U=["tipoCliente"],$=["unidade"],Y=["nome"],O=()=>["cadastros","tipo-cliente"],Q=s=>({route:s});let u=(()=>{class s extends A.n{constructor(n){super(n,m.t,c.K),this.injector=n,this.tiposCliente=[],this.tipoClienteDao=n.get(C.E),this.unidadeDao=n.get(z.s),this.form=this.fh.FormBuilder({nome:{default:""},tipo_cliente_id:{default:""},unidade_id:{default:null}})}loadData(n,l){var t=this;return(0,N.A)(function*(){let o=Object.assign({},l.value),a=t.util.fillForm(o,n);l.patchValue(a)})()}initializeData(n){this.loadData(new m.t,n)}saveData(n){return new Promise((l,t)=>{const o=this.util.fill(new m.t,this.entity);l(this.util.fillForm(o,this.form.value))})}alteraTipo(){"c28122f5-708d-11ef-8e76-0242ac1c0002"==this.tipoCliente?.selectedItem?.value?(this.unidade?.selfElement?.nativeElement.classList.remove("d-none"),this.nome?.selfElement?.nativeElement.classList.add("d-none")):(this.form?.controls.unidade_id.setValue(null),this.unidade?.selfElement?.nativeElement.classList.add("d-none"),this.nome?.selfElement?.nativeElement.classList.remove("d-none"))}selecionaUnidade(n){this.form?.controls.nome.setValue(n.entity?.nome)}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-cliente-form"]],viewQuery:function(l,t){if(1&l&&(e.GBs(G.Q,5),e.GBs(U,5),e.GBs($,5),e.GBs(Y,5)),2&l){let o;e.mGM(o=e.lsd())&&(t.editableForm=o.first),e.mGM(o=e.lsd())&&(t.tipoCliente=o.first),e.mGM(o=e.lsd())&&(t.unidade=o.first),e.mGM(o=e.lsd())&&(t.nome=o.first)}},features:[e.Vt3],decls:8,vars:14,consts:[["tipoCliente",""],["unidade",""],["nome",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Tipo","controlName","tipo_cliente_id",3,"change","size","dao","selectRoute"],["label","Unidade","controlName","unidade_id",3,"select","size","dao","classList"],["label","Nome","controlName","nome","required","",3,"size"]],template:function(l,t){if(1&l){const o=e.RV6();e.j41(0,"editable-form",3),e.bIt("submit",function(){return e.eBV(o),e.Njj(t.onSaveData())})("cancel",function(){return e.eBV(o),e.Njj(t.onCancel())}),e.j41(1,"div",4)(2,"input-search",5,0),e.bIt("change",function(){return e.eBV(o),e.Njj(t.alteraTipo())}),e.k0s(),e.j41(4,"input-search",6,1),e.bIt("select",function(p){return e.eBV(o),e.Njj(t.selecionaUnidade(p))}),e.k0s(),e.nrm(6,"input-text",7,2),e.k0s()()}2&l&&(e.Y8G("form",t.form)("disabled",t.formDisabled)("title",t.isModal?"":t.title),e.R7$(2),e.Y8G("size",4)("dao",t.tipoClienteDao)("selectRoute",e.eq3(12,Q,e.lJ4(11,O))),e.R7$(2),e.Y8G("size",8)("dao",t.unidadeDao)("classList","d-none"),e.R7$(2),e.Y8G("size",8),e.BMQ("maxlength",250))},dependencies:[G.Q,I.O,g.H]})}}return s})();const S=[{path:"",component:M,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Clientes"}},{path:"new",component:u,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Cliente",modal:!0}},{path:":id/edit",component:u,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Cliente",modal:!0}},{path:":id/consult",component:u,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Consulta a Cliente",modal:!0}}];let K=(()=>{class s{static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(S),h.iI]})}}return s})(),P=(()=>{class s{static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[y.MD,B.h,j.X1,K]})}}return s})()}}]);
"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[4755],{4755:(st,h,l)=>{l.r(h),l.d(h,{TipoAtividadeModule:()=>tt});var c=l(6610),f=l(8069),r=l(1620),m=l(6819),v=l(3308),g=l(1641),T=l(6807),b=l(291);class d extends b.C{constructor(a){super(),this.nome="",this.esforco=8,this.dias_planejado=0,this.etiquetas=[],this.checklist=[],this.comentario="",this.initialization(a)}}var R=l(24),t=l(3279),C=l(16),G=l(158),F=l(3678),D=l(4054),_=l(1230),j=l(8857);let u=(()=>{class o extends R.n{constructor(i){super(i,d,T.f),this.injector=i,this.validate=(n,e)=>{let s=null;return["nome"].indexOf(e)>=0&&!n.value?.length&&(s="Obrigat\xf3rio"),s},this.titleEdit=n=>"Editando "+this.lex.translate("Tipo de Atividade")+": "+(n?.nome||""),this.title=this.lex.translate("Tipo de Atividade"),this.form=this.fh.FormBuilder({nome:{default:""},esforco:{default:48},dias_planejado:{default:""},etiquetas:{default:[]},checklist:{default:[]},comentario:{default:""},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},checklist_texto:{default:""}},this.cdRef,this.validate)}addItemHandleChecklist(){let i;const n=this.form.controls.checklist_texto.value,e=this.util.textHash(n);return n?.length&&this.util.validateLookupItem(this.form.controls.checklist.value,e)&&(i={key:e,value:this.form.controls.checklist_texto.value},this.form.controls.checklist_texto.setValue("")),i}addItemHandleEtiquetas(){let i;const n=this.form.controls.etiqueta_texto.value,e=this.util.textHash(n);return n?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,e)&&(i={key:e,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}loadData(i,n){var e=this;return(0,v.A)(function*(){let s=Object.assign({},n.value);n.patchValue(e.util.fillForm(s,i))})()}initializeData(i){this.entity=new d,this.loadData(this.entity,i)}saveData(i){var n=this;return(0,v.A)(function*(){let e=n.util.fill(new d,n.entity);return n.util.fillForm(e,n.form.value)})()}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-tipo-atividade-form"]],viewQuery:function(n,e){if(1&n&&t.GBs(g.Q,5),2&n){let s;t.mGM(s=t.lsd())&&(e.editableForm=s.first)}},features:[t.Vt3],decls:13,vars:18,consts:[["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Nome","controlName","nome","required","",3,"size"],["title","Etiquetas/Check-list/Coment\xe1rio"],["label","Etiquetas","controlName","etiquetas",3,"size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xcdcone","icon","fas fa-sign-out-alt","controlName","etiqueta_icone","liveSearch","",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["label","Checklists","controlName","checklist",3,"size","addItemHandle"],["controlName","checklist_texto",3,"size"],["label","Coment\xe1rios","controlName","comentario","labelInfo","Coment\xe1rio que ser\xe1 adicionado automaticamente",3,"size","rows"]],template:function(n,e){1&n&&(t.j41(0,"editable-form",0),t.bIt("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),t.j41(1,"div",1),t.nrm(2,"input-text",2),t.k0s(),t.nrm(3,"separator",3),t.j41(4,"div",1)(5,"input-multiselect",4),t.nrm(6,"input-text",5)(7,"input-select",6)(8,"input-color",7),t.k0s(),t.j41(9,"input-multiselect",8),t.nrm(10,"input-text",9),t.k0s()(),t.j41(11,"div",1),t.nrm(12,"input-textarea",10),t.k0s()()),2&n&&(t.Y8G("form",e.form)("disabled",e.formDisabled)("title",e.isModal?"":e.title),t.R7$(2),t.Y8G("size",12),t.BMQ("maxlength",250),t.R7$(3),t.Y8G("size",8)("addItemHandle",e.addItemHandleEtiquetas.bind(e)),t.R7$(),t.Y8G("size",5),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",3)("items",e.lookup.ICONES),t.R7$(),t.Y8G("size",4),t.R7$(),t.Y8G("size",4)("addItemHandle",e.addItemHandleChecklist.bind(e)),t.R7$(),t.Y8G("size",12),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("size",12)("rows",3))},dependencies:[g.Q,C.H,G.S,F.K,D.f,_.b,j.F]})}}return o})();var E=l(5611),k=l(9062),N=l(2034),$=l(5852),I=l(7772),L=l(2305),Y=l(6764),y=l(3024),O=l(5201);function z(o,a){1&o&&t.nrm(0,"toolbar")}function M(o,a){if(1&o&&(t.j41(0,"small"),t.EFF(1),t.k0s()),2&o){const i=t.XpG().row;t.R7$(),t.JRh(i.comentario)}}function V(o,a){if(1&o&&(t.j41(0,"span",23),t.EFF(1),t.k0s(),t.DNE(2,M,2,1,"small",10)),2&o){const i=a.row;t.R7$(),t.JRh(i.nome),t.R7$(),t.Y8G("ngIf",i.comentario)}}function B(o,a){if(1&o&&t.nrm(0,"badge",26),2&o){const i=a.$implicit;t.Y8G("icon",i.icon)("label",i.value)("color",i.color)}}function S(o,a){if(1&o&&(t.j41(0,"div",24),t.DNE(1,B,1,3,"badge",25),t.k0s()),2&o){const i=a.row;t.R7$(),t.Y8G("ngForOf",i.etiquetas)}}function w(o,a){1&o&&t.nrm(0,"badge",28),2&o&&t.Y8G("label",a.$implicit.value)}function H(o,a){if(1&o&&(t.j41(0,"div",24),t.DNE(1,w,1,1,"badge",27),t.k0s()),2&o){const i=a.row;t.R7$(),t.Y8G("ngForOf",i.checklist)}}function P(o,a){1&o&&t.EFF(0),2&o&&t.JRh(a.row.nome)}function q(o,a){1&o&&t.EFF(0),2&o&&t.JRh(a.row.esforco)}function Q(o,a){1&o&&t.EFF(0),2&o&&t.JRh(a.row.dias_planejado)}function J(o,a){if(1&o&&t.EFF(0),2&o){const i=a.row,n=t.XpG();t.JRh(n.getReportEtiquetas(i))}}function X(o,a){if(1&o&&t.EFF(0),2&o){const i=a.row,n=t.XpG();t.JRh(n.getReportChecklist(i))}}function U(o,a){1&o&&t.EFF(0),2&o&&t.JRh(a.row.comentario_predefinido)}const x=[{path:"",component:(()=>{class o extends k.P{constructor(i){super(i,d,T.f),this.injector=i,this.filterWhere=n=>{let e=n.value,s=[];return e.nome?.length&&s.push(["nome","like","%"+e.nome.trim().replace(" ","%")+"%"]),s},this.title=this.lex.translate("Tipos de Atividades"),this.code="MOD_TIPO_ATV",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_ATV")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_ATV_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(i){i.controls.nome.setValue(""),super.filterClear(i)}getReportEtiquetas(i){let n="";return i.etiquetas.forEach(e=>{n+=e.value+";\n"}),n}getReportChecklist(i){let n="";return i.checklist.forEach(e=>{n+=e.value+";\n"}),n}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-tipo-atividade-list"]],viewQuery:function(n,e){if(1&n&&t.GBs(E._,5),2&n){let s;t.mGM(s=t.lsd())&&(e.grid=s.first)}},features:[t.Vt3],decls:36,vars:31,consts:[["columnNome",""],["columnEtiquetas",""],["columnChecklist",""],["reportNome",""],["reportEsforco",""],["reportDiasPlanejado",""],["reportEtiquetas",""],["reportChecklist",""],["reportComentario",""],[3,"select","dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit"],[4,"ngIf"],[3,"deleted","form","where","submit","clear"],[1,"row"],["label","Nome","controlName","nome",3,"size","control"],["title","Nome",3,"template"],["title","Etiquetas",3,"template"],["title","Checklist",3,"template"],["type","options",3,"onEdit","options"],[3,"title","template"],["title","Dias planejamento",3,"template"],["title","Check-list",3,"template"],["title","Coment\xe1rio",3,"template"],[3,"rows"],[1,"d-block"],[1,"one-per-line","text-break","w-100"],[3,"icon","label","color",4,"ngFor","ngForOf"],[3,"icon","label","color"],["color","light","icon","bi bi-check2-square",3,"label",4,"ngFor","ngForOf"],["color","light","icon","bi bi-check2-square",3,"label"]],template:function(n,e){if(1&n){const s=t.RV6();t.j41(0,"grid",9),t.bIt("select",function(p){return t.eBV(s),t.Njj(e.onSelect(p))}),t.DNE(1,z,1,0,"toolbar",10),t.j41(2,"filter",11)(3,"div",12),t.nrm(4,"input-text",13),t.k0s()(),t.j41(5,"columns")(6,"column",14),t.DNE(7,V,3,2,"ng-template",null,0,t.C5r),t.k0s(),t.j41(9,"column",15),t.DNE(10,S,2,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(12,"column",16),t.DNE(13,H,2,1,"ng-template",null,2,t.C5r),t.k0s(),t.nrm(15,"column",17),t.k0s(),t.j41(16,"report")(17,"column",14),t.DNE(18,P,1,1,"ng-template",null,3,t.C5r),t.k0s(),t.j41(20,"column",18),t.DNE(21,q,1,1,"ng-template",null,4,t.C5r),t.k0s(),t.j41(23,"column",19),t.DNE(24,Q,1,1,"ng-template",null,5,t.C5r),t.k0s(),t.j41(26,"column",15),t.DNE(27,J,1,1,"ng-template",null,6,t.C5r),t.k0s(),t.j41(29,"column",20),t.DNE(30,X,1,1,"ng-template",null,7,t.C5r),t.k0s(),t.j41(32,"column",21),t.DNE(33,U,1,1,"ng-template",null,8,t.C5r),t.k0s()(),t.nrm(35,"pagination",22),t.k0s()}if(2&n){const s=t.sdS(8),A=t.sdS(11),p=t.sdS(14),et=t.sdS(19),ot=t.sdS(22),it=t.sdS(25),nt=t.sdS(28),lt=t.sdS(31),at=t.sdS(34);t.Y8G("dao",e.dao)("add",e.add)("title",e.isModal?"":e.title)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join)("selectable",e.selectable)("hasAdd",e.auth.hasPermissionTo("MOD_TIPO_ATV_INCL"))("hasEdit",e.auth.hasPermissionTo("MOD_TIPO_ATV_EDT")),t.R7$(),t.Y8G("ngIf",!e.selectable),t.R7$(),t.Y8G("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("clear",e.filterClear.bind(e)),t.R7$(2),t.Y8G("size",12)("control",e.filter.controls.nome),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("template",s),t.R7$(3),t.Y8G("template",A),t.R7$(3),t.Y8G("template",p),t.R7$(3),t.Y8G("onEdit",e.edit)("options",e.options),t.R7$(2),t.Y8G("template",et),t.R7$(3),t.Y8G("title",e.lex.translate("Esfor\xe7o"))("template",ot),t.R7$(3),t.Y8G("template",it),t.R7$(3),t.Y8G("template",nt),t.R7$(3),t.Y8G("template",lt),t.R7$(3),t.Y8G("template",at),t.R7$(3),t.Y8G("rows",e.rowsLimit)}},dependencies:[c.Sq,c.bT,E._,N.T,$.I,I.i,L.H,Y.e,C.H,y.g,O.n]})}}return o})(),canActivate:[r.q],resolve:{config:m.L},data:{title:"Atividades"}},{path:"new",component:u,canActivate:[r.q],resolve:{config:m.L},data:{title:"Inclus\xe3o de Atividade",modal:!0}},{path:":id/edit",component:u,canActivate:[r.q],resolve:{config:m.L},data:{title:"Edi\xe7\xe3o de Atividade",modal:!0}},{path:":id/consult",component:u,canActivate:[r.q],resolve:{config:m.L},data:{title:"Consulta a Atividade",modal:!0}}];let W=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(x),f.iI]})}}return o})();var Z=l(9455),K=l(8832);let tt=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[c.MD,Z.h,K.X1,W]})}}return o})()}}]);
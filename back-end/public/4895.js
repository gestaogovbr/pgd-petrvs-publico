"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[4895],{4895:(L,l,i)=>{i.r(l),i.d(l,{RelatoLotacaoModule:()=>N});var d=i(6610),u=i(8069),p=i(1620),f=i(6819),c=i(3308),m=i(1641),h=i(4423),o=i(3279);let v=(()=>{class t extends h.F{constructor(a){super("Relato",a),this.injector=a}enviar(a,r,e,s,n,O,I){return this.server.post("api/Relato/store",{opcao:a,usuario_id:r,unidade_id:e,nome:s,cpf:n,matricula:O,descricao:I})}static{this.\u0275fac=function(r){return new(r||t)(o.KVO(o.zZn))}}static{this.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var g=i(3535),V=i(5413),b=i(4468),E=i(9226),R=i(16),F=i(158),y=i(9742);const G=["usuario"],C=["unidade"];function z(t,$){1&t&&(o.j41(0,"div",3)(1,"div",15),o.nrm(2,"input-textarea",16),o.k0s()()),2&t&&(o.R7$(2),o.Y8G("size",12)("rows",3),o.BMQ("maxlength",1e3))}const A=[{path:"",component:(()=>{class t extends b.V{constructor(a){super(a),this.injector=a,this.mensagemCarregando="Carregando dados do formul\xe1rio...",this.mensagemSalvando="Salvando dados do formul\xe1rio...",this.OPTIONS=[{key:"1",value:"O agente p\xfablico mudou de unidade dentro do pr\xf3prio \xf3rg\xe3o/entidade e o Petrvs n\xe3o atualizou sua lota\xe7\xe3o."},{key:"2",value:"O agente p\xfablico est\xe1 cedido para outro \xf3rg\xe3o/entidade e o Petrvs o mant\xe9m na base de dados deste \xf3rg\xe3o/entidade."},{key:"3",value:"O agente p\xfablico est\xe1 cedido para este \xf3rg\xe3o/entidade, mas no Petrvs ainda n\xe3o consta na base de dados."},{key:"4",value:"Outros"}],this.relatoDao=a.get(v),this.usuarioDao=a.get(V._),this.unidadeDao=a.get(g.s),this.form=this.fh.FormBuilder({opcao:{default:""},usuario_id:{default:""},unidade_id:{default:""},nome:{default:""},cpf:{default:""},matricula:{default:""},descricao:{default:""}}),this.updateValidators()}updateValidators(){this.form.get("usuario_id")?.clearValidators(),this.form.get("unidade_id")?.clearValidators(),this.form.get("nome")?.clearValidators(),this.form.get("cpf")?.clearValidators(),this.form.get("matricula")?.clearValidators(),this.form.get("descricao")?.clearValidators(),1==this.form.controls.opcao.value||2==this.form.controls.opcao.value?(this.form.get("usuario_id")?.setValidators(this.requiredValidator.bind(this)),1==this.form.controls.opcao.value&&(this.form.get("unidade_id")?.setValidators(this.requiredValidator.bind(this)),this.form.get("descricao")?.setValidators(this.requiredValidator.bind(this)))):(this.form.get("nome")?.setValidators(this.requiredValidator.bind(this)),this.form.get("cpf")?.setValidators(this.requiredValidator.bind(this)),this.form.get("matricula")?.setValidators(this.requiredValidator.bind(this)),4==this.form.controls.opcao.value&&this.form.get("descricao")?.setValidators(this.requiredValidator.bind(this))),this.form.get("usuario_id")?.updateValueAndValidity(),this.form.get("unidade_id")?.updateValueAndValidity()}requiredValidator(a){return this.util.empty(a.value)?{errorMessage:"Obrigat\xf3rio"}:null}onSaveData(){var a=this;return(0,c.A)(function*(){var r;a.relatoDao.enviar(a.form.controls.opcao.value,a.form.controls.usuario_id.value,a.form.controls.unidade_id.value,a.form.controls.nome.value,a.form.controls.cpf.value,a.form.controls.matricula.value,a.form.controls.descricao.value).subscribe({next:(r=(0,c.A)(function*(e){yield a.dialog.alert("Problema relatado com sucesso","Obrigado por relatar este problema"),a.close()}),function(s){return r.apply(this,arguments)}),error:r=>{a.editableForm.error=r.error.message?r.error.message:r,console.error("Erro:",r.error)}})})()}onCancel(){this.close()}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(o.zZn))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-relato-lotacao-form"]],viewQuery:function(r,e){if(1&r&&(o.GBs(m.Q,5),o.GBs(G,5),o.GBs(C,5)),2&r){let s;o.mGM(s=o.lsd())&&(e.editableForm=s.first),o.mGM(s=o.lsd())&&(e.usuario=s.first),o.mGM(s=o.lsd())&&(e.unidade=s.first)}},features:[o.Vt3],decls:24,vars:20,consts:[["usuario",""],["unidade",""],["confirmLabel","Relatar problema",3,"submit","cancel","form","title"],[1,"row"],[1,"col-md-12","situacao"],["label","Selecione a op\xe7\xe3o mais adequada","controlName","opcao","circle","true","required","",3,"change","size","items"],[1,"row",3,"hidden"],[1,"col-md-6"],["controlName","usuario_id","required","","label","Agente p\xfablico com problema na lota\xe7\xe3o","placeholder","Selecione o agente p\xfablico",3,"size","dao"],["required","","controlName","unidade_id","label","Onde o agente p\xfablico DEVERIA ESTAR lotado","placeholder","Selecione a unidade",3,"hidden","size","emptyValue","dao"],["label","Nome","controlName","nome","label","Nome completo do agente p\xfablico com problema na lota\xe7\xe3o",3,"size"],[1,"col-md-3"],["label","Matr\xedcula","controlName","matricula","label","Matr\xedcula SIAPE",3,"size"],["label","CPF","controlName","cpf",3,"size","maskFormat"],["class","row",4,"ngIf"],[1,"col-md-12"],["label","Descri\xe7\xe3o","controlName","descricao","placeholder","Inclua informa\xe7\xf5es adicionais que ajudem a localiza\xe7\xe3o da portaria de movimenta\xe7\xe3o ou do processo SEI correspondente",3,"size","rows"]],template:function(r,e){if(1&r){const s=o.RV6();o.j41(0,"editable-form",2),o.bIt("submit",function(){return o.eBV(s),o.Njj(e.onSaveData())})("cancel",function(){return o.eBV(s),o.Njj(e.onCancel())}),o.j41(1,"p"),o.EFF(2,"Se voc\xea detectou alguma inconsist\xeancia na lota\xe7\xe3o de um agente p\xfablico, reporte o caso diretamente para a \xe1rea respons\xe1vel pelo corre\xe7\xe3o no SIAPE. "),o.k0s(),o.j41(3,"p")(4,"b"),o.EFF(5,"Selecione a op\xe7\xe3o mais adequada:"),o.k0s()(),o.j41(6,"div",3)(7,"div",4)(8,"input-radio",5),o.bIt("change",function(){return o.eBV(s),o.Njj(e.updateValidators())}),o.k0s()()(),o.j41(9,"div",6)(10,"div",7),o.nrm(11,"input-search",8,0),o.k0s(),o.j41(13,"div",7),o.nrm(14,"input-search",9,1),o.k0s()(),o.j41(16,"div",6)(17,"div",7),o.nrm(18,"input-text",10),o.k0s(),o.j41(19,"div",11),o.nrm(20,"input-text",12),o.k0s(),o.j41(21,"div",11),o.nrm(22,"input-text",13),o.k0s()(),o.DNE(23,z,3,3,"div",14),o.k0s()}2&r&&(o.Y8G("form",e.form)("title",e.isModal?"":e.title),o.R7$(8),o.Y8G("size",3)("items",e.OPTIONS),o.R7$(),o.Y8G("hidden",!e.form.controls.opcao.value||"3"==e.form.controls.opcao.value||"4"==e.form.controls.opcao.value),o.R7$(2),o.Y8G("size",4)("dao",e.usuarioDao),o.R7$(3),o.Y8G("hidden","2"==e.form.controls.opcao.value)("size",4)("emptyValue",null)("dao",e.unidadeDao),o.R7$(2),o.Y8G("hidden",!e.form.controls.opcao.value||"1"==e.form.controls.opcao.value||"2"==e.form.controls.opcao.value),o.R7$(2),o.Y8G("size",5),o.BMQ("maxlength",250),o.R7$(2),o.Y8G("size",2),o.BMQ("maxlength",250),o.R7$(2),o.Y8G("size",3)("maskFormat","000.000.000-00"),o.BMQ("maxlength",15),o.R7$(),o.Y8G("ngIf","1"==e.form.controls.opcao.value||"4"==e.form.controls.opcao.value))},dependencies:[d.bT,m.Q,E.O,R.H,F.S,y.t],styles:[".situacao[_ngcontent-%COMP%]{margin-bottom:10px}.situacao[_ngcontent-%COMP%]     .form-check{margin-top:15px!important;display:block}"]})}}return t})(),canActivate:[p.q],resolve:{config:f.L},runGuardsAndResolvers:"always",data:{title:"Relatar problema de lota\xe7\xe3o de agente p\xfablico"}}];let M=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=o.$C({type:t})}static{this.\u0275inj=o.G2t({imports:[u.iI.forChild(A),u.iI]})}}return t})();var j=i(9455),S=i(8832),D=i(3756);let N=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=o.$C({type:t})}static{this.\u0275inj=o.G2t({imports:[d.MD,j.h,S.X1,M,D.UteisModule]})}}return t})()}}]);
"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[6149],{8530:(ut,T,s)=>{s.r(T),s.d(T,{UnidadeModule:()=>lt});var b=s(6610),A=s(8069),p=s(1620),g=s(6819),f=s(3308),I=s(1641),N=s(9337),O=s(7509),Q=s(6867),h=s(3535),S=s(5413),J=s(9755),_=s(204),x=s(24),W=s(6551),e=s(3279),G=s(114),y=s(9226),M=s(16),F=s(3678),Z=s(4054),P=s(1230),U=s(2075),z=s(6774),K=s(8857),q=s(6336),ee=s(7293),te=s(8313);const ie=["unidade_pai"],ae=["cidade"],ne=["gestor"],oe=["gestorSubstituto"],se=["gestorDelegado"],de=["entidade"],le=["notificacoes"],re=n=>["entidade_id","==",n],ue=n=>[n];function me(n,r){if(1&n&&(e.j41(0,"tab",28),e.nrm(1,"notificacoes-config",29,5),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("unidadeId",i.entity.id.length?i.entity.id:"ADD")("entity",i.entity)("disabled",i.formDisabled)}}let E=(()=>{class n extends x.n{get informalIsDisabled(){return"true"}get instituidoraIsDisabled(){return this.auth.hasPermissionTo("MOD_UND_INST")?void 0:"true"}get codigoIsDisabled(){return this.informal||"new"!=this.action?"true":void 0}get unidadePaiIsDisabled(){return this.unidadeRaiz||!this.informal&&"edit"==this.action?"true":void 0}get isDisabled(){return this.informal||"edit"!=this.action?void 0:"true"}constructor(i){super(i,_.h,h.s),this.injector=i,this.unidadeRaiz=!1,this.informal=!0,this.validate=(a,t)=>{let o=null;return"unidade_pai_id"==t&&!a.value?.length&&!this.unidadeRaiz&&(o="Obrigat\xf3rio"),"codigo"==t&&!this.form?.controls.informal.value&&!parseInt(a.value)&&(o="Obrigat\xf3rio"),o},this.titleEdit=a=>"Editando "+this.lex.translate("Unidade")+": "+(a?.sigla||""),this.entidadeDao=i.get(O.M),this.cidadeDao=i.get(N.a),this.usuarioDao=i.get(S._),this.planoTrabalhoDao=i.get(Q.x),this.notificacao=i.get(W.S),this.modalWidth=1200,this.planoDataset=this.planoTrabalhoDao.dataset(),this.form=this.fh.FormBuilder({codigo:{default:""},sigla:{default:""},nome:{default:""},path:{default:""},cidade_id:{default:""},uf:{default:""},instituidora:{default:!1},informal:{default:!0},atividades_arquivamento_automatico:{default:0},distribuicao_forma_contagem_prazos:{default:"DIAS_UTEIS"},entrega_forma_contagem_prazos:{default:"HORAS_UTEIS"},notificacoes:{default:{}},etiquetas:{default:[]},unidade_pai_id:{default:""},entidade_id:{default:this.auth.unidade?.entidade_id},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},expediente24:{default:!0},expediente:{default:null},usar_expediente_unidade:{default:!1},texto_complementar_plano:{default:""}},this.cdRef,this.validate),this.join=["cidade","entidade","unidade_pai","gestor.usuario:id,nome","gestores_substitutos.usuario:id,nome","gestores_delegados.usuario:id,nome","notificacoes_templates","gestor.gestor:id","gestores_substitutos.gestor_substituto:id","gestores_delegados.gestor_delegado:id"]}loadData(i,a){var t=this;return(0,f.A)(function*(){t.informal=!!i.informal,t.cdRef.detectChanges();let o=Object.assign({},a.value);i.etiquetas=i.etiquetas||[],t.form.patchValue(t.util.fillForm(o,i)),yield Promise.all([t.unidadePai.loadSearch(i.unidade_pai||i.unidade_pai_id),t.cidade.loadSearch(i.cidade||i.cidade_id),t.entidade.loadSearch(i.entidade||i.entidade_id)]),t.form.controls.informal.setValue(i.informal),t.unidadeRaiz="edit"==t.action&&!i.unidade_pai_id,t.form.controls.usar_expediente_unidade.setValue(!!i.expediente),t.fh.revalidate(t.form)})()}initializeData(i){this.entity=new _.h({entidade_id:this.auth.unidade?.entidade_id,entidade:this.auth.unidade?.entidade,informal:1}),this.loadData(this.entity,i)}addItemHandle(){let i;const a=this.form.controls.etiqueta_texto.value,t=this.util.textHash(a);return a?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,t)&&(i={key:t,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}saveData(i){var a=this;return new Promise(function(){var t=(0,f.A)(function*(o,d){a.notificacoes.saveData();let l=a.util.fill(new _.h,a.entity);l=a.util.fillForm(l,a.form.value),l.notificacoes=a.entity.notificacoes,l.notificacoes_templates=a.entity.notificacoes_templates,a.form.controls.usar_expediente_unidade||(l.expediente=null),o(l)});return function(o,d){return t.apply(this,arguments)}}())}onInformalChange(i){this.informal=this.form.controls.informal.value,this.form.controls.codigo.setValue(""),this.form.controls.instituidora.setValue(!1),this.form.controls.codigo.updateValueAndValidity()}onUsarExpedienteEntidadeChange(){this.form.controls.expediente.setValue(this.form.controls.usar_expediente_unidade.value?this.form.controls.expediente.value||new J.U:null)}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-unidade-form"]],viewQuery:function(a,t){if(1&a&&(e.GBs(I.Q,5),e.GBs(ie,5),e.GBs(ae,5),e.GBs(ne,5),e.GBs(oe,5),e.GBs(se,5),e.GBs(de,5),e.GBs(le,5)),2&a){let o;e.mGM(o=e.lsd())&&(t.editableForm=o.first),e.mGM(o=e.lsd())&&(t.unidadePai=o.first),e.mGM(o=e.lsd())&&(t.cidade=o.first),e.mGM(o=e.lsd())&&(t.gestor=o.first),e.mGM(o=e.lsd())&&(t.gestorSubstituto=o.first),e.mGM(o=e.lsd())&&(t.gestorDelegado=o.first),e.mGM(o=e.lsd())&&(t.entidade=o.first),e.mGM(o=e.lsd())&&(t.notificacoes=o.first)}},features:[e.Vt3],decls:32,vars:44,consts:[["cidade",""],["unidade_pai",""],["entidade",""],["usarExpedienteEntidade",""],["expediente",""],["notificacoes",""],["initialFocus","sigla",3,"submit","cancel","title","form","disabled"],["display","","right",""],["key","PRINCIPAL","label","Principal"],[1,"row"],["label","Instit.","labelClass","text-nowrap","controlName","instituidora",3,"disabled","size","labelInfo"],["label","C\xf3digo","controlName","codigo",3,"disabled","size"],["label","Sigla","controlName","sigla","required","",3,"disabled","size"],["label","Nome","controlName","nome","required","",3,"disabled","size"],["controlName","cidade_id","required","",3,"disabled","size","dao"],["controlName","unidade_pai_id",3,"disabled","size","label","where","dao"],["disabled","","controlName","entidade_id","required","",3,"size","dao"],["key","CONFIGURACOES","label","Configura\xe7\xf5es"],["clss","row"],["label","Etiquetas","multiselectStyle","inline","controlName","etiquetas",3,"maxItemWidth","size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xcdcone","controlName","etiqueta_icone",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["controlName","texto_complementar_plano",3,"label","dataset"],["key","EXPEDIENTE","label","Expediente"],["label","Usar calend\xe1rio pr\xf3prio","labelPosition","right","icon","bi bi-check2","controlName","usar_expediente_unidade",3,"change","size","labelInfo"],[3,"disabled","expedienteDisabled","control"],["key","NOTIFICACOES","label","Notifica\xe7\xf5es",4,"ngIf"],["key","NOTIFICACOES","label","Notifica\xe7\xf5es"],[3,"unidadeId","entity","disabled"]],template:function(a,t){if(1&a){const o=e.RV6();e.j41(0,"editable-form",6),e.bIt("submit",function(){return e.eBV(o),e.Njj(t.onSaveData())})("cancel",function(){return e.eBV(o),e.Njj(t.onCancel())}),e.j41(1,"tabs",7)(2,"tab",8)(3,"div",9),e.nrm(4,"input-switch",10)(5,"input-text",11)(6,"input-text",12)(7,"input-text",13),e.k0s(),e.j41(8,"div",9),e.nrm(9,"input-search",14,0)(11,"input-search",15,1)(13,"input-search",16,2),e.k0s()(),e.j41(15,"tab",17),e.nrm(16,"separator"),e.j41(17,"div",18)(18,"input-multiselect",19),e.nrm(19,"input-text",20)(20,"input-select",21)(21,"input-color",22),e.k0s()(),e.nrm(22,"separator"),e.j41(23,"div",9),e.nrm(24,"input-editor",23),e.k0s()(),e.j41(25,"tab",24)(26,"div",9)(27,"input-switch",25,3),e.bIt("change",function(){return e.eBV(o),e.Njj(t.onUsarExpedienteEntidadeChange())}),e.k0s()(),e.nrm(29,"calendar-expediente",26,4),e.k0s(),e.DNE(31,me,3,3,"tab",27),e.k0s()()}2&a&&(e.Y8G("title",t.isModal?"":t.title)("form",t.form)("disabled",t.formDisabled),e.R7$(4),e.Y8G("disabled",t.instituidoraIsDisabled)("size",1)("labelInfo","Se a "+t.lex.translate("unidade")+" \xe9 instituidora de Programas. Unidade administrativa prevista no art. 4\xba do Decreto n\xba 11.072, de 2022."),e.R7$(),e.Y8G("disabled",t.codigoIsDisabled)("size",2),e.R7$(),e.Y8G("disabled",t.isDisabled)("size",2),e.R7$(),e.Y8G("disabled",t.isDisabled)("size",6),e.R7$(2),e.Y8G("disabled",t.isDisabled)("size",4)("dao",t.cidadeDao),e.R7$(2),e.Y8G("disabled",t.unidadePaiIsDisabled)("size",4)("label",t.lex.translate("Unidade")+" pai")("where",e.eq3(42,ue,e.eq3(40,re,t.form.controls.entidade_id.value)))("dao",t.dao),e.R7$(2),e.Y8G("size",4)("dao",t.entidadeDao),e.R7$(5),e.Y8G("maxItemWidth",250)("size",12)("addItemHandle",t.addItemHandle.bind(t)),e.R7$(),e.Y8G("size",6),e.BMQ("maxlength",250),e.R7$(),e.Y8G("size",3)("items",t.lookup.ICONES),e.R7$(),e.Y8G("size",3),e.R7$(3),e.Y8G("label","Texto complementar "+t.lex.translate("Plano de Trabalho"))("dataset",t.planoDataset),e.R7$(3),e.FCK("labelInfo","Se o expediente da ",t.lex.translate("unidade")," n\xe3o for definido usaremos o da ",t.lex.translate("entidade"),""),e.Y8G("size",12),e.R7$(2),e.Y8G("disabled",t.form.controls.usar_expediente_unidade.value?void 0:"true")("expedienteDisabled",null==t.entity||null==t.entity.entidade?null:t.entity.entidade.expediente)("control",t.form.controls.expediente),e.R7$(2),e.Y8G("ngIf",t.entity))},dependencies:[b.bT,I.Q,G.S,y.O,M.H,F.K,Z.f,P.b,U.O,z.j,K.F,q.p,ee.d,te.d]})}}return n})();var v=s(5611),D=s(9062),C=s(2034),R=s(5852),ce=s(7772),j=s(2305),fe=s(6764),Y=s(5201);const pe=["instituidora"];function ge(n,r){if(1&n&&(e.j41(0,"h3",19),e.EFF(1),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.JRh(i.title)}}function he(n,r){if(1&n&&e.nrm(0,"toolbar",20),2&n){const i=e.XpG();e.Y8G("buttons",i.buttons)}}function _e(n,r){if(1&n&&(e.j41(0,"span",23),e.nrm(1,"i",24),e.EFF(2),e.k0s()),2&n){const i=e.XpG().row;e.R7$(2),e.SpI(" ",i.unidade.sigla," ")}}function be(n,r){if(1&n&&(e.j41(0,"span",21),e.EFF(1),e.k0s(),e.DNE(2,_e,3,1,"span",22)),2&n){const i=r.row;e.R7$(),e.JRh(i.nome),e.R7$(),e.Y8G("ngIf",i.unidade)}}function ve(n,r){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const i=r.row;e.R7$(),e.JRh(((null==i.cidade?null:i.cidade.nome)||"")+"/"+((null==i.cidade?null:i.cidade.uf)||""))}}function Ie(n,r){1&n&&e.nrm(0,"badge",28)}function Ge(n,r){if(1&n&&(e.j41(0,"div",25),e.DNE(1,Ie,1,0,"badge",26),e.nrm(2,"badge",27),e.k0s()),2&n){const i=r.row;e.R7$(),e.Y8G("ngIf",i.instituidora),e.R7$(),e.Y8G("color",i.data_inativacao?"danger":"success")("icon",i.data_inativacao?"bi bi-x-circle":"bi bi-check-circle")("label",i.data_inativacao?"Inativo":"Ativo")}}let ye=(()=>{class n extends D.P{constructor(i){super(i,_.h,h.s),this.injector=i,this.selectable=!1,this.buttons=[],this.filterWhere=a=>{let t=a.value,o=[];return o.push(this.selectable?["data_inativacao",t.inativos?"!=":"==",null]:["inativos","==",t.inativos]),t.entidade_id?.length&&o.push(["entidade_id","==",t.entidade_id]),t.nome?.length&&o.push(["or",["nome","like","%"+t.nome.trim().replace(" ","%")+"%"],["sigla","like","%"+t.nome.trim().replace(" ","%")+"%"]]),t.instituidora&&o.push(["instituidora","==",1]),o},this.join=["cidade","unidade_pai:id,sigla","entidade:id,sigla","gestor.usuario:id","gestores_substitutos.usuario:id"],this.cidadeDao=i.get(N.a),this.entidadeDao=i.get(O.M),this.code="MOD_CFG_UND",this.filter=this.fh.FormBuilder({entidade_id:{default:this.auth.unidade?.entidade_id},inativos:{default:!1},instituidora:{default:!1},nome:{default:""}}),this.groupBy=[{field:"entidade.sigla",label:"Entidade"}],this.auth.hasPermissionTo("MOD_UND_UNIR")&&this.buttons.push({icon:"bi bi-arrows-collapse",color:"btn-outline-danger",label:"Unificar",onClick:a=>this.go.navigate({route:["logs","unidade","merge"]},this.modalRefresh())}),this.rowsLimit=10,this.addOption(this.OPTION_INFORMACOES,"MOD_UND"),this.addOption(this.OPTION_EXCLUIR,"MOD_UND_EXCL"),this.addOption(this.OPTION_LOGS)}dynamicOptions(i){var a=this;let t=[],o=i;return this.auth.hasPermissionTo("MOD_UND_INATV")&&t.push({icon:o.data_inativacao?"bi bi-check-circle":"bi bi-x-circle",label:o.data_inativacao?"Reativar":"Inativar",onClick:(d=(0,f.A)(function*(l){return yield a.inativo(l,!l.data_inativacao)}),function(u){return d.apply(this,arguments)})}),this.auth.hasPermissionTo("MOD_UND_INTG")&&t.push({label:"Integrantes",icon:"bi bi-people",onClick:d=>this.go.navigate({route:["configuracoes","unidade","",d.id,"integrante"]},{metadata:{unidade:i}})}),t;var d}inativo(i,a){var t=this;return(0,f.A)(function*(){if(yield t.dialog.confirm(a?"Inativar":"Reativar",a?"Deseja realmente inativar essa unidade ("+i.nome+")?":"Deseja reativar essa unidade ("+i.nome+")?"))try{t.submitting=!0,yield t.dao.inativar(i.id,a),yield t.modalRefreshId(i).modalClose(void 0)}finally{t.submitting=!1}})()}filterClear(i){super.filterClear(i)}get labelInfoInativas(){return this.selectable?"Se lista s\xf3 as unidades inativas":"Se lista tamb\xe9m as unidades inativas"}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["unidade-list-grid"]],viewQuery:function(a,t){if(1&a&&(e.GBs(v._,5),e.GBs(pe,5)),2&a){let o;e.mGM(o=e.lsd())&&(t.grid=o.first),e.mGM(o=e.lsd())&&(t.instituidora=o.first)}},inputs:{selectable:"selectable",snapshot:"snapshot"},features:[e.Vt3],decls:23,vars:34,consts:[["instituidora",""],["columnNome",""],["columnCidade",""],["columnSituacao",""],["class","my-2",4,"ngIf"],[3,"select","dao","add","orderBy","groupBy","join","selectable","hasAdd","hasEdit"],[3,"buttons",4,"ngIf"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["label","Nome","controlName","nome","placeholder","Nome ou sigla...",3,"size","control"],["label","Instit.","labelClass","text-nowrap","controlName","instituidora",3,"size","control","labelInfo"],["label","Inativos","controlName","inativos",3,"size","control","labelInfo"],["title","Sigla","field","sigla"],["title","Nome","orderBy","nome",3,"template"],["title","C\xf3digo","field","codigo"],[3,"title","template"],["title","Situa\xe7\xe3o",3,"template"],["type","options",3,"onEdit","options","dynamicOptions"],[3,"rows"],[1,"my-2"],[3,"buttons"],[1,"d-block"],["class","badge bg-light text-dark",4,"ngIf"],[1,"badge","bg-light","text-dark"],[1,"bi","bi-arrow-return-right"],[1,"one-per-line"],["color","primary","icon","bi bi-star","label","Instituidora",4,"ngIf"],[3,"color","icon","label"],["color","primary","icon","bi bi-star","label","Instituidora"]],template:function(a,t){if(1&a){const o=e.RV6();e.DNE(0,ge,2,1,"h3",4),e.j41(1,"grid",5),e.bIt("select",function(l){return e.eBV(o),e.Njj(t.onSelect(l))}),e.DNE(2,he,1,1,"toolbar",6),e.j41(3,"filter",7)(4,"div",8),e.nrm(5,"input-text",9)(6,"input-switch",10,0)(8,"input-switch",11),e.k0s()(),e.j41(9,"columns"),e.nrm(10,"column",12),e.j41(11,"column",13),e.DNE(12,be,3,2,"ng-template",null,1,e.C5r),e.k0s(),e.nrm(14,"column",14),e.j41(15,"column",15),e.DNE(16,ve,2,1,"ng-template",null,2,e.C5r),e.k0s(),e.j41(18,"column",16),e.DNE(19,Ge,3,4,"ng-template",null,3,e.C5r),e.k0s(),e.nrm(21,"column",17),e.k0s(),e.nrm(22,"pagination",18),e.k0s()}if(2&a){const o=e.sdS(13),d=e.sdS(17),l=e.sdS(20);e.Y8G("ngIf",t.isModal),e.R7$(),e.Y8G("dao",t.dao)("add",t.add)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join)("selectable",t.selectable)("hasAdd",!1)("hasEdit",t.auth.hasPermissionTo("MOD_UND_EDT")),e.R7$(),e.Y8G("ngIf",!t.selectable),e.R7$(),e.Y8G("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",!t.selectable&&t.filterCollapsed),e.R7$(2),e.Y8G("size",10)("control",t.filter.controls.nome),e.BMQ("maxlength",250),e.R7$(),e.Y8G("size",1)("control",t.filter.controls.instituidora)("labelInfo","Se lista SOMENTE as "+t.lex.translate("unidades")+" instituidoras de "+t.lex.translate("programas")),e.R7$(2),e.Y8G("size",1)("control",t.filter.controls.inativos)("labelInfo",t.labelInfoInativas),e.R7$(3),e.Y8G("template",o),e.R7$(4),e.Y8G("title",t.lex.translate("Cidade"))("template",d),e.R7$(3),e.Y8G("template",l),e.R7$(3),e.Y8G("onEdit",t.edit)("options",t.options)("dynamicOptions",t.dynamicOptions.bind(t)),e.R7$(),e.Y8G("rows",t.rowsLimit)}},dependencies:[b.bT,v._,C.T,R.I,ce.i,j.H,fe.e,G.S,M.H,Y.n]})}}return n})();var $=s(4401),Ue=s(7438),k=s(166);function Ee(n,r){if(1&n&&(e.j41(0,"div",4),e.EFF(1),e.k0s()),2&n){const i=r.$implicit;e.R7$(),e.JRh(i.label)}}let De=(()=>{class n extends D.P{constructor(i){super(i,_.h,h.s),this.injector=i,this.data=[],this.dao=i.get(h.s)}ngAfterViewInit(){super.ngAfterViewInit(),this.carregaUnidades()}carregaUnidades(){var i=this;return(0,f.A)(function*(){let a=i.auth.usuario?.lotacao?.unidade_id,t=yield i.dao.hierarquiaUnidades(a),o=[],d=a;for(;d;){let m=t.find(c=>c.id===d);if(!m)break;o.unshift(d),d=m.unidade_pai_id||void 0}let l=m=>t.filter(c=>c.unidade_pai_id===m).map(c=>({type:"unidade",label:c.sigla,expanded:a!==c.id&&o.includes(c.id),styleClass:a==c.id?"text-bg-primary":"",data:{hint:c.nome,unidade:c},children:u(c.id)?l(c.id):[{type:"fake",expanded:!1,label:"Carregando..."}]})),u=m=>t.some(c=>c.unidade_pai_id===m);i.data=l(null)})()}expandeUnidade(i){this.carregaFilhas(i.node.data.unidade.id,i.node)}carregaFilhas(i,a){var t=this;return(0,f.A)(function*(){let o=yield t.dao.unidadesFilhas(i);a.children=o.map(d=>({type:"unidade",label:d.sigla,expanded:!1,data:{unidade:d,hint:d.nome},children:[{type:"fake",expanded:!1,label:"Carregando..."}]}))})()}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["unidade-mapa"]],features:[e.Vt3],decls:4,vars:1,consts:[["autoHeightDisabled","false","track","all"],[1,"my-3"],[3,"onNodeExpand","value"],["pTemplate","unidade"],[1,"font-bold"]],template:function(a,t){1&a&&(e.j41(0,"ng-scrollbar",0)(1,"div",1)(2,"p-organizationChart",2),e.bIt("onNodeExpand",function(d){return t.expandeUnidade(d)}),e.DNE(3,Ee,2,1,"ng-template",3),e.k0s()()()),2&a&&(e.R7$(2),e.Y8G("value",t.data))},dependencies:[$.a3,Ue.Ei,k.Yh]})}}return n})();function Ce(n,r){if(1&n&&e.nrm(0,"unidade-list-grid",5),2&n){const i=e.XpG();e.Y8G("selectable",i.selectable)("snapshot",i.snapshot||i.modalRoute||i.route.snapshot)}}function Re(n,r){1&n&&e.nrm(0,"unidade-mapa")}function Te(n,r){if(1&n&&(e.j41(0,"tab",6),e.DNE(1,Re,1,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const i=e.sdS(2);e.Y8G("template",i)}}let B=(()=>{class n extends D.P{constructor(i){super(i,_.h,h.s),this.injector=i,this.filterWhere=a=>[],this.title=this.lex.translate("Unidades"),this.code="MOD_CFG_UND",this.filter=this.fh.FormBuilder({})}ngAfterViewInit(){super.ngAfterViewInit(),this.tabs.active=["TABELA","MAPA"].includes(this.usuarioConfig.active_tab)?this.usuarioConfig.active_tab:"TABELA"}onSelectTab(i){var a=this;return(0,f.A)(function*(){a.viewInit&&a.saveUsuarioConfig({active_tab:i.key})})()}filterClear(i){i.controls.nome.setValue(""),super.filterClear(i)}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-unidade-list"]],viewQuery:function(a,t){if(1&a&&(e.GBs(v._,5),e.GBs(U.O,5)),2&a){let o;e.mGM(o=e.lsd())&&(t.grid=o.first),e.mGM(o=e.lsd())&&(t.tabs=o.first)}},features:[e.Vt3],decls:5,vars:4,consts:[["grid",""],["mapa",""],["right","",3,"title","select"],["key","TABELA","icon","bi bi-table","label","Lista",3,"template"],["key","MAPA","icon","bi bi-card-heading","label","Mapa",3,"template",4,"ngIf"],[3,"selectable","snapshot"],["key","MAPA","icon","bi bi-card-heading","label","Mapa",3,"template"]],template:function(a,t){if(1&a&&(e.j41(0,"tabs",2)(1,"tab",3),e.DNE(2,Ce,1,2,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(4,Te,3,1,"tab",4),e.k0s()),2&a){const o=e.sdS(3);e.Y8G("title",t.isModal?"":t.title)("select",t.onSelectTab.bind(t)),e.R7$(),e.Y8G("template",o),e.R7$(3),e.Y8G("ngIf",!t.selectable)}},dependencies:[b.bT,U.O,z.j,ye,De]})}}return n})();var L=s(4795),Ae=s(9209);const Ne=["unidadeOrigem"],Oe=["unidadeDestino"],Se=()=>["inativo","!=",null],V=n=>[n],H=()=>["configuracoes","unidade"],Me=()=>({inativos:!0}),X=n=>({filter:n}),w=(n,r)=>({route:n,params:r}),Fe=()=>["inativo","==",null],Pe=()=>({inativos:!1});function ze(n,r){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s(),e.nrm(2,"br"),e.j41(3,"small"),e.EFF(4),e.k0s()),2&n){const i=r.row;e.R7$(),e.JRh((null==i.unidade_origem?null:i.unidade_origem.nome)||""),e.R7$(3),e.Lme("",(null==i.unidade_origem?null:i.unidade_origem.codigo)||""," - ",(null==i.unidade_origem?null:i.unidade_origem.sigla)||"","")}}function je(n,r){if(1&n&&e.nrm(0,"input-search",14,4),2&n){const i=e.XpG();e.Y8G("size",12)("dao",i.dao)("where",e.eq3(5,V,e.lJ4(4,Se)))("selectRoute",e.l_i(11,w,e.lJ4(7,H),e.eq3(9,X,e.lJ4(8,Me))))}}function Ye(n,r){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s(),e.nrm(2,"br"),e.j41(3,"small"),e.EFF(4),e.k0s()),2&n){const i=r.row;e.R7$(),e.JRh((null==i.unidade_destino?null:i.unidade_destino.nome)||""),e.R7$(3),e.Lme("",(null==i.unidade_destino?null:i.unidade_destino.codigo)||""," - ",(null==i.unidade_destino?null:i.unidade_destino.sigla)||"","")}}function $e(n,r){if(1&n&&e.nrm(0,"input-search",15,5),2&n){const i=e.XpG();e.Y8G("size",12)("dao",i.dao)("where",e.eq3(5,V,e.lJ4(4,Fe)))("selectRoute",e.l_i(11,w,e.lJ4(7,H),e.eq3(9,X,e.lJ4(8,Pe))))}}let ke=(()=>{class n extends L.g{constructor(i){super(i),this.injector=i,this.items=[],this.toolbarButtons=[{icon:"bi bi-yin-yang",label:"Mesma sigla",hint:"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.",onClick:this.onMesmaSiglaClick.bind(this)}],this.validate=(a,t)=>null,this.dao=i.get(h.s),this.form=this.fh.FormBuilder({exclui_origem:{default:!1},origem_inativo:{default:!0},unidade_origem_id:{default:""},unidade_destino_id:{default:""}},this.cdRef,this.validate)}onMesmaSiglaClick(){this.loading=!0,this.dao.mesmaSigla().then(i=>{let a=[];a=i.reduce((u,m)=>(!m.data_inativacao&&!u.find(c=>c.sigla==m.sigla)&&u.push(m),u),a);let t=a.map(u=>u.id),o=i.filter(u=>!t.includes(u.id)&&!!u.data_inativacao),d=o.map(u=>u.id);this.items=[];for(let u of o){let m=a.find(c=>c.sigla==u.sigla);m&&this.items.push({id:this.dao.generateUuid(),unidade_origem_id:u.id,unidade_destino_id:m.id,unidade_origem:u,unidade_destino:m})}let l=[];for(let u of i)!t.includes(u.id)&&!d.includes(u.id)&&l.push(u.codigo+" - "+u.sigla+" - "+u.nome);l.length&&(this.editableForm.error=(1==l.length?"A unidade abaixo possui duplicidade de SIGLA, mas n\xe3o est\xe1 inativa:":"As unidades abaixo possuem duplicidade de SIGLA, mas n\xe3o est\xe3o inativas:")+"\n"+l.join("\n"))}).finally(()=>{this.loading=!1})}addMerge(){var i=this;return(0,f.A)(function*(){return{id:i.dao.generateUuid(),unidade_origem_id:"",unidade_destino_id:"",unidade_origem:void 0,unidade_destino:void 0}})()}loadMerge(i,a){return(0,f.A)(function*(){i.controls.unidade_origem_id.setValue(a.unidade_origem_id),i.controls.unidade_destino_id.setValue(a.unidade_destino_id)})()}removeMerge(i){return(0,f.A)(function*(){return!0})()}saveMerge(i,a){var t=this;return(0,f.A)(function*(){let o;return(t.form.controls.unidade_origem_id.value?.length||t.form.controls.unidade_destino_id.value?.length)&&(a.unidade_origem_id=i.controls.unidade_origem_id.value,a.unidade_origem=t.unidadeOrigem?.selectedEntity||(yield t.dao?.getById(a.unidade_origem_id)),a.unidade_destino_id=i.controls.unidade_destino_id.value,a.unidade_destino=t.unidadeDestino?.selectedEntity||(yield t.dao?.getById(a.unidade_destino_id)),o=a),o})()}onMerge(){let i;for(let a of this.items)i=i||(a.unidade_origem_id?.length&&a.unidade_destino_id?.length?void 0:"A origem e o destino precisam estar preenchidos em todos");this.editableForm.error=i,i?.length||(this.loading=!0,this.dao.unificar(this.items.map(a=>Object.assign({},{unidade_origem_id:a.unidade_origem_id,unidade_destino_id:a.unidade_destino_id})),this.form.controls.exclui_origem.value).then(a=>{a&&this.close()}).finally(()=>{this.loading=!1}))}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-unidade-merge"]],viewQuery:function(a,t){if(1&a&&(e.GBs(I.Q,5),e.GBs(Ne,5),e.GBs(Oe,5)),2&a){let o;e.mGM(o=e.lsd())&&(t.editableForm=o.first),e.mGM(o=e.lsd())&&(t.unidadeOrigem=o.first),e.mGM(o=e.lsd())&&(t.unidadeDestino=o.first)}},features:[e.Vt3],decls:17,vars:16,consts:[["columnUnidadeOrigem",""],["editUnidadeOrigem",""],["columnUnidadeDestino",""],["editUnidadeDestino",""],["unidade_origem",""],["unidade_destino",""],["confirmLabel","Unificar",3,"submit","cancel","form","title"],["type","warning","message","Por motivos de seguran\xe7a ser\xe1 permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] n\xe3o esteja habilitado, a unidade de origem continuar\xe1 na lista (como inativa)."],[3,"buttons"],["labelPosition","left","label","Exclui origem","controlName","exclui_origem",3,"size"],["editable","",3,"items","form","add","load","remove","save"],["titleHint","Unidade que ser\xe1 substitu\xedda pela outra",3,"title","template","editTemplate"],["titleHint","Unidade que sobrar\xe1 ap\xf3s a unifica\xe7\xe3o",3,"title","template","editTemplate"],["type","options"],["label","","icon","","controlName","unidade_origem_id",3,"size","dao","where","selectRoute"],["label","","icon","","controlName","unidade_destino_id",3,"size","dao","where","selectRoute"]],template:function(a,t){if(1&a){const o=e.RV6();e.j41(0,"editable-form",6),e.bIt("submit",function(){return e.eBV(o),e.Njj(t.onMerge())})("cancel",function(){return e.eBV(o),e.Njj(t.onCancel())}),e.nrm(1,"top-alert",7),e.j41(2,"toolbar",8),e.nrm(3,"input-switch",9),e.k0s(),e.j41(4,"grid",10)(5,"columns")(6,"column",11),e.DNE(7,ze,5,3,"ng-template",null,0,e.C5r)(9,je,2,14,"ng-template",null,1,e.C5r),e.k0s(),e.j41(11,"column",12),e.DNE(12,Ye,5,3,"ng-template",null,2,e.C5r)(14,$e,2,14,"ng-template",null,3,e.C5r),e.k0s(),e.nrm(16,"column",13),e.k0s()()()}if(2&a){const o=e.sdS(8),d=e.sdS(10),l=e.sdS(13),u=e.sdS(15);e.Y8G("form",t.form)("title",t.isModal?"":t.title),e.R7$(2),e.Y8G("buttons",t.toolbarButtons),e.R7$(),e.Y8G("size",4),e.R7$(),e.Y8G("items",t.items)("form",t.form)("add",t.addMerge.bind(t))("load",t.loadMerge.bind(t))("remove",t.removeMerge.bind(t))("save",t.saveMerge.bind(t)),e.R7$(2),e.Y8G("title",t.lex.translate("Unidade")+" origem")("template",o)("editTemplate",d),e.R7$(5),e.Y8G("title",t.lex.translate("Unidade")+" destino")("template",l)("editTemplate",u)}},dependencies:[v._,C.T,R.I,j.H,I.Q,G.S,y.O,Ae.P]})}}return n})();var Be=s(4489),Le=s(5723),Ve=s(9419),He=s(5825);const Xe=["usuario"],we=n=>["nivel",">=",n],Qe=n=>[n];function Je(n,r){if(1&n&&(e.j41(0,"span")(1,"strong"),e.EFF(2),e.k0s()()),2&n){const i=e.XpG();e.R7$(2),e.JRh("Unidade: "+((null==i.entity?null:i.entity.nome)||""))}}function xe(n,r){if(1&n&&(e.j41(0,"div",12)(1,"div",13),e.nrm(2,"profile-picture",14),e.k0s(),e.j41(3,"div",15)(4,"strong"),e.EFF(5),e.k0s(),e.nrm(6,"br"),e.j41(7,"small"),e.EFF(8),e.k0s()()()),2&n){const i=r.row;e.R7$(2),e.Y8G("url",i.usuario_url_foto||"")("size",40)("hint",i.usuario_nome||""),e.R7$(3),e.JRh(i.usuario_nome||""),e.R7$(3),e.JRh(i.usuario_apelido||"")}}function We(n,r){if(1&n&&e.nrm(0,"input-search",16,7),2&n){const i=e.XpG(),a=e.sdS(1);e.Y8G("disabled",null!=a&&a.adding?void 0:"true")("size",12)("dao",i.usuarioDao)}}function Ze(n,r){if(1&n&&(e.j41(0,"div"),e.nrm(1,"badge",18)(2,"br"),e.k0s()),2&n){const i=r.$implicit,a=e.XpG(2);e.R7$(),e.Y8G("color",a.lookup.getColor(a.lookup.UNIDADE_INTEGRANTE_TIPO,i||""))("icon",a.lookup.getIcon(a.lookup.UNIDADE_INTEGRANTE_TIPO,i||""))("label",a.lookup.getValue(a.lookup.UNIDADE_INTEGRANTE_TIPO,i||""))}}function Ke(n,r){1&n&&e.DNE(0,Ze,3,3,"div",17),2&n&&e.Y8G("ngForOf",r.row.atribuicoes)}function qe(n,r){if(1&n&&(e.j41(0,"input-multiselect",19),e.nrm(1,"input-select",20),e.k0s()),2&n){const i=e.XpG();e.Y8G("size",8)("addItemHandle",i.addItemHandle.bind(i))("deleteItemHandle",i.deleteItemHandle.bind(i)),e.R7$(),e.Y8G("size",12)("items",i.tiposAtribuicao)}}function et(n,r){if(1&n&&e.nrm(0,"badge",21)(1,"br"),2&n){const i=r.row,a=e.XpG();e.Y8G("label",a.getPerfil(i.id)||"")}}function tt(n,r){if(1&n&&e.nrm(0,"input-select",22),2&n){const i=r.row,a=e.XpG();e.Y8G("size",12)("label",a.lex.translate("Perfil"))("dao",a.perfilDao)("where",e.eq3(6,Qe,e.eq3(4,we,null!=i&&i.usuario_externo?6:0)))}}const at=[{path:"",component:B,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Unidades"}},{path:"new",component:E,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Unidade",modal:!0}},{path:":id/edit",component:E,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Unidade",modal:!0}},{path:":id/consult",component:E,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Consulta a Unidade",modal:!0}},{path:":id/:idUnidade/integrante",component:(()=>{class n extends L.g{set control(i){super.control=i}get control(){return super.control}set entity(i){super.entity=i}get entity(){return super.entity}set noPersist(i){super.noPersist=i}get noPersist(){return super.noPersist}constructor(i){super(i),this.injector=i,this.items=[],this.perfis=[],this.tiposAtribuicao=[],this.validate=(a,t)=>{let o=null;return["usuario_id","atribuicoes"].includes(t)&&!a.value?.length&&(o="Obrigat\xf3rio"),"usuario_id"==t&&this.grid?.adding&&this.items.map(d=>d.id).includes(a.value)&&(o="O usu\xe1rio j\xe1 \xe9 integrante desta unidade. Edite-o, ao inv\xe9s de inclu\xed-lo novamente!"),o},this.formValidation=a=>{if(this.util.array_diff(["GESTOR","GESTOR_SUBSTITUTO","GESTOR_DELEGADO"],a.controls.atribuicoes.value.map(o=>o.key)||[]).length<2)return"A um mesmo servidor s\xf3 pode ser atribu\xedda uma fun\xe7\xe3o de gestor (titular, substituto ou delegado), para uma mesma Unidade!"},this.integranteService=i.get(Le.H),this.integranteDao=i.get(Be.f),this.usuarioDao=i.get(S._),this.unidadeDao=i.get(h.s),this.perfilDao=i.get(Ve.e),this.form=this.fh.FormBuilder({usuario_id:{default:""},atribuicoes:{default:void 0},atribuicao:{default:""},perfil_id:{default:null}},this.cdRef,this.validate)}ngOnInit(){super.ngOnInit(),this.entity=this.metadata?.unidade,this.entity&&(this.tiposAtribuicao=this.entity?.instituidora?this.lookup.UNIDADE_INTEGRANTE_TIPO:this.lookup.UNIDADE_INTEGRANTE_TIPO.filter(i=>"CURADOR"!==i.key),this.tiposAtribuicao=this.lookup.ordenarLookupItem(this.tiposAtribuicao))}ngAfterViewInit(){var i=this;(0,f.A)(function*(){yield i.loadData(i.entity,i.form)})()}loadData(i,a){var t=this;return(0,f.A)(function*(){if(i.id){let o=[],d=[];t.loading=!0;try{yield t.integranteDao.carregarIntegrantes(i.id,"").then(l=>o=l.integrantes.filter(u=>u.atribuicoes?.length>0)),o.forEach(l=>d.push(l.id)),t.perfis=yield t.usuarioDao.query({where:[["id","in",d]]}).asPromise()}finally{t.loading=!1,t.items=[],o.forEach(l=>t.items?.push(t.integranteService.completarIntegrante(l,i.id,l.id,l.atribuicoes))),t.items=t.integranteService.ordenarIntegrantes(t.items),t.cdRef.detectChanges(),t.grid.loading=!1}}})()}getPerfil(i){return this.perfis.find(t=>t.id==i)?.perfil?.nome}addItemHandle(){let i;const a=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value),t=this.form.controls.atribuicao.value;return a?.length&&this.util.validateLookupItem(this.form.controls.atribuicoes.value,t)&&(i={key:t,value:a,icon:this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value),color:this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value)},this.form.controls.atribuicao.setValue("")),i}deleteItemHandle(i){return this.integranteService.ehPermitidoApagar(i.key)}carregarIntegrante(i,a){var t=this;return(0,f.A)(function*(){let o=t.perfis.find(d=>d.id==a.id);i.controls.usuario_id.setValue(t.grid?.adding?a.usuario_id:a.id),i.controls.perfil_id.setValue(o?.perfil_id),o?.usuario_externo&&(t.tiposAtribuicao=t.tiposAtribuicao.filter(d=>"GESTOR_SUBSTITUTO"!=d.key)),i.controls.atribuicoes.setValue(t.integranteService.converterAtribuicoes(a.atribuicoes)),i.controls.atribuicao.setValue("")})()}adicionarIntegrante(){var i=this;return(0,f.A)(function*(){return i.grid&&(i.grid.error=""),{id:i.integranteDao.generateUuid(),usuario_id:"",atribuicoes:[]}})()}removerIntegrante(i){var a=this;return(0,f.A)(function*(){if(i.atribuicoes[0].includes("LOTADO"))yield a.dialog.alert("IMPOSS\xcdVEL EXCLUIR !","O v\xednculo que inclui "+a.lex.translate("a lota\xe7\xe3o")+" "+a.lex.translate("do servidor")+" n\xe3o pode ser exclu\xeddo. Se desejar excluir as demais atribui\xe7\xf5es, edite o v\xednculo. Se deseja alterar "+a.lex.translate("a lota\xe7\xe3o")+", lote-o em outra "+a.lex.translate("Unidade")+".");else if(yield a.dialog.confirm("Exclui ?","Deseja realmente excluir todas as atribui\xe7\xf5es "+a.lex.translate("do servidor")+i.usuario_nome?.toUpperCase()+" "+a.lex.translate("na unidade")+" "+a.entity.sigla.toUpperCase()+" ?")){let o;try{if(a.isNoPersist)return Object.assign(i,{_status:"DELETE",atribuicoes:[]}),!1;a.loading=!0,yield a.integranteDao.salvarIntegrantes([a.integranteService.completarIntegrante(i,a.entity.id,i.id,[])]).then(d=>{(o=d.find(l=>l._metadata.msg?.length)?._metadata.msg)&&a.grid&&(a.grid.error=o)}),yield a.loadData({id:a.entity.id},a.form)}finally{a.loading=!1}}return!1})()}salvarIntegrante(i,a){var t=this;return(0,f.A)(function*(){let o=t.lookup.uniqueLookupItem(i.controls.atribuicoes.value);i.controls.atribuicoes.setValue(o),t.grid&&(t.grid.error=""),t.cdRef.detectChanges();let d=t.formValidation(i);if(d)yield t.dialog.alert("Imposs\xedvel incluir/alterar o servidor!",d);else{let l=!0,u=t.integranteService.haAlteracaoGerencia(o.map(m=>m.key),Object.assign(a,{usuario_nome:t.usuario?.selectedItem?.entity.nome}),t.grid?.items||[],t.entity?.sigla||"");if("nenhuma"!=u[0]){if(l=yield t.dialog.confirm("CONFIRMA A ALTERA\xc7\xc3O DA CHEFIA ?",u[2]),!l)return;"troca"===u[0]&&(t.grid.items[u[1]].atribuicoes=t.grid.items[u[1]].atribuicoes.filter(m=>!["GESTOR"].includes(m))),o=t.integranteService.inserirAtribuicao(o,"LOTADO"),i.controls.atribuicoes.setValue(o),t.loading=!0}try{t.isNoPersist?(a.id=t.usuario?.selectedEntity.id,t.grid.items=t.integranteService.substituirItem({id:a.id,itens:t.grid?.items||[],apelidoOuSigla:t.usuario?.selectedItem?.entity.apelido,nome:t.usuario?.selectedItem?.entity.nome,codigo:""},o.map(m=>m.key),new _.h(t.entity))):(yield t.integranteDao.salvarIntegrantes([Object.assign({_metadata:{perfil_id:i.controls.perfil_id.value}},t.integranteService.completarIntegrante(a,t.entity.id,i.controls.usuario_id.value,o.map(m=>m.key)))]).then(m=>{let c;(c=m?.find(rt=>rt._metadata.msg?.length)?._metadata.msg)&&t.dialog.alert("ATEN\xc7\xc3O: ERRO!",c)}),yield t.loadData({id:t.entity.id},t.form),t.grid&&(t.grid.error="")),t.cdRef.detectChanges()}catch(m){t.grid&&(t.grid.error=m),yield t.loadData({id:t.entity.id},t.form)}finally{t.loading=!1}}})()}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["unidade-integrante"]],viewQuery:function(a,t){if(1&a&&(e.GBs(v._,5),e.GBs(Xe,5)),2&a){let o;e.mGM(o=e.lsd())&&(t.grid=o.first),e.mGM(o=e.lsd())&&(t.usuario=o.first)}},inputs:{control:"control",entity:"entity",noPersist:"noPersist"},features:[e.Vt3],decls:20,vars:23,consts:[["grid",""],["columnUsuario",""],["editUsuario",""],["columnAtribuicoes",""],["editAtribuicoes",""],["columnPerfil",""],["editPerfil",""],["usuario",""],["editable","",3,"items","minHeight","form","hasAdd","hasEdit","hasDelete","add","load","remove","save"],[4,"ngIf"],[3,"title","template","editTemplate","maxWidth"],["type","options"],[1,"d-flex"],[1,"ms-3"],[3,"url","size","hint"],[1,"flex-fill","ms-3"],["label","","icon","","controlName","usuario_id",3,"disabled","size","dao"],[4,"ngFor","ngForOf"],[3,"color","icon","label"],["controlName","atribuicoes",3,"size","addItemHandle","deleteItemHandle"],["label","","icon","fas fa-sign-out-alt","controlName","atribuicao",3,"size","items"],["color","gray",3,"label"],["controlName","perfil_id","required","",3,"size","label","dao","where"]],template:function(a,t){if(1&a&&(e.j41(0,"grid",8,0),e.DNE(2,Je,3,1,"span",9),e.j41(3,"columns")(4,"column",10),e.DNE(5,xe,9,5,"ng-template",null,1,e.C5r)(7,We,2,3,"ng-template",null,2,e.C5r),e.k0s(),e.j41(9,"column",10),e.DNE(10,Ke,1,1,"ng-template",null,3,e.C5r)(12,qe,2,5,"ng-template",null,4,e.C5r),e.k0s(),e.j41(14,"column",10),e.DNE(15,et,2,1,"ng-template",null,5,e.C5r)(17,tt,1,8,"ng-template",null,6,e.C5r),e.k0s(),e.nrm(19,"column",11),e.k0s()()),2&a){const o=e.sdS(6),d=e.sdS(8),l=e.sdS(11),u=e.sdS(13),m=e.sdS(16),c=e.sdS(18);e.Y8G("items",t.items)("minHeight",500)("form",t.form)("hasAdd",t.auth.hasPermissionTo("MOD_USER_ATRIB"))("hasEdit",t.auth.hasPermissionTo("MOD_USER_ATRIB"))("hasDelete",t.auth.hasPermissionTo("MOD_USER_ATRIB"))("add",t.adicionarIntegrante.bind(t))("load",t.carregarIntegrante.bind(t))("remove",t.removerIntegrante.bind(t))("save",t.salvarIntegrante.bind(t)),e.R7$(2),e.Y8G("ngIf",!t.isNoPersist),e.R7$(2),e.Y8G("title",t.lex.translate("Usu\xe1rios"))("template",o)("editTemplate",d)("maxWidth",150),e.R7$(5),e.Y8G("title",t.lex.translate("Atribui\xe7\xf5es"))("template",l)("editTemplate",u)("maxWidth",200),e.R7$(5),e.Y8G("title",t.lex.translate("Perfil"))("template",m)("editTemplate",t.auth.hasPermissionTo("MOD_CFG_USER_PERFIL")?c:m)("maxWidth",300)}},dependencies:[b.Sq,b.bT,v._,C.T,R.I,y.O,F.K,P.b,Y.n,He.r]})}}return n})(),canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Integrantes da Unidade",modal:!0}},{path:":id/subordinadas",component:B,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Unidades subordinadas"}},{path:"merge",component:ke,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Unifica\xe7\xe3o",modal:!0}}];let nt=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[A.iI.forChild(at),A.iI]})}}return n})();var ot=s(9455),st=s(8832),dt=s(3756);let lt=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[b.MD,ot.h,dt.UteisModule,st.X1,nt,$.ux,k.Id]})}}return n})()}}]);
{"version":3,"file":"796.js","mappings":"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","sources":["./src/app/dao/comparecimento-dao.service.ts","./src/app/dao/plano-trabalho-consolidacao-ocorrencia-dao.service.ts","./src/app/models/plano-trabalho-consolidacao.model.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-routing.module.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport { Comparecimento } from '../models/comparecimento.model';\r\nimport { DaoBaseService } from './dao-base.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ComparecimentoDaoService extends DaoBaseService<Comparecimento> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"Comparecimento\", injector);\r\n    this.searchFields = [\"data_comparecimento\"];\r\n  }\r\n\r\n}\r\n\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { DaoBaseService } from './dao-base.service';\r\nimport { TemplateDataset } from '../modules/uteis/templates/template.service';\r\nimport { PlanoTrabalhoConsolidacaoOcorrencia } from '../models/plano-trabalho-consolidacao-ocorrencia.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PlanoTrabalhoConsolidacaoOcorrenciaDaoService extends DaoBaseService<PlanoTrabalhoConsolidacaoOcorrencia> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"PlanoTrabalhoConsolidacaoOcorrencia\", injector);\r\n  }\r\n\r\n  public dataset(deeps?: string[]): TemplateDataset[] {\r\n    return this.deepsFilter([], deeps);\r\n  }\r\n\r\n}\r\n\r\n","import { Avaliacao, HasAvaliacao } from './avaliacao.model';\r\nimport { Base } from './base.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\nimport { HasStatus, StatusJustificativa } from './status-justificativa.model';\r\n\r\nexport type PlanoTrabalhoConsolidacaoStatus = 'CONCLUIDO' | 'AVALIADO' | 'INCLUIDO';\r\n\r\nexport class PlanoTrabalhoConsolidacao extends Base implements HasAvaliacao, HasStatus {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public avaliacao?: Avaliacao;\r\n\r\n    public data_inicio: Date = new Date();\r\n    public data_fim: Date = new Date();\r\n    public status: PlanoTrabalhoConsolidacaoStatus = \"INCLUIDO\"; // Status atual da consolidao\r\n    public avaliacoes: Avaliacao[] = [];\r\n    public status_historico: StatusJustificativa[] = [];\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public avaliacao_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { PlanoTrabalhoConsolidacaoOcorrenciaDaoService } from 'src/app/dao/plano-trabalho-consolidacao-ocorrencia-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { Atividade, Checklist } from 'src/app/models/atividade.model';\r\nimport { PlanoTrabalhoConsolidacaoOcorrencia } from 'src/app/models/plano-trabalho-consolidacao-ocorrencia.model';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { BadgeTrabalho, PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { PlanoEntregaService } from '../../plano-entrega/plano-entrega.service';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { AtividadeOptionsMetadata, AtividadeService } from '../../atividade/atividade.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { CalendarService } from 'src/app/services/calendar.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { Comparecimento } from 'src/app/models/comparecimento.model';\r\nimport { ComparecimentoDaoService } from 'src/app/dao/comparecimento-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\n\r\nexport type ConsolidacaoEntrega = {\r\n  id: string,\r\n  entrega: PlanoTrabalhoEntrega,\r\n  badge: BadgeTrabalho,\r\n  atividades: Atividade[]\r\n};\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-form',\r\n  templateUrl: './plano-trabalho-consolidacao-form.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-form.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoFormComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridEntregas', { static: false }) public gridEntregas?: GridComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('etiqueta', { static: false }) public etiqueta?: InputSelectComponent;\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() planoTrabalho?: PlanoTrabalho;\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalhoConsolidacao | undefined) { super.entity = value; this.bindEntity(); } get entity(): PlanoTrabalhoConsolidacao | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) {\r\n    if(this._disabled != value || this.atividadeOptionsMetadata.disabled !== value) {\r\n      this._disabled = value;\r\n      this.atividadeOptionsMetadata.disabled = value;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  get disabled(): boolean {\r\n    return this._disabled;\r\n  }\r\n\r\n  public consolidacaoOcorrenciaDao: PlanoTrabalhoConsolidacaoOcorrenciaDaoService;\r\n  public ocorrenciaDao: PlanoTrabalhoConsolidacaoOcorrenciaDaoService;\r\n  public comparecimentoDao: ComparecimentoDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public formAtividade: FormGroup;\r\n  public formOcorrencia: FormGroup;\r\n  public formComparecimento: FormGroup;\r\n  public formEdit: FormGroup;\r\n  public unidade?: Unidade;\r\n  public dao: PlanoTrabalhoConsolidacaoDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public atividadeService: AtividadeService;\r\n  public calendar: CalendarService;\r\n  public joinAtividade: string[] = ['demandante', 'usuario', 'tipo_atividade', 'comentarios.usuario:id,nome,apelido'];\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public planoEntregaService: PlanoEntregaService;\r\n  public itemsEntregas: ConsolidacaoEntrega[] = [];\r\n  public etiquetas: LookupItem[] = [];\r\n  public checklist?: Checklist[];\r\n  public itemsOcorrencias: PlanoTrabalhoConsolidacaoOcorrencia[] = [];\r\n  public itemsComparecimentos: Comparecimento[] = [];\r\n  public itemsAfastamentos: Afastamento[] = [];\r\n  public atividadeOptionsMetadata: AtividadeOptionsMetadata;\r\n  public programa?: Programa;\r\n  \r\n  private _disabled: boolean = true;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    this.consolidacaoOcorrenciaDao = injector.get<PlanoTrabalhoConsolidacaoOcorrenciaDaoService>(PlanoTrabalhoConsolidacaoOcorrenciaDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.comparecimentoDao = injector.get<ComparecimentoDaoService>(ComparecimentoDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.atividadeService = injector.get<AtividadeService>(AtividadeService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.ocorrenciaDao = injector.get<PlanoTrabalhoConsolidacaoOcorrenciaDaoService>(PlanoTrabalhoConsolidacaoOcorrenciaDaoService);\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.planoEntregaService = injector.get<PlanoEntregaService>(PlanoEntregaService);\r\n    this.formAtividade = this.fh.FormBuilder({\r\n      descricao: { default: \"\" },\r\n      etiquetas: { default: [] },\r\n      checklist: { default: [] },\r\n      comentarios: { default: [] },\r\n      esforco: { default: 0 },\r\n      tempo_planejado: { default: 0 },\r\n      data_distribuicao: {default: new Date()},\r\n      data_estipulada_entrega: {default: new Date()},\r\n      data_entrega: {default: new Date()},\r\n      tipo_atividade_id: {default: null}\r\n    }, this.cdRef, this.validateAtividade);\r\n    this.formOcorrencia = this.fh.FormBuilder({\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      descricao: { default: \"\" }\r\n    }, this.cdRef, this.validateOcorrencia);\r\n    this.formComparecimento = this.fh.FormBuilder({\r\n      data_comparecimento: { default: new Date() },\r\n      unidade_id: { default: \"\" },\r\n      detalhamento: { default: \"\" }\r\n    }, this.cdRef, this.validateComparecimento);\r\n    this.formEdit = this.fh.FormBuilder({\r\n      progresso: { default: 0 },\r\n      etiquetas: { default: [] },\r\n      etiqueta: { default: null }\r\n    });\r\n    this.atividadeOptionsMetadata = {\r\n      refreshId: this.atividadeRefreshId.bind(this),\r\n      removeId: this.atividadeRemoveId.bind(this),\r\n      refresh: this.refresh.bind(this)\r\n    }\r\n  }\r\n\r\n  public refresh() {\r\n    this.loadData(this.entity!, this.form);\r\n  }\r\n\r\n  public bindEntity() {\r\n    if(this.entity) {\r\n      this.entity._metadata = this.entity._metadata || {};\r\n      this.entity._metadata.planoTrabalhoConsolidacaoFormComponent = this;\r\n    }\r\n  }\r\n\r\n  public atividadeRefreshId(id: string, atividade?: Atividade) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if(foundIndex >= 0) {\r\n        if(atividade) {\r\n          entrega.atividades[foundIndex] = atividade;\r\n        } else {\r\n          this.atividadeDao.getById(id, this.joinAtividade).then(atividade => { if(atividade) entrega.atividades[foundIndex] = atividade; });\r\n        }\r\n      }\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public atividadeRemoveId(id: string) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if(foundIndex >= 0) entrega.atividades.splice(foundIndex, 1);\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public validateAtividade = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    } else if(['data_distribuicao', 'data_estipulada_entrega', 'data_entrega'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Invlido\";\r\n    } else if(controlName == 'data_estipulada_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuio\";\r\n    } else if(controlName == 'data_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuio\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateOcorrencia = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    } else if(['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Invlido\";\r\n    } else if(controlName == 'data_fim' && control.value.getTime() < this.formOcorrencia?.controls.data_inicio.value.getTime()) {\r\n      result = \"Menor que incio\";\r\n    } \r\n    return result;\r\n  }\r\n\r\n  public validateComparecimento = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['detalhamento', 'unidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    } else if(controlName == 'data_comparecimento' && this.entity && !this.util.between(control.value, {start: this.entity!.data_inicio, end: this.entity!.data_fim})) {\r\n      result = \"Invlido\";\r\n    } \r\n    return result;\r\n  }\r\n\r\n  public loadConsolidacao(dados: ConsolidacaoDados) {\r\n    this.itemsEntregas = dados.entregas.map(x => {\r\n      if(x.plano_entrega_entrega) x.plano_entrega_entrega.plano_entrega = dados.planosEntregas.find(pe => pe.id == x.plano_entrega_entrega?.plano_entrega_id);\r\n      let result = {\r\n        id: x.id,\r\n        entrega: x,\r\n        atividades: dados.atividades.filter(y => y.plano_trabalho_entrega_id == x.id),\r\n        badge: this.planoTrabalhoService.tipoEntrega(x, dados.planoTrabalho),\r\n        meta: x.plano_entrega_entrega ? this.planoEntregaService.getValorMeta(x.plano_entrega_entrega) : '',\r\n        metaRealizado: x.plano_entrega_entrega ? this.planoEntregaService.getValorRealizado(x.plano_entrega_entrega) : '',\r\n        progresso_realizado: x.plano_entrega_entrega ? x.plano_entrega_entrega.progresso_realizado : 0,\r\n        objetivos: x.plano_entrega_entrega ? x.plano_entrega_entrega.objetivos : [],\r\n        processos: x.plano_entrega_entrega ? x.plano_entrega_entrega.processos : [],\r\n      };\r\n\r\n      return result;\r\n    });\r\n    this.programa = dados.programa;\r\n    this.planoTrabalho = dados.planoTrabalho;\r\n    this.itemsOcorrencias = dados.ocorrencias;\r\n    this.itemsComparecimentos = dados.comparecimentos;\r\n    this.itemsAfastamentos = dados.afastamentos;\r\n    this.unidade = dados.planoTrabalho.unidade || this.entity!.plano_trabalho?.unidade;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.gridEntregas!.loading = true;\r\n    this.cdRef.detectChanges();\r\n    try {\r\n      let dados = await this.dao!.dadosConsolidacao(entity.id);\r\n      this.loadConsolidacao(dados);\r\n    } finally {\r\n      this.gridEntregas!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }  \r\n  \r\n  /***************************************************************************************\r\n  * Atividades \r\n  ****************************************************************************************/\r\n  public async addAtividade(entrega: PlanoTrabalhoEntrega) {\r\n    let planoTrabalho: PlanoTrabalho | undefined = entrega.plano_trabalho || this.entity!.plano_trabalho;\r\n    let efemerides = this.calendar.calculaDataTempoUnidade(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"ENTREGA\");\r\n    const tempoPlanejado = this.calendar.horasUteis(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"DISTRIBUICAO\");\r\n    const dataInicio = this.util.setTime(this.entity!.data_inicio, 0, 0, 0);\r\n    const dataFim = this.util.setTime(this.entity!.data_fim, 23, 59, 59);\r\n    return new Atividade({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho: planoTrabalho,\r\n      plano_trabalho_entrega: entrega,\r\n      plano_trabalho_consolidacao: this.entity,\r\n      demandante: this.auth.usuario,\r\n      usuario: this.auth.usuario,\r\n      unidade: this.unidade,\r\n      data_distribuicao: dataInicio,\r\n      carga_horaria: planoTrabalho!.carga_horaria,\r\n      data_estipulada_entrega: dataFim,\r\n      data_inicio: dataInicio,\r\n      data_entrega: dataFim,\r\n      tempo_planejado: tempoPlanejado,\r\n      tempo_despendido: efemerides?.tempoUtil || 0,\r\n      status: 'CONCLUIDO',\r\n      progresso: 100,\r\n      plano_trabalho_id: this.entity!.plano_trabalho_id,\r\n      plano_trabalho_entrega_id: entrega.id,\r\n      plano_trabalho_consolidacao_id: this.entity!.id,\r\n      demandante_id: this.auth.usuario!.id,\r\n      usuario_id: this.auth.usuario!.id,\r\n      unidade_id: this.unidade!.id,\r\n      metadados: { // Simula os metadados enviados pelo servidor\r\n        atrasado: false,\r\n        tempo_despendido: 0,\r\n        tempo_atraso: 0,\r\n        pausado: false,\r\n        iniciado: true,\r\n        concluido: true,\r\n        avaliado: false,\r\n        arquivado: false,\r\n        produtividade: 0,\r\n        extra: undefined,\r\n        _status: []\r\n      }\r\n    });\r\n  }\r\n\r\n  public async loadAtividade(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue(row);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeAtividade(atividades: Atividade[], row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let atividade = row as Atividade;\r\n        await this.atividadeDao?.delete(atividade);\r\n        atividades.splice(atividades.findIndex(x => x.id == atividade.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveAtividade(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formAtividade.markAllAsTouched();\r\n    if (this.formAtividade!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      this.util.fillForm(row, this.formAtividade!.value);\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.atividadeDao?.save(row, this.joinAtividade, ['etiquetas', 'checklist', 'comentarios', 'pausas', 'tarefas']);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n      this.atividadeRefreshId(row.id, result);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public atividadeDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_EDIT, {}));\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_DELETE, {}));\r\n    return result;\r\n  }  \r\n\r\n  public async onColumnProgressoEtiquetasChecklistEdit(row: any) {\r\n    this.formEdit.controls.progresso.setValue(row.progresso);\r\n    this.formEdit.controls.etiquetas.setValue(row.etiquetas);\r\n    this.formEdit.controls.etiqueta.setValue(null);\r\n    this.etiquetas = this.util.merge(row.tipo_atividade?.etiquetas, row.unidade?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n    this.checklist = this.util.clone(row.checklist);\r\n  }\r\n\r\n  public async onColumnProgressoEtiquetasChecklistSave(row: any) {\r\n    try {\r\n      const saved = await this.atividadeDao!.update(row.id, {\r\n        progresso: this.formEdit.controls.progresso.value,\r\n        etiquetas: this.formEdit.controls.etiquetas.value,\r\n        checklist: this.checklist\r\n      });\r\n      row.progresso = this.formEdit.controls.progresso.value;\r\n      row.checklist = this.checklist;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public onEtiquetaConfigClick() {\r\n    this.go.navigate({ route: [\"configuracoes\", \"preferencia\", \"usuario\", this.auth.usuario!.id], params: { etiquetas: true } }, {\r\n      modal: true, modalClose: (modalResult) => {\r\n        this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n        this.cdRef.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  public addItemHandleEtiquetas(): LookupItem | undefined {\r\n    let result = undefined;\r\n    if (this.etiqueta && this.etiqueta.selectedItem) {\r\n      const item = this.etiqueta.selectedItem;\r\n      const key = item.key?.length ? item.key : this.util.textHash(item.value);\r\n      if (this.util.validateLookupItem(this.formEdit.controls.etiquetas.value, key)) {\r\n        result = {\r\n          key: key,\r\n          value: item.value,\r\n          color: item.color,\r\n          icon: item.icon\r\n        };\r\n        this.formEdit.controls.etiqueta.setValue(null);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public loadTipoAtividade(tipoAtividade: TipoAtividade | undefined) {\r\n    if(tipoAtividade) {\r\n      this.etiquetas = this.atividadeService.buildEtiquetas(this.unidade, tipoAtividade);\r\n      this.atividadeService.buildChecklist(tipoAtividade, this.formAtividade.controls.checklist);\r\n      this.formAtividade.controls.esforco.setValue(tipoAtividade?.esforco || 0);\r\n    } else {\r\n      this.etiquetas = [];\r\n      this.formAtividade.controls.esforco.setValue(0);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onTipoAtividadeSelect(item: SelectItem) {\r\n    const tipoAtividade: TipoAtividade | undefined = item.entity as TipoAtividade;\r\n    this.loadTipoAtividade(tipoAtividade);\r\n    this.atividadeService.comentarioAtividade(tipoAtividade, this.formAtividade!.controls.comentarios);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Ocorrncias \r\n  ****************************************************************************************/\r\n  public async addOcorrencia() {\r\n    return new PlanoTrabalhoConsolidacaoOcorrencia({\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadOcorrencia(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim,\r\n      descricao: row.descricao\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeOcorrencia(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let ocorrencia = row as PlanoTrabalhoConsolidacaoOcorrencia;\r\n        await this.consolidacaoOcorrenciaDao?.delete(ocorrencia);\r\n        this.itemsOcorrencias.splice(this.itemsOcorrencias.findIndex(x => x.id == ocorrencia.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveOcorrencia(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formOcorrencia.markAllAsTouched();\r\n    if (this.formOcorrencia!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      row.descricao = form.controls.descricao.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.consolidacaoOcorrenciaDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public ocorrenciaDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }  \r\n\r\n  /***************************************************************************************\r\n  * Comparecimento \r\n  ****************************************************************************************/\r\n  public async addComparecimento() {\r\n    return new Comparecimento({\r\n      unidade_id: this.unidade?.id,\r\n      unidade: this.unidade,\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadComparecimento(form: FormGroup, row: any) {\r\n    this.formComparecimento.patchValue({\r\n      data_comparecimento: row.data_comparecimento,\r\n      unidade_id: row.unidade_id,\r\n      detalhamento: row.detalhamento\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeComparecimento(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let comparecimento = row as Comparecimento;\r\n        await this.comparecimentoDao?.delete(comparecimento);\r\n        this.itemsComparecimentos.splice(this.itemsComparecimentos.findIndex(x => x.id == comparecimento.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveComparecimento(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formComparecimento.markAllAsTouched();\r\n    if (this.formComparecimento!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_comparecimento = form.controls.data_comparecimento.value;\r\n      row.detalhamento = form.controls.detalhamento.value;\r\n      row.plano_trabalho_consolidacao_id = this.entity!.id;\r\n      row.unidade_id = form.controls.unidade_id.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.comparecimentoDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public comparecimentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }  \r\n\r\n  /***************************************************************************************\r\n  * Afastamentos\r\n  ****************************************************************************************/\r\n  public async addAfastamento() {\r\n    this.go.navigate({route: ['cadastros', 'afastamento', 'new']}, {\r\n      metadata: { consolidacao: this.entity },\r\n      filterSnapshot: undefined,\r\n      querySnapshot: undefined,\r\n      modalClose: (modalResult) => {\r\n        if(modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  public afastamentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.OPTION_INFORMACOES, { onClick: (doc: Afastamento) => this.go.navigate({route: [\"cadastros\", \"afastamento\", doc.id, \"consult\"]}) }));\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }  \r\n\r\n  public async showPlanejamento(planejamento_id: string){\r\n    this.go.navigate({ route: ['gestao', 'planejamento', planejamento_id, 'consult'] }, {modal: true})\r\n  }\r\n\r\n  public async showCadeiaValor(cadeia_valor_id_id: string){\r\n    this.go.navigate({ route: ['gestao', 'cadeia-valor', cadeia_valor_id_id, 'consult'] }, {modal: true})\r\n  }\r\n \r\n}\r\n","<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Atividades')\" [icon]=\"entityService.getIcon('Atividade')\">\r\n    <grid [items]=\"itemsEntregas\" #gridEntregas [minHeight]=\"0\" expanded>\r\n        <columns>\r\n            <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidao')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n                <ng-template let-row=\"row\" #columnConsolidacao>\r\n                    <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                    <grid [items]=\"row.atividades\" [minHeight]=\"0\" #gridAtividade [form]=\"formAtividade\" [hasAdd]=\"!disabled\" [hasDelete]=\"false\" [hasEdit]=\"false\"\r\n                        [add]=\"addAtividade.bind(this, row.entrega)\" [load]=\"loadAtividade.bind(this)\" [remove]=\"removeAtividade.bind(this, row.atividades)\" [save]=\"saveAtividade.bind(this)\" editable>\r\n                        <columns>\r\n                            <column [title]=\"'#ID/' + lex.translate('Tipo de Atividade') + '\\nDescrio'\" [template]=\"columnAtividadeDescricao\" [editTemplate]=\"editAtividadeDescricao\">\r\n                                <ng-template let-row=\"row\" #columnAtividadeDescricao>\r\n                                    <span class=\"text-nowrap d-block\">\r\n                                        <badge icon=\"bi bi-hash\" [label]=\"row.numero\" color=\"light\" [data]=\"row.numero\" [click]=\"atividadeService.onIdClick.bind(this)\"></badge>\r\n                                        <badge *ngIf=\"row.tipo_atividade\" [icon]=\"entityService.getIcon('TipoAtividade')\" [label]=\"row.tipo_atividade.nome\" color=\"light\"></badge>\r\n                                    </span>\r\n                                    <span class=\"micro-text fw-ligh atividade-descricao\">{{row.descricao}}</span>\r\n                                </ng-template>\r\n                                <ng-template let-row=\"row\" #editAtividadeDescricao>\r\n                                    <input-search [label]=\"lex.translate('Tipo de atividade')\" [size]=\"12\" [emptyValue]=\"null\" controlName=\"tipo_atividade_id\" [control]=\"formAtividade!.controls.tipo_atividade_id\" [dao]=\"tipoAtividadeDao\" (select)=\"onTipoAtividadeSelect($event)\" [labelInfo]=\"lex.translate('Tipo de atividade') + ' utilizado para classificar a atividade'\" [required]=\"!auth.hasPermissionTo('MOD_ATV_TIPO_ATV_VAZIO') ? 'true' : undefined\"></input-search>\r\n                                    <input-textarea label=\"Descrio\" [size]=\"12\" [rows]=\"2\" controlName=\"descricao\" [control]=\"formAtividade!.controls.descricao\" required></input-textarea>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column [title]=\"'Tempos'\" [width]=\"300\" [template]=\"columnTempos\" [editTemplate]=\"editTempos\">\r\n                                <ng-template let-row=\"row\" #columnTempos>\r\n                                    <div class=\"one-per-line\">\r\n                                        <badge *ngFor=\"let tempo of atividadeService.temposAtividade(row)\" [badge]=\"tempo\"></badge>\r\n                                    </div>\r\n                                </ng-template>\r\n                                <ng-template let-row=\"row\" #editTempos>\r\n                                    <input-datetime icon=\"bi bi-file-earmark-plus\" [label]=\"lex.translate('Data de distribuio')\" controlName=\"data_distribuicao\" [control]=\"formAtividade!.controls.data_distribuicao\" labelInfo=\"Data de incluso/distribuio/lanamento\"></input-datetime>\r\n                                    <input-datetime icon=\"bi bi-calendar-check\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"data_estipulada_entrega\" [control]=\"formAtividade!.controls.data_estipulada_entrega\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n                                    <input-datetime icon=\"bi bi-check-circle\" label=\"Concluso\" controlName=\"data_entrega\" [control]=\"formAtividade!.controls.data_entrega\" labelInfo=\"Data da concluso da atividade\"></input-datetime>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column [title]=\"'Progresso\\nEtiquetas/Checklist'\" [width]=\"200\" [template]=\"columnProgressoEtiquetasChecklist\" [editTemplate]=\"columnProgressoEtiquetasChecklist\" [columnEditTemplate]=\"columnProgressoEtiquetasChecklistEdit\" [edit]=\"onColumnProgressoEtiquetasChecklistEdit.bind(this)\" [save]=\"onColumnProgressoEtiquetasChecklistSave.bind(this)\">\r\n                                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklist>\r\n                                    <progress-bar [value]=\"row.progresso\" color=\"success\"></progress-bar>\r\n                                    <badge *ngFor=\"let etiqueta of row.etiquetas\" [lookup]=\"etiqueta\"></badge>\r\n                                    <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                                    <table *ngIf=\"row.checklist?.length\">\r\n                                        <tr *ngFor=\"let check of row.checklist\">\r\n                                            <td><i *ngIf=\"check.checked\" class=\"bi bi-check-circle\"></i></td>\r\n                                            <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                                        </tr>\r\n                                    </table>\r\n                                </ng-template>\r\n                                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklistEdit>\r\n                                    <input-number [size]=\"12\" [decimals]=\"2\" label=\"Progresso\" sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" [control]=\"formEdit.controls.progresso\" labelInfo=\"Progresso de execuo (% Concludo)\"></input-number>\r\n                                    <input-multiselect controlName=\"etiquetas\" [size]=\"12\" [control]=\"formEdit.controls.etiquetas\" [addItemHandle]=\"addItemHandleEtiquetas.bind(this)\">\r\n                                        <input-select [size]=\"12\" label=\"Etiqueta\" #etiqueta controlName=\"etiqueta\" nullable itemNull=\"- Selecione -\" detailsButton detailsButtonIcon=\"bi bi-tools\" (details)=\"onEtiquetaConfigClick()\" [control]=\"formEdit.controls.etiqueta\" [items]=\"etiquetas\"></input-select>\r\n                                    </input-multiselect>\r\n                                    <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                                    <table *ngIf=\"row.checklist?.length\">\r\n                                        <tr *ngFor=\"let check of checklist; let i = index\">\r\n                                            <td><input-switch [size]=\"12\" scale=\"small\" [source]=\"checklist\" [path]=\"i + '.checked'\"></input-switch></td>\r\n                                            <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                                        </tr>\r\n                                    </table>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column [title]=\"'n Processo/Status\\nComentrios'\" [width]=\"400\" [template]=\"columnNumero\" [editTemplate]=\"columnNumero\">\r\n                                <ng-template let-row=\"row\" #columnNumero>\r\n                                    <documentos-badge [documento]=\"row.documento_requisicao\"></documentos-badge>\r\n                                    <span class=\"d-block\">\r\n                                        <badge *ngFor=\"let status of atividadeService.getStatus(row, entity)\" [data]=\"status\" [color]=\"status.color\" [icon]=\"status.icon\" [label]=\"status.label\"></badge>\r\n                                    </span>\r\n                                    <comentarios-widget *ngIf=\"!gridAtividade.editing\" [entity]=\"row\" [selectable]=\"false\" origem=\"ATIVIDADE\" [grid]=\"gridAtividade\"></comentarios-widget>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column type=\"options\" [metadata]=\"atividadeOptionsMetadata\" [dynamicOptions]=\"atividadeService.dynamicOptions.bind(this)\" [dynamicButtons]=\"atividadeService.dynamicButtons.bind(this)\"></column>\r\n                        </columns>\r\n                    </grid>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Origem\" [template]=\"columnOrigem\" [width]=\"200\">\r\n                <ng-template let-row=\"row\" #columnOrigem>\r\n                    <badge [label]=\"row.badge.titulo\" [color]=\"row.badge.cor\"></badge>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Entrega\" [template]=\"columnEntrega\">\r\n                <ng-template let-row=\"row\" #columnEntrega>\r\n                    <b>{{row.badge.descricao}}</b>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"% Fora Trab. Planejado\" [template]=\"columnForcaTrabalho\" [width]=\"100\">\r\n                <ng-template let-row=\"row\" #columnForcaTrabalho>\r\n                    <badge color=\"light\" [label]=\"row.entrega.forca_trabalho + '%'\"></badge>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"'Meta\\nRealizado'\" [template]=\"columnMetaRealizado\" [width]=\"100\">\r\n                <ng-template let-row=\"row\" #columnMetaRealizado>\r\n                    <badge icon=\"bi bi-graph-up-arrow\" [textValue]=\"row.meta\" color=\"light\" hint=\"Meta\"></badge><br>\r\n                    <badge icon=\"bi bi-check-lg\" [textValue]=\"row.metaRealizado\" color=\"light\" hint=\"Realizado\"></badge>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Progresso\" [template]=\"columnProgresso\" [width]=\"150\">\r\n                <ng-template let-row=\"row\" #columnProgresso>\r\n                    <progress-bar [value]=\"row.progresso_realizado\" color=\"success\"></progress-bar>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"'Objetivos/Processos'\" [template]=\"columnObjProc\" [editTemplate]=\"columnObjProc\" [width]=\"200\">\r\n                <ng-template let-row=\"row\" #columnObjProc>\r\n                    <separator [title]=\"lex.translate('Objetivos')\" *ngIf=\"row.objetivos?.length\" collapse [collapsed]=\"true\">\r\n                        <div *ngFor=\"let pObjetivo of row.objetivos\" class=\"objetivo d-flex align-items-center\">\r\n                            <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showPlanejamento(pObjetivo.objetivo.planejamento_id)\"><i class=\"bi bi-eye\"></i></button>\r\n                            <small>{{pObjetivo.objetivo.nome}}</small>\r\n                        </div>\r\n                    </separator>\r\n                    <separator [title]=\"lex.translate('Processos')\" *ngIf=\"row.processos?.length\" collapse [collapsed]=\"true\">\r\n                        <div *ngFor=\"let pProcesso of row.processos\" class=\"objetivo d-flex align-items-center\">\r\n                            <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showCadeiaValor(pProcesso.processo.cadeia_valor_id)\"><i class=\"bi bi-eye\"></i></button>\r\n                            <small>{{pProcesso.processo.nome}}</small>\r\n                        </div>\r\n                    </separator>\r\n                </ng-template>\r\n            </column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Ocorrncias')\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\">\r\n    <grid [items]=\"itemsOcorrencias\" [minHeight]=\"0\" #gridOcorrencia [form]=\"formOcorrencia\" \r\n        [hasDelete]=\"!disabled\" [hasAdd]=\"!disabled\" [hasEdit]=\"!disabled\"\r\n        [add]=\"addOcorrencia.bind(this)\" [load]=\"loadOcorrencia.bind(this)\" \r\n        [remove]=\"removeOcorrencia.bind(this)\" [save]=\"saveOcorrencia.bind(this)\" editable>\r\n        <columns>\r\n            <column title=\"Incio\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n            <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n            <column title=\"Descrio\" type=\"textarea\" field=\"descricao\"></column>\r\n            <column type=\"options\" [dynamicButtons]=\"ocorrenciaDynamicButtons.bind(this)\"></column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Afastamentos')\" [icon]=\"entityService.getIcon('Afastamento')\">\r\n    <grid [items]=\"itemsAfastamentos\" [minHeight]=\"0\" #gridAfastamento [add]=\"addAfastamento.bind(this)\" [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"!disabled\" editable>\r\n        <columns>\r\n            <column title=\"Incio\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n            <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n            <column title=\"Motivo/Observao\" [template]=\"columnMotivoObservacao\">\r\n                <ng-template let-row=\"row\" #columnMotivoObservacao>\r\n                    <badge [color]=\"row.tipo_motivo_afastamento.cor\" [icon]=\"row.tipo_motivo_afastamento.icone\" [label]=\"row.tipo_motivo_afastamento.nome\"></badge>\r\n                    {{row.observacao}}\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\" [dynamicButtons]=\"afastamentoDynamicButtons.bind(this)\"></column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Comparecimentos')\" [icon]=\"entityService.getIcon('Comparecimento')\">\r\n    <grid [items]=\"itemsComparecimentos\" [minHeight]=\"0\" #gridComparecimento [form]=\"formComparecimento\" \r\n        [hasDelete]=\"!disabled\" [hasAdd]=\"!disabled\" [hasEdit]=\"!disabled\"\r\n        [add]=\"addComparecimento.bind(this)\" [load]=\"loadComparecimento.bind(this)\" \r\n        [remove]=\"removeComparecimento.bind(this)\" [save]=\"saveComparecimento.bind(this)\" editable>\r\n        <columns>\r\n            <column title=\"Data\" [width]=\"300\" type=\"date\" field=\"data_comparecimento\"></column>\r\n            <column title=\"Unidade\" [template]=\"columnUnidade\" [editTemplate]=\"editUnidade\">\r\n                <ng-template let-row=\"row\" #columnUnidade>\r\n                    <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.unidade.sigla\" [textValue]=\"row.unidade.nome\" color=\"success\"></badge>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidade>\r\n                    <input-search label icon [size]=\"6\" #unidade controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Detalhamento\" type=\"text\" field=\"detalhamento\"></column>\r\n            <column type=\"options\" [dynamicButtons]=\"comparecimentoDynamicButtons.bind(this)\"></column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ChangeDetectorRef, Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoStatus } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from '../plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-list',\r\n  templateUrl: './plano-trabalho-consolidacao-list.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-list.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoListComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n\r\n  public get items(): PlanoTrabalhoConsolidacao[] {\r\n    return this.entity?.consolidacoes || [];\r\n  }\r\n\r\n  public dao?: PlanoTrabalhoConsolidacaoDaoService;\r\n  public avaliacaoDao: AvaliacaoDaoService;\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializaes */\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.title = this.lex.translate(\"Consolidaes\");\r\n    this.code = \"MOD_PTR_CSLD\";\r\n    this.modalWidth = 1200;\r\n    this.form = this.fh.FormBuilder({\r\n      'data_inicio': {default: new Date()},\r\n      'data_fim': {default: new Date()}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      if (this.urlParams?.has(\"usuarioId\") && this.urlParams?.has(\"planoTrabalhoId\")) {\r\n        let dados = await this.planoTrabalhoDao!.getByUsuario(this.urlParams!.get(\"usuarioId\")!, true, this.urlParams!.get(\"planoTrabalhoId\")!);\r\n        if (dados.planos.length == 1) this.entity = dados.planos[0];\r\n      }\r\n      let agora = (new Date()).getTime();\r\n      this.items.forEach(v => {\r\n        if(!v.plano_trabalho) v.plano_trabalho = this.entity;\r\n        if(this.util.asTimestamp(v.data_inicio) <= agora && agora <= this.util.asTimestamp(v.data_fim)) this.grid!.expand(v.id);\r\n      });\r\n    })();\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    // TODO: Validar data\r\n    return result;\r\n  }\r\n\r\n  public async addConsolidacao() {\r\n    return new PlanoTrabalhoConsolidacao({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadConsolidacao(form: FormGroup, row: any) {\r\n    this.form!.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim\r\n    });    \r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeConsolidacao(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let consolidacao = row as PlanoTrabalhoConsolidacao;\r\n        await this.dao?.delete(consolidacao);\r\n        this.items.splice(this.items.findIndex(x => x.id == consolidacao.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveConsolidacao(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.form!.markAllAsTouched();\r\n    if (this.form!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      result = await this.dao?.save(row);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao, dados?: ConsolidacaoDados) {\r\n    if(dados && consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent) {\r\n      let consolidacaoForm = consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent as PlanoTrabalhoConsolidacaoFormComponent;\r\n      consolidacaoForm.loadConsolidacao(dados);\r\n    } else {\r\n      this.grid!.refreshExpanded(consolidacao.id);\r\n    }\r\n  }\r\n\r\n  public async concluir(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.concluir(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public async cancelarConclusao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.cancelarConclusao(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\r\n  }\r\n\r\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\r\n  }\r\n\r\n  public isDisabled(row?: PlanoTrabalhoConsolidacao): boolean {\r\n    return (row && row.status != \"INCLUIDO\") || this.entity?.status != \"ATIVO\";\r\n  }\r\n\r\n  public avaliar(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.go.navigate({route: ['gestao', 'plano-trabalho', 'consolidacao', consolidacao.id, 'avaliar']}, {\r\n      modal: true, \r\n      metadata: {\r\n        consolidacao: consolidacao,\r\n        programa: this.entity!.programa\r\n      },\r\n      modalClose: (modalResult?: Avaliacao) => {\r\n        if(modalResult) {\r\n          consolidacao.status = \"AVALIADO\";\r\n          this.refreshConsolidacao(consolidacao);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  public fazerRecurso(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.go.navigate({route: ['gestao', 'plano-trabalho', 'consolidacao', consolidacao.id, 'recurso']}, {\r\n      modal: true, \r\n      metadata: {\r\n        recurso: true,\r\n        consolidacao: consolidacao,\r\n        programa: this.entity!.programa\r\n      },\r\n      modalClose: (modalResult?: Avaliacao) => {\r\n        if(modalResult) {\r\n          consolidacao.avaliacao = modalResult;\r\n          this.refreshConsolidacao(consolidacao);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  public async cancelarAvaliacao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.avaliacaoDao!.cancelarAvaliacao(consolidacao.avaliacao!.id);\r\n      if(response) {\r\n        consolidacao.status = \"CONCLUIDO\";\r\n        consolidacao.avaliacao_id = null;\r\n        consolidacao.avaliacao = undefined;\r\n        this.refreshConsolidacao(consolidacao);\r\n      }\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\r\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\r\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\r\n    const isUsuarioConsolidacao = this.auth.usuario!.id == this.entity!.usuario_id;\r\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.auth.isGestorUnidade(this.entity!.unidade_id) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', this.entity!.unidade_id));\r\n    const isUsuarioDoPlano = this.auth.usuario!.id == consolidacao!.plano_trabalho?.usuario_id;\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check-circle\", color: \"btn-outline-success\", onClick: this.concluir.bind(this) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { hint: \"Cancelar concluso\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: this.cancelarConclusao.bind(this) };\r\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: this.avaliar.bind(this) };\r\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: this.avaliar.bind(this) };\r\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: this.fazerRecurso.bind(this) };\r\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliao\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-warning\", onClick: this.cancelarAvaliacao.bind(this) };\r\n    /* (RN_CSLD_11) No pode concluir a consolidao antes que a anterior no esteja concluida, e no pode retornar status da consolidao se a posterior estiver a frente (em status); */\r\n    const canConcluir = !anterior || [\"CONCLUIDO\", \"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarConclusao = !proximo || [\"INCLUIDO\"].includes(proximo!.status);\r\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\r\n    if(!this.isDisabled()) {\r\n      if(consolidacao.status == \"INCLUIDO\" && canConcluir && (isUsuarioConsolidacao || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_CONCL\"))) {\r\n        result.push(BOTAO_CONCLUIR);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canCancelarConclusao && this.planoTrabalhoService.diasParaConcluirConsolidacao(row, this.entity!.programa) >= 0 && (isUsuarioConsolidacao || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_DES_CONCL\"))) {\r\n        result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\r\n        result.push(BOTAO_AVALIAR);\r\n      }\r\n      if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\r\n        /* (RN_AVL_2) [PT] O usurio do plano de trabalho poder recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\r\n        if(isUsuarioDoPlano && consolidacao!.avaliacao?.data_avaliacao && \r\n          (!this.entity!.programa!.dias_tolerancia_recurso_avaliacao || \r\n          (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + this.entity!.programa!.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\r\n          result.push(BOTAO_FAZER_RECURSO);\r\n        }\r\n        /* (RN_AVL_3) [PT] Aps o recurso ser realizado nova avaliao, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\r\n        /* (RN_AVL_6) [PT] Qualquer usurio capaz de avaliar tambem ter a capacidade de cancelar a avaliao; */\r\n        if(canAvaliar && isAvaliador) {\r\n          result.push(BOTAO_REAVALIAR);\r\n          result.push(BOTAO_CANCELAR_AVALIACAO);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","<grid [items]=\"items\" #grid [form]=\"form!\" [hasDelete]=\"true\" [minHeight]=\"0\"\r\n    [add]=\"addConsolidacao.bind(this)\" [hasAdd]=\"!isDisabled()\" [hasEdit]=\"false\" [hasDelete]=\"false\" editable>\r\n    <columns>\r\n        <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidao')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n            <ng-template let-row=\"row\" #columnConsolidacao>\r\n                <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"isDisabled(row)\" [entity]=\"row\" [planoTrabalho]=\"entity\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data incio\" [template]=\"columnDataInicio\">\r\n            <ng-template let-row=\"row\" #columnDataInicio>\r\n                {{util.getDateFormatted(row.data_inicio)}}\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data fim\" [template]=\"columnDataFim\">\r\n            <ng-template let-row=\"row\" #columnDataFim>\r\n                <strong>{{util.getDateFormatted(row.data_fim)}}</strong>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Estatsticas\" [template]=\"columnEstatisticas\">\r\n            <ng-template let-row=\"row\" #columnEstatisticas>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Status\" [template]=\"columnStatus\">\r\n            <ng-template let-row=\"row\" #columnStatus>\r\n                <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n</grid>","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'app-plano-trabalho-consolidacao',\r\n  templateUrl: './plano-trabalho-consolidacao.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoComponent extends PageFrameBase {\r\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\r\n\r\n  public usuarios: Usuario[] = [];\r\n  public unidade?: Unidade;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public loadingUnidade: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      arquivados: { default: false }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.tabs!.active = this.queryParams?.tab || \"USUARIO\";\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.unidade = this.auth.unidadeGestor();\r\n    if(this.unidade) {\r\n      this.usuarios = [];\r\n      this.loadingUnidade = true;\r\n      this.cdRef.detectChanges()\r\n      try {\r\n        this.usuarios = await this.unidadeDao.lotados(this.unidade.id);\r\n      } finally {\r\n        this.loadingUnidade = false;\r\n        this.cdRef.detectChanges()\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","<tabs right #tabs [title]=\"isModal ? '' : title\">\r\n    <tab key=\"UNIDADE\" *ngIf=\"unidade\" [icon]=\"entityService.getIcon('Unidade')\" [label]=\"lex.translate('Unidade')\" [template]=\"tabUnidade\">\r\n        <ng-template #tabUnidade>\r\n            <h5>{{unidade.sigla}} - {{unidade.nome}}</h5>\r\n            <div *ngIf=\"loading\" class=\"d-flex justify-content-center my-2\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                    <span class=\"visually-hidden\"></span>\r\n                </div>\r\n            </div>\r\n            <collapse-card *ngFor=\"let usuario of usuarios\" [data]=\"usuario\" [titleTemplate]=\"usuarioCardTitle\" [template]=\"usuarioCard\">\r\n                <ng-template let-data=\"data\" #usuarioCardTitle>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-2\">\r\n                            <profile-picture [url]=\"data.url_foto\" [size]=\"40\" [hint]=\"data.nome\"></profile-picture>\r\n                        </div>\r\n                        <div class=\"col-10\">\r\n                            <strong>{{data.nome || \"\"}}</strong><br>\r\n                            <small>{{data.apelido || \"\"}}</small>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template let-data=\"data\" #usuarioCard>\r\n                    <plano-trabalho-list-accordeon [usuarioId]=\"data.id\"></plano-trabalho-list-accordeon>\r\n                </ng-template>\r\n            </collapse-card>\r\n        </ng-template>\r\n    </tab>\r\n    <tab key=\"USUARIO\" [icon]=\"entityService.getIcon('Usuario')\" [label]=\"lex.translate('Usurio')\" [template]=\"tabUsuario\">\r\n        <ng-template #tabUsuario>\r\n            <separator [control]=\"form!.controls.arquivados\" [title]=\"'Mostrar ' + lex.translate('Planos de trabalho') + ' arquivados?'\"></separator>\r\n            <plano-trabalho-list-accordeon [usuarioId]=\"auth.usuario!.id\" [arquivados]=\"form!.controls.arquivados.value\"></plano-trabalho-list-accordeon>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form-termo',\r\n  templateUrl: './plano-trabalho-form-termo.component.html',\r\n  styleUrls: ['./plano-trabalho-form-termo.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormTermoComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public processo?: SeiKeys;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos\", \"atividades.atividade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio: {default: new Date()},\r\n      data_fim: {default: new Date()},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      vinculadas: {default: true},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.selectedEntity && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.plano_trabalho.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        /* TODO Gerar documento do TCR\r\n        termo: this.termo!.conteudo,\r\n        atividades_termo_adesao: this.termo!.atividades.map((x: { nome: string; }) => this.util.removeAcentos(x.nome.toLowerCase())),*/\r\n        codigo_tipo_documento: (this.tipoDocumento?.selectedEntity as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"TCR\") + ' ' + this.lex.translate(\"do Plano de Trabalho\") + ': ' + (entity?.usuario?.nome || \"\");\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" initialFocus=\"programa_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <separator [title]=\"lex.translate('Plano de trabalho')\" collapse [collapsed]=\"false\">\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"6\" disabled controlName=\"programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-search #usuario [size]=\"6\" disabled  controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search #unidade [size]=\"5\" disabled controlName=\"unidade_id\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-search #tipoModalidade disabled [size]=\"3\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            <input-text numbers disabled [size]=\"2\" label=\"% prod.\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Ser descontado do ' + lex.translate('tempo pactuado')+')'\" [attr.maxlength]=250></input-text>\r\n            <input-display [size]=\"2\" label=\"H. Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-display>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime [size]=\"3\" disabled label=\"Incio\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Incio da Vigncia do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"3\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" labelInfo=\"Final da Vigncia do Programa\"></input-datetime>\r\n            <input-workload [size]=\"3\" disabled [unit]=\"formaContagemCargaHoraria\" label=\"C. Horria\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" labelInfo=\"Carga horria do usurio\"></input-workload>\r\n            <input-display [size]=\"3\" label=\"H. Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas teis de trabalho no perodo de vigncia considerando a carga horria, feriados e fins de semana\"></input-display>\r\n        </div>\r\n    </separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"3\" disabled label=\"Data e hora\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de cadastro do termo\"></input-datetime>\r\n        <input-text [label]=\"'Nmero ' + lex.translate('Processo')\" [size]=\"3\" controlName=\"numero_processo\" [control]=\"form!.controls.numero_processo\" disabled labelInfo=\"Nmero do processo, com a formatao de origem\" [attr.maxlength]=250></input-text>\r\n        <input-search [size]=\"4\" #tipoDocumento [disabled]=\"!form!.controls.numero_processo.value?.length ? 'true' : undefined\" controlName=\"tipo_documento_id\" [dao]=\"tipoDocumentoDao\" required></input-search>\r\n        <input-switch label=\"Vinculadas\" [disabled]=\"entity?.atividades?.length ? 'true' : undefined\" [size]=\"2\" controlName=\"vinculadas\" [control]=\"form!.controls.vinculadas\" (change)=\"onVinculadasChange($event)\" labelInfo=\"Se inclui as atividades das unidades vinculadas a unidade do plano\"></input-switch>\r\n    </div>\r\n    <!--separator title=\"Pr-visualizao do termo de adeso\" collapse [collapsed]=\"true\">\r\n        <plano-termo-adesao #termo [plano]=\"entity\" [vinculadas]=\"!!form?.controls?.vinculadas?.value\"></plano-termo-adesao>\r\n    </separator/-->\r\n</editable-form>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { DocumentoService } from 'src/app/modules/uteis/documentos/documento.service';\r\nimport { DocumentosComponent } from 'src/app/modules/uteis/documentos/documentos.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { TemplateDataset, TemplateService } from 'src/app/modules/uteis/templates/template.service';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form',\r\n  templateUrl: './plano-trabalho-form.component.html',\r\n  styleUrls: ['./plano-trabalho-form.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('atividade', { static: false }) public atividade?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @ViewChild('documentos', { static: false }) public documentos?: DocumentosComponent;\r\n\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public documentoService: DocumentoService;\r\n  public templateService: TemplateService;\r\n  public utilService: UtilService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public horasTotais?: Efemerides;\r\n  public horasParciais?: Efemerides;\r\n  public planoDataset: TemplateDataset[];\r\n  public joinPrograma: string[];\r\n  public entregas: LookupItem[] = [];\r\n  public planoTrabalho?: PlanoTrabalho;\r\n  public datasource: any;\r\n  public template?: Template;\r\n  public editingId?: string;\r\n  public gestoresUnidadeExecutora: string[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\r\n      \"unidade.entidade\", \r\n      \"entregas.entrega\", \r\n      \"entregas.plano_entrega_entrega:id,plano_entrega_id\", \r\n      \"usuario\", \r\n      \"programa.template_tcr\", \r\n      \"tipo_modalidade\", \r\n      \"documento\", \r\n      \"documentos.assinaturas.usuario:id,nome,apelido\", \r\n      \"entregas.plano_entrega_entrega.entrega\",\r\n      \"entregas.plano_entrega_entrega.plano_entrega.unidade:id,nome,sigla\"\r\n    ];\r\n    this.joinPrograma = [\"template_tcr\"];\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.documentoService = injector.get<DocumentoService>(DocumentoService);\r\n    this.templateService = injector.get<TemplateService>(TemplateService);\r\n    this.utilService = injector.get<UtilService>(UtilService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.modalWidth = 1300;\r\n    this.planoDataset = this.dao!.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: { default: \"\" },\r\n      tempo_total: { default: \"\" },\r\n      tempo_proporcional: { default: \"\" },\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      usuario_id: { default: \"\" },\r\n      unidade_id: { default: \"\" },\r\n      programa_id: { default: \"\" },\r\n      documento_id: { default: null },\r\n      documentos: { default: [] },\r\n      atividades: { default: [] },\r\n      entregas: { default: [] },\r\n      tipo_modalidade_id: { default: \"\" },\r\n      forma_contagem_carga_horaria: { default: \"DIA\" },\r\n      editar_texto_complementar_unidade: { default: false },\r\n      editar_texto_complementar_usuario: { default: false },\r\n      unidade_texto_complementar: { default: \"\" },\r\n      usuario_texto_complementar: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length - 1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n    this.buscaGestoresUnidadeExecutora(this.entity?.unidade ?? null);\r\n  }\r\n\r\n  public atualizarTcr() {\r\n    this.entity = this.loadEntity();\r\n    let textoUsuario = this.form!.controls.usuario_texto_complementar.value;\r\n    let textoUnidade = this.form!.controls.unidade_texto_complementar.value;\r\n    let documento = this.planoTrabalhoService.atualizarTcr(this.planoTrabalho!, this.entity!, textoUsuario, textoUnidade);\r\n    this.form?.controls.documento_id.setValue(documento?.id);\r\n    this.form?.controls.documentos.setValue(this.entity!.documentos);\r\n    this.datasource = documento?.datasource || {};\r\n    this.template = this.entity.programa?.template_tcr;\r\n    this.editingId = [\"ADD\", \"EDIT\"].includes(documento?._status || \"\") ? documento!.id : undefined;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['unidade_id', 'programa_id', 'usuario_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    } else if (['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n      result = \"Valor no pode ser zero.\";\r\n    } else if (['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Invlido\";\r\n    } else if (controlName == 'data_fim' && this.util.isDataValid(this.form?.controls.data_inicio.value) && this.util.asTimestamp(control.value) < this.util.asTimestamp(this.form!.controls.data_inicio.value)) {\r\n      result = \"Menor que o incio\";\r\n    } else if (this.programa && controlName == 'data_inicio' && (control.value as Date).getTime() < this.programa!.selectedEntity?.data_inicio.getTime()) {\r\n      result = \"Menor que programa\";\r\n    } else if (this.programa && controlName == 'data_fim' && (control.value as Date).getTime() > this.programa!.selectedEntity?.data_fim.getTime()) {\r\n      result = \"Maior que programa\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = async (form?: FormGroup) => {\r\n    let result = \"\";\r\n    return result;\r\n    // TODO:\r\n    // Validar se as entregas pertencem ao plano de entregas da unidade\r\n  };\r\n\r\n  public onUnidadeSelect(selected: SelectItem) {\r\n    let unidade = this.unidade?.selectedEntity as Unidade;\r\n    this.entity!.unidade = unidade;\r\n    this.entity!.unidade_id = unidade.id;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(unidade?.texto_complementar_plano || \"\");\r\n    this.unidadeDao.getById(unidade.id, ['gestor:id,usuario_id','gestor_substituto:id,usuario_id','gestor_delegado:id,usuario_id']).then( unidade => {\r\n      this.buscaGestoresUnidadeExecutora(unidade);\r\n    });\r\n  }\r\n\r\n  public onProgramaSelect(selected: SelectItem) {\r\n    let programa = selected.entity as Programa;\r\n    this.entity!.programa_id = programa.id;\r\n    this.entity!.programa = programa;\r\n    this.form?.controls.data_inicio.updateValueAndValidity();\r\n    this.form?.controls.data_fim.updateValueAndValidity();\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.form!.controls.usuario_texto_complementar.setValue((selected.entity as Usuario)?.texto_complementar_plano || \"\");\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onCargaHorariaChenge(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public calculaTempos() {\r\n    const inicio = this.form?.controls.data_inicio.value;\r\n    const fim = this.form?.controls.data_fim.value;\r\n    const carga = this.form?.controls.carga_horaria.value || 8;\r\n    const usuario = this.usuario?.selectedEntity as Usuario;\r\n    const unidade = this.unidade?.selectedEntity as Unidade;\r\n    if (usuario && unidade && this.util.isDataValid(inicio) && this.util.isDataValid(fim) && this.util.asTimestamp(inicio) < this.util.asTimestamp(fim)) {\r\n      this.calendar.loadFeriadosCadastrados(unidade.id).then((feriados) => {\r\n        this.horasTotais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], []);\r\n        this.horasParciais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], usuario.afastamentos);\r\n        this.form?.controls.tempo_total.setValue(this.horasTotais.tempoUtil);\r\n        this.form?.controls.tempo_proporcional.setValue(this.horasParciais.tempoUtil);\r\n      });\r\n    }\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    this.planoTrabalho = new PlanoTrabalho(entity);\r\n    await Promise.all([\r\n      this.calendar.loadFeriadosCadastrados(entity.unidade_id),\r\n      this.usuario?.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.unidade?.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.programa?.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    /*let documento = entity.documentos.find(x => x.id == entity.documento_id);\r\n    if(documento) this._datasource = documento.datasource;*/\r\n    this.calculaTempos();\r\n    this.atualizarTcr();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if (this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new PlanoTrabalho();\r\n      this.entity.carga_horaria = this.auth.entidade?.carga_horaria_padrao || 8;\r\n      this.entity.forma_contagem_carga_horaria = this.auth.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n    }\r\n    await this.loadData(this.entity, this.form!);\r\n  }\r\n\r\n  /* Cria um objeto Plano baseado nos dados do formulrio */\r\n  public loadEntity(): PlanoTrabalho {\r\n    let plano: PlanoTrabalho = this.util.fill(new PlanoTrabalho(), this.entity!);\r\n    plano = this.util.fillForm(plano, this.form!.value);\r\n    plano.usuario = (this.usuario!.selectedEntity || this.entity?.usuario) as Usuario;\r\n    plano.unidade = (this.unidade?.selectedEntity || this.entity?.unidade) as Unidade;\r\n    plano.programa = (this.programa?.selectedEntity || this.entity?.programa) as Programa;\r\n    plano.tipo_modalidade = (this.tipoModalidade!.selectedEntity || this.entity?.tipo_modalidade) as TipoModalidade;\r\n    return plano;\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<PlanoTrabalho | boolean> {\r\n    //let plano = this.loadEntity();\r\n    /* Atualiza o documento */\r\n    this.atualizarTcr();\r\n    /* Confirma dados do documento */\r\n    this.documentos?.saveData();\r\n    this.entity!.documentos = this.entity!.documentos.filter((documento: Documento) => {\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(documento._status || \"\");\r\n    });\r\n    /* Salva separadamente as informaes do plano */\r\n    this.submitting = true;\r\n    try {\r\n      let requests: Promise<any>[] = [this.dao!.save(this.entity!, this.join)];\r\n      if (this.form!.controls.editar_texto_complementar_unidade.value) requests.push(this.unidadeDao.update(this.entity!.unidade_id, { texto_complementar_plano: this.form!.controls.unidade_texto_complementar.value }));\r\n      if (this.form!.controls.editar_texto_complementar_usuario.value) requests.push(this.usuarioDao.update(this.entity!.usuario_id, { texto_complementar_plano: this.form!.controls.usuario_texto_complementar.value }));\r\n      let responses = await Promise.all(requests);\r\n      this.entity = responses[0] as PlanoTrabalho;\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public onTabSelect(tab: LookupItem) {\r\n    if (tab.key == \"TERMO\") this.atualizarTcr();\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"Plano de Trabalho\") + ': ' + (entity?.usuario?.apelido || \"\");\r\n  }\r\n\r\n  public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if (this.isTermos && this.planoTrabalhoService.needSign(this.entity, documento)) {\r\n      result.push({ hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({ hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({ title: \"Termo de adeso\", modalWidth: 1000 }, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  public async signDocumento(documento: Documento) {\r\n    await this.documentoService.sign([documento]);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public onFormaContagemCargaHorariaChange(unit: UnitWorkload) {\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unit == \"day\" ? \"DIA\" : unit == \"week\" ? \"SEMANA\" : \"MES\");\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public buscaGestoresUnidadeExecutora(unidade: Unidade | null){\r\n    if (unidade) [unidade.gestor?.usuario_id, unidade.gestor_substituto?.usuario_id, unidade!.gestor_delegado?.usuario_id].forEach(gestor => {\r\n      if (gestor) this.gestoresUnidadeExecutora.push(gestor);\r\n    });\r\n    return this.gestoresUnidadeExecutora;\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" initialFocus=\"plano_entrega_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\" [select]=\"onTabSelect.bind(this)\">\r\n        <tab key=\"DADOS\" label=\"Dados\">\r\n            <div class=\"row\">\r\n                <!-- (RI_PTR_1) No formulrio de incluso/edio de um plano de trabalho, o input-search de unidade, programa e usuario devem ficar desabilitados nas edies e habilitado apenas nas incluses; -->\r\n                <input-search #unidade [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (select)=\"onUnidadeSelect($event)\"></input-search>\r\n                <input-search #programa [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"programa_id\" [join]=\"joinPrograma\" [dao]=\"programaDao\" (select)=\"onProgramaSelect($event)\"></input-search>\r\n                <input-search #usuario [size]=\"4\" required controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos']\" (select)=\"onUsuarioSelect($event)\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-datetime [size]=\"3\" label=\"Incio\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" (change)=\"onDataInicioChange($event)\" labelInfo=\"'Incio da Vigncia do '+ lex.translate('Plano de trabalho')\"  required></input-datetime>\r\n                <input-datetime [size]=\"3\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" (change)=\"onDataFimChange($event)\" labelInfo=\"'Final da Vigncia do ' +lex.translate('Plano de trabalho')\"  required></input-datetime>\r\n                <input-search #tipoModalidade [size]=\"6\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"  required></input-search>\r\n            </div>\r\n            <ng-container *ngIf=\"tipoModalidade!.selectedEntity?.plano_trabalho_calcula_horas\">\r\n                <div class=\"row\">\r\n                    <input-workload [size]=\"4\" [unit]=\"formaContagemCargaHoraria\" label=\"Carga Horria\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [unitChange]=\"onFormaContagemCargaHorariaChange.bind(this)\" (change)=\"onCargaHorariaChenge($event)\" labelInfo=\"Carga horria do usurio (Mx.: diria 24 horas; semana 24*5=240 horas; mensal 24*20=480 horas)\"  required></input-workload>\r\n                    <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas teis de trabalho no perodo de vigncia considerando a carga horria, feriados e fins de semana\"></input-timer>\r\n                    <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-timer>\r\n                </div>\r\n                <separator *ngIf=\"horasTotais\" title=\"Clculos das horas totais\" collapse>\r\n                    <calendar-efemerides [efemerides]=\"horasTotais\" [partial]=\"false\"></calendar-efemerides>\r\n                </separator>\r\n                <separator *ngIf=\"horasParciais\" title=\"Clculos das horas parciais\" collapse>\r\n                    <calendar-efemerides [efemerides]=\"horasParciais\"></calendar-efemerides>\r\n                </separator>\r\n            </ng-container>\r\n            <separator [title]=\"lex.translate('Entregas') + lex.translate(' do plano de trabalho')\">\r\n                <top-alert *ngIf=\"!form!.controls.programa_id.value?.length || !form!.controls.unidade_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega') + ' neste ' + lex.translate('Plano de Trabalho') + ',  necessrio selecionar ' + lex.translate('a Unidade') + ' e ' + lex.translate('o Programa') + '!'\"></top-alert>\r\n                <div *ngIf=\"form!.controls.programa_id.value?.length && form!.controls.unidade_id.value?.length\">\r\n                    <plano-trabalho-list-entrega noPersist [disabled]=\"formDisabled\" [entity]=\"entity\"></plano-trabalho-list-entrega>\r\n                </div>\r\n            </separator>\r\n        </tab>\r\n        <!--tab key=\"ENTREGAS\" [label]=\"lex.translate('Entrega', true)\">\r\n            <top-alert *ngIf=\"!form!.controls.plano_entrega_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega',true) + ' neste ' + lex.translate('Plano de Trabalho') + ',  necessrio selecionar um ' + lex.translate('Plano de Entregas') + '!'\"></top-alert>\r\n            <div *ngIf=\"form!.controls.plano_entrega_id.value?.length\">\r\n                <editable-form [form]=\"formEntregas!\"  [noButtons]=\"'true'\">\r\n                    <plano-trabalho-list-entrega noPersist [entity]=\"entity\" [entregasDoPlanoEntrega]=\"entregas\"></plano-trabalho-list-entrega>\r\n                </editable-form>\r\n            </div>\r\n        </tab//-->\r\n        <tab *ngIf=\"checkFilled(['usuario_id'])\" key=\"MENSAGENS\" label=\"Texto Complementar\">\r\n            <separator [title]=\"'Texto complementar da '+ lex.translate('unidade')\">\r\n                <input-switch controlName=\"editar_texto_complementar_unidade\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar na '+ lex.translate('unidade')\"></input-switch>\r\n                <input-editor controlName=\"unidade_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_unidade.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n            <separator title=\"Texto complementar do usuario\">\r\n                <input-switch controlName=\"editar_texto_complementar_usuario\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar do '+ lex.translate('usurio')\"></input-switch>\r\n                <input-editor controlName=\"usuario_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_usuario.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n        </tab>\r\n        <tab *ngIf=\"checkFilled(['usuario_id', 'programa_id', 'tipo_modalidade_id'])\" key=\"TERMO\" label=\"Termo\">\r\n            <!--top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opo Termos de adeso na tela de listagem, ou utilize o Sei\"></top-alert/-->\r\n            <div clss=\"row\">\r\n                <documentos #documentos [entity]=\"entity\" [disabled]=\"formDisabled\" noPersist [cdRef]=\"cdRef\" [needSign]=\"planoTrabalhoService.needSign\" [extraTags]=\"planoTrabalhoService.extraTags\" especie=\"TCR\" \r\n                    [editingId]=\"formDisabled ? undefined : editingId\" [datasource]=\"datasource\" [template]=\"programa?.selectedEntity?.template_tcr\"></documentos>\r\n            </div>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { AccordionComponent } from 'src/app/components/accordion/accordion.component';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-accordeon',\r\n  templateUrl: './plano-trabalho-list-accordeon.component.html',\r\n  styleUrls: ['./plano-trabalho-list-accordeon.component.scss']\r\n})\r\nexport class PlanoTrabalhoListAccordeonComponent extends PageFrameBase {\r\n  @ViewChild('accordion', { static: false }) public accordion?: AccordionComponent;\r\n  @Input() usuarioId?: string;\r\n  @Input() set arquivados(value: boolean) {\r\n    if(this._arquivados != value) {\r\n      this._arquivados = value;\r\n      if(this.viewInit) this.loadData(this.entity!, this.form);\r\n    }\r\n  }\r\n  get arquivados(): boolean {\r\n    return this._arquivados;\r\n  }\r\n\r\n  public selectedIndex: number = -1;\r\n  public dao?: PlanoTrabalhoDaoService;\r\n  public planos: PlanoTrabalho[] = [];\r\n\r\n  private _arquivados: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.accordion!.loading = true;\r\n    try {\r\n      let dados = await this.dao!.getByUsuario(this.usuarioId!, this.arquivados);\r\n      let agora = (new Date()).getTime();\r\n      let self = this;\r\n      this.planos = dados.planos;\r\n      for(var i = 0; i < this.planos.length; i++) {\r\n        if(this.util.asTimestamp(this.planos[i].data_inicio) <= agora && agora <= this.util.asTimestamp(this.planos[i].data_fim) && [\"ATIVO\", \"CONCLUIDO\"].includes(this.planos[i].status)) {\r\n          this.selectedIndex = i;\r\n        }\r\n      }\r\n    } finally {\r\n      this.accordion!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public getPlanoBadges(plano: PlanoTrabalho): BadgeButton[] {\r\n    let result: BadgeButton[] = [];\r\n    let concluidos = plano.consolidacoes.filter(x => x.status == \"CONCLUIDO\");\r\n    let avaliados = plano.consolidacoes.filter(x => x.status == \"AVALIADO\");\r\n    if(concluidos.length) {\r\n      const concluido = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"CONCLUIDO\");\r\n      result.push({\r\n        icon: concluido?.icon,\r\n        label: concluido?.value,\r\n        color: concluido?.color,\r\n        textValue: concluidos.length.toString()\r\n      });\r\n    }\r\n    if(avaliados.length) {\r\n      const avaliado = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"AVALIADO\");\r\n      result.push({\r\n        icon: avaliado?.icon,\r\n        label: avaliado?.value,\r\n        color: avaliado?.color,\r\n        textValue: avaliados.length.toString()\r\n      });\r\n    }\r\n    if(JSON.stringify(plano._metadata?.badges) != this.JSON.stringify(result)) {\r\n      plano._metadata = Object.assign(plano._metadata || {}, { badges: result });\r\n    }\r\n    return plano._metadata.badges;\r\n  }\r\n\r\n}\r\n","<accordion #accordion [items]=\"planos\" [selectedIndex]=\"selectedIndex\" [titleTemplate]=\"planoTrabalhoSectionTitle\" [template]=\"planoTrabalhoSection\">\r\n    <ng-template let-item=\"item\" #planoTrabalhoSectionTitle>\r\n        <div class=\"row w-100\">\r\n            <div class=\"col-md-1\">{{'#' + item.numero}}</div>\r\n            <div class=\"col-md-4\">\r\n                <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"item.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + item.unidade?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"item.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"item.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n                {{dao!.getDateFormatted(item.data_inicio)+\" at \"+dao!.getDateFormatted(item.data_fim)}}\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge *ngFor=\"let badge of getPlanoBadges(item)\" [badge]=\"badge\"></badge>\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge [label]=\"lookup.getValue(lookup.PLANO_TRABALHO_STATUS, item.status)\" [icon]=\"lookup.getIcon(lookup.PLANO_TRABALHO_STATUS, item.status)\" [color]=\"lookup.getColor(lookup.PLANO_TRABALHO_STATUS, item.status)\"></badge>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template let-item=\"item\" #planoTrabalhoSection>\r\n        <plano-trabalho-consolidacao-list [entity]=\"item\"></plano-trabalho-consolidacao-list>\r\n    </ng-template>\r\n</accordion>","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalhoEntregaDaoService } from 'src/app/dao/plano-trabalho-entrega-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { PlanoEntregaEntrega } from 'src/app/models/plano-entrega-entrega.model';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-entrega',\r\n  templateUrl: './plano-trabalho-list-entrega.component.html',\r\n  styleUrls: ['./plano-trabalho-list-entrega.component.scss']\r\n})\r\nexport class PlanoTrabalhoListEntregaComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('origem', { static: false }) public origem?: InputSelectComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) { if (this._disabled != value) this._disabled = value; } get disabled(): boolean { return this._disabled; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() cdRef: ChangeDetectorRef;\r\n\r\n  public get items(): PlanoTrabalhoEntrega[] {\r\n    if (!this.gridControl.value) this.gridControl.setValue(new PlanoTrabalho());\r\n    if (!this.gridControl.value.entregas) this.gridControl.value.entregas = [];\r\n    return this.gridControl.value.entregas;\r\n  }\r\n  public options: ToolbarButton[] = [];\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoEntregaDao?: PlanoEntregaDaoService;\r\n  public peeDao?: PlanoEntregaEntregaDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public totalForcaTrabalho: number = 0;\r\n  public entregas: LookupItem[] = [];\r\n\r\n  private _disabled: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoEntregaDaoService>(PlanoTrabalhoEntregaDaoService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.peeDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.join = [\"entrega\", \"plano_entrega_entrega.entrega\", \"plano_entrega_entrega.plano_entrega:id,unidade_id\", \"plano_entrega_entrega.plano_entrega.unidade:id,sigla\"];\r\n    this.form = this.fh.FormBuilder({\r\n      origem: { default: null },\r\n      orgao: { default: null },\r\n      descricao: { default: \"\" },\r\n      forca_trabalho: { default: 1 },\r\n      plano_trabalho_id: { default: null },\r\n      plano_entrega_id: { default: null },\r\n      plano_entrega_entrega_id: { default: null }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para a validao dos campos do formulrio, por ocasio da edio ou insero de itens.\r\n   * @param control \r\n   * @param controlName \r\n   * @returns \r\n   */\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && control.value == 1) return result;\r\n    if (['descricao', 'forca_trabalho'].indexOf(controlName) >= 0 && !control.value?.length) result = \"Obrigatrio!\";\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && (control.value < 1 || control.value > 100)) result = \"Deve estar entre 1 e 100\";\r\n    if (['plano_entrega_entrega_id'].indexOf(controlName) >= 0) {\r\n      if (['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(this.form?.controls.origem.value) && !control.value) result = \"Obrigatrio!\";\r\n      if (!!this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)) result = \"Esta entrega est em duplicidade!\"; /* (*2) */\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateEntregas(): string | undefined {\r\n    let planoInterval = {start: this.entity!.data_inicio, end: this.entity!.data_fim};\r\n    for(let entrega of this.items) {\r\n      let entregaPlano = entrega.plano_entrega_entrega;\r\n      // valida as datas das entregas quando vinculado a uma entrega do plano de entrega\r\n      if(entregaPlano) {\r\n        let entregaDataFim = entregaPlano!.data_fim ? entregaPlano!.data_fim : (entregaPlano!.data_inicio.getTime() <= this.entity!.data_fim.getTime() ? this.entity!.data_fim : undefined);\r\n        let entregaInterval = {start: entregaPlano!.data_inicio, end: entregaPlano!.data_fim || entregaPlano!.data_inicio};\r\n        if(!entregaDataFim || !this.util.intersection([entregaInterval, planoInterval])) {\r\n          return this.lex.translate(\"Entrega\") + \" \" + entregaPlano!.descricao + \" possui datas incompatveis (incio \" + \r\n            this.util.getDateFormatted(entregaPlano!.data_inicio) + (entregaPlano!.data_fim ? \"e fim \" + this.util.getDateFormatted(entregaPlano!.data_fim) : \"\") + \")\";\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado na inicializao do componente. Neste momento so carregadas as entregas do catlogo e as entregas da mesma unidade do plano de trabalho,\r\n   * visto que esses itens no se alteram durante a vida do componente e podero ser utilizados durante sua utilizao.\r\n   */\r\n  async ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity = this.metadata?.entity || this.entity;\r\n    this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = undefined;\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para inserir uma entrega de plano de trabalho no grid, seja este componente persistente ou no.\r\n   * @returns \r\n   */\r\n  public async addEntrega() {\r\n    return Object.assign(new PlanoTrabalhoEntrega(), {\r\n      _status: \"ADD\",\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity?.id\r\n    }) as IIndexable;\r\n  }\r\n\r\n  /**\r\n   * Mtodo utilizado durante a incluso/alterao de uma entrega de plano de trabalho no grid, seja este componente persistente ou no\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadEntrega(form: FormGroup, row: any) {\r\n    let entrega: PlanoTrabalhoEntrega = row;\r\n    form.controls.descricao.setValue(row.descricao);\r\n    form.controls.forca_trabalho.setValue(row.forca_trabalho);\r\n    form.controls.plano_trabalho_id.setValue(row.plano_trabalho_id);\r\n    form.controls.plano_entrega_entrega_id.setValue(null);\r\n    form.controls.orgao.setValue(null);\r\n    if (entrega._status == \"ADD\") { //  uma nova entrega\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n    } else if (entrega.plano_entrega_entrega?.plano_entrega?.unidade_id == this.entity!.unidade_id) {\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (entrega.plano_entrega_entrega) {\r\n      form.controls.origem.setValue('OUTRA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (!!entrega.orgao?.length) { \r\n      form.controls.origem.setValue('OUTRO_ORGAO');\r\n      form.controls.orgao.setValue(entrega.orgao);\r\n    } else {\r\n      form.controls.origem.setValue('SEM_ENTREGA');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para a excluso de uma entrega de plano de trabalho do grid, seja este componente persistente ou no. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeEntrega(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if (confirm) {\r\n      this.loading = true;\r\n      try {\r\n        this.isNoPersist ? Object.assign(row, { _status: \"DELETE\" }) : await this.dao?.delete(row.id);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho - ((row as PlanoTrabalhoEntrega).forca_trabalho * 1)) * 100) / 100;\r\n      return this.isNoPersist ? false : true; // (*3)\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado no salvamento de uma entrega do plano de trabalho do grid, seja este componente persistente ou no.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveEntrega(form: FormGroup, row: any) {\r\n\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = row as PlanoTrabalhoEntrega;\r\n    this.entity!._metadata.novaEntrega.plano_entrega_entrega_id = this.form?.controls.plano_entrega_entrega_id.value;\r\n    this.entity!._metadata.novaEntrega.orgao = this.form?.controls.orgao.value;\r\n    this.entity!._metadata.novaEntrega.descricao = this.form?.controls.descricao.value;\r\n    this.entity!._metadata.novaEntrega.forca_trabalho = this.form?.controls.forca_trabalho.value;\r\n    this.loading = true;\r\n    try {\r\n      if (!this.isNoPersist) {\r\n        this.entity!._metadata.novaEntrega = await (this.dao as PlanoTrabalhoEntregaDaoService).save(this.entity!._metadata.novaEntrega, this.join);\r\n        // TODO: Verificar isso (Foi feito uma modificao no grid para isso no ser mais necessrio)\r\n        // if (this.grid?.adding) this.grid!.items[this.grid!.items.length - 1].id = '';  // (*4)\r\n      }\r\n    } catch (e: any) {\r\n      this.error(e.message ? e.message : e.toString() || e);\r\n    } finally {\r\n      this.entity!._metadata.novaEntrega.plano_entrega_entrega = this.entrega?.selectedItem?.data || null;\r\n      row.forca_trabalho = this.form?.controls.forca_trabalho.value * 1;\r\n      this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n      this.loading = false;\r\n    }\r\n    return this.entity!._metadata.novaEntrega;\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para somar os percentuais das foras de trabalho do array de entregas passado como parmetro.\r\n   * @param entregas Array de entregas do plano de trabalho\r\n   * @returns \r\n   */\r\n  public somaForcaTrabalho(entregas: PlanoTrabalhoEntrega[] = []): number {\r\n    return entregas.map(x => x.forca_trabalho * 1).reduce((a, b) => a + b, 0);\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para carregar as entregas da unidade\r\n   * @param idPlanoOuPlano ID do plano de entregas ou o seu objeto completo.\r\n   */\r\n  public async carregarEntregas(idPlanoOuPlano: string | PlanoEntrega): Promise<void> {\r\n    let planoEntrega = typeof idPlanoOuPlano == 'string' ? await this.planoEntregaDao!.getById(idPlanoOuPlano, [\"entregas.entrega:id,nome\", \"unidade\"]) : idPlanoOuPlano;\r\n    let planoEntregaComUnidade = {id: planoEntrega?.id, unidade_id: planoEntrega?.unidade_id, unidade: planoEntrega?.unidade};\r\n    this.entregas = planoEntrega?.entregas.map(epe => Object.assign({}, { key: epe.id, value: epe.descricao || epe.entrega?.nome || \"Deconhecido\", data: Object.assign(epe, {plano_entrega: planoEntregaComUnidade}) })) || [];\r\n    if(!this.entregas.find(x => x.key == this.form!.controls.plano_entrega_entrega_id.value)) this.form!.controls.plano_entrega_entrega_id.setValue(null);\r\n  }\r\n\r\n  /* ---------  TRATAMENTO DOS EVENTOS ----------- */\r\n\r\n  public async onOrigemChange(row: any) {\r\n    let value = this.form!.controls.origem.value;\r\n    this.cdRef.detectChanges();\r\n    if (value == 'OUTRO_ORGAO') {\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if(value == 'SEM_ENTREGA') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } if (value == 'PROPRIA_UNIDADE') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.loading = true;\r\n      try {\r\n        let planosEntregas = await this.planoEntregaDao!.query({where: [[\"unidade_id\", \"==\", this.entity!.unidade_id], [\"status\", \"==\", \"ATIVO\"], [\"data_inicio\", \"<=\", this.entity!.data_fim], [\"data_fim\", \">=\", this.entity!.data_inicio]]}).asPromise();\r\n        if(planosEntregas.length == 1) {\r\n          this.form?.controls.plano_entrega_id.setValue(planosEntregas[0].id);\r\n        } else if(this.planoEntrega?.selectedEntity?.unidade_id != this.entity!.unidade_id) {\r\n          this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    } if (value == 'OUTRA_UNIDADE') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n    }\r\n  }\r\n\r\n  public onPlanoEntregaChange(event: Event) {\r\n    let planoEntrega = this.planoEntrega?.selectedEntity as PlanoEntrega;\r\n    this.carregarEntregas(planoEntrega);\r\n  }\r\n\r\n  public onEntregaChange(event: Event) {\r\n    let entrega = this.entrega!.selectedItem?.data as PlanoEntregaEntrega;\r\n    if(!this.form!.controls.descricao.value?.length) {\r\n      this.form!.controls.descricao.setValue(entrega?.descricao || \"\");\r\n    }\r\n  }\r\n\r\n  public onForcaTrabalhoChange(row: any) {\r\n    let index = this.items.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.totalForcaTrabalho = Math.round((this.somaForcaTrabalho(this.grid?.items as PlanoTrabalhoEntrega[]) - (this.items[index].forca_trabalho * 1) + (this.form?.controls.forca_trabalho.value * 1)) * 100) / 100;\r\n  }\r\n}\r\n\r\n/*\r\nTESTES\r\n\r\n                                                  GRID PERSISTENTE                      GRID NO-PERSISTENTE\r\n                                              Fluxo Feliz    Validaes                Fluxo Feliz    Validaes\r\nIncluso Entrega Catlogo                          \r\nIncluso Entrega Mesma Unidade                     \r\nIncluso Entrega Outra Unidade                     \r\nAlterao Entrega Catlogo                         \r\nAlterao Entrega Mesma Unidade                    \r\nAlterao Entrega Outra Unidade                    \r\nCancelamento Entrega Catlogo                      \r\nCancelamento Entrega Mesma Unidade                 \r\nCancelamento Entrega Outra Unidade                 \r\nExcluso Entrega Catlogo                          \r\nExcluso Entrega Mesma Unidade                     \r\nExcluso Entrega Outra Unidade                     \r\n\r\n*/\r\n\r\n/*\r\nOBSERVAES:\r\n\r\n(*2)  this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)\r\nFiltra as entregas da mesma unidade do plano de trabalho excluindo a entrega que est sendo editada. Em seguida conta aquelas que possuem o mesmo ID da que est sendo editada e dessa forma o resultado deve ser igual a 0, caso contrrio a entrega editada\r\nj existe no grid.\r\n\r\n(*3)  return this.isNoPersist ? false : true;\r\nAps confirmada a remoo pelo usurio, a entrega  setada com _status = \"DELETE\" e  excluda da tela e sua confirmao  retornada para o mtodo onDeleteItem() do gridComponent, que a excluir tambm dos items do grid.\r\nEntretanto, quando se trata de um grid no persistente, ela no deve ser excluda dos items do grid, pois sua excluso s se efetivar quando entity for salva, levando\r\ntodas as suas entregas para o back-end, que finalmente excluir as que possurem _status = \"DELETE\".\r\n\r\n(*4)  if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';\r\nNo caso de o componente ser 'persistente', essa linha apaga o ID que foi criado pelo banco de dados permitindo ao mtodo saveItem do grid.component localiz-lo na sua lista de items para atualizar suas informaes na tela.\r\n\r\n(*5)  if(!this.entity?.id?.length) return this.entregasPlanoEntrega;\r\nQuando o componente for chamado por um plano de trabalho (entity) que j existe, no poder haver alterao no seu plano de entregas, portanto as entregas da mesma unidade do plano de trabalho sero lidas\r\nna prpria entity. No entanto, quando o plano de trabalho (entity) ainda no existir (!this.entity?.id?.length), essas entregas vo variar de acordo com o plano de entregas\r\nselecionado no inputSelectComponent, e portanto elas sero lidas na varivel que reflete essa escolha (this.entregasPlanoEntrega), e essa reflexo ocorre por causa do bind @Input() set/get entregasPlanoEntrega.\r\n\r\n\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\nID do Plano           |       Pode ser que a 'row'           |  Caractersticas           | inputs | entrega_id \r\nde Trabalho           |                                      |                            | search | plano_entrega_entrega_id\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - J tenha vindo do banco (TIPO I)   |                            | nenhum | um dos dois\r\n                      |   (foi carregada junto com o Plano)  |                            |        |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n  EXISTE              | - Tenho sido salva agora no banco    |                            | um dos | um dos dois\r\n  - Ento o Grid     |   (TIPO II)                          |                            | trs   |\r\n    Persistente       |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Esteja sendo criada agora          | addEntrega loadEntrega     | um dos | nenhum\r\n                      |                                      |                            | trs   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------     \r\n                      | - Seja do TIPO I e esteja sendo      | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | trs   |\r\n                      +--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Seja do TIPO II e esteja sendo     | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | trs   |\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n  NO                 | - J exista nos itens do grid        |                            | nenhum | um dos dois\r\n  EXISTE              |   (foi salva agora, no no banco)    | Possui _status == \"ADD\"    |        |\r\n  - Ento o Grid     |--------------------------------------+----------------------------+--------+------------------------------------\r\n    No-persistente   | - Esteja sendo criada agora          | Possui _status == \"ADD\"    | um dos | nenhum\r\n                      |                                      | addEntrega loadEntrega     | trs   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Tenha acabado de ser criada e      | Possui _status == \"ADD\"    | um dos | um dos dois\r\n                      |   j est sendo editada              | loadEntrega                | trs   |\r\n------------------------------------------------------------------------------------------+--------+------------------------------------\r\n(*) O ADD  inserido pelo mtodo addEntrega e s sai quando persiste no banco e volta\r\n\r\n*/","<grid [items]=\"items\" [form]=\"form!\" noMargin #gridEntregas editable [selectable]=\"false\" [minHeight]=\"items.length > 2 ? 0 : 220\" [join]=\"join\" [groupBy]=\"groupBy\"\r\n    [add]=\"addEntrega.bind(this)\" [remove]=\"removeEntrega.bind(this)\" [save]=\"saveEntrega.bind(this)\" [load]=\"loadEntrega.bind(this)\"\r\n    [hasDelete]=\"!disabled\" [hasEdit]=\"!disabled\" [hasAdd]=\"!disabled\">\r\n    <columns>\r\n        <column [titleTemplate]=\"titleOrigem\" [template]=\"columnOrigem\" [editTemplate]=\"editOrigem\" [verticalAlign]=\"'middle'\" [width]=\"300\" [align]=\"'center'\">\r\n            <ng-template let-header=\"header\" #titleOrigem><div class=\"text-center\"><span><strong>Origem</strong></span></div></ng-template>\r\n            <ng-template let-row=\"row\" #columnOrigem>\r\n                <div class=\"w-100 d-flex justify-content-center\">\r\n                    <div class=\"one-per-line\">\r\n                        <badge [label]=\"planoTrabalhoService.tipoEntrega(row, entity).titulo\" [color]=\"planoTrabalhoService.tipoEntrega(row, entity).cor\"></badge>\r\n                        <badge *ngIf=\"row.plano_entrega_entrega_id?.length\" [label]=\"row.plano_entrega_entrega?.plano_entrega?.unidade?.sigla || 'Desconhecido'\" [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\"></badge>\r\n                        <badge *ngIf=\"row.orgao?.length\" [label]=\"row.orgao\" icon=\"bi bi-box-arrow-down-left\" color=\"warning\"></badge>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editOrigem>\r\n                <input-select #origem controlName=\"origem\" controlName=\"origem\" [control]=\"form!.controls.origem\" [items]=\"lookup.ORIGENS_ENTREGAS_PLANO_TRABALHO\" (change)=\"onOrigemChange(row)\"></input-select>\r\n                <input-search *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" label #planoEntrega [placeholder]=\"'Selecione o ' + lex.translate('Plano de entrega')\" [join]=\"['entregas.entrega:id,nome', 'unidade']\" [where]=\"origem?.value == 'PROPRIA_UNIDADE' ? [['unidade_id', '==', entity?.unidade_id]] : undefined\" [selectParams]=\"origem?.value == 'PROPRIA_UNIDADE' ? {filter: {unidade_id: entity?.unidade_id}} : undefined\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" (change)=\"onPlanoEntregaChange($event)\"></input-search>\r\n                <input-text *ngIf=\"origem?.value == 'OUTRO_ORGAO'\" #orgao controlName=\"orgao\" placeholder=\"rgo\" [attr.maxlength]=250></input-text>\r\n            </ng-template>\r\n        </column>\r\n        <column [maxWidth]=\"350\" [titleTemplate]=\"titleEntrega\" [template]=\"columnEntrega\" [editTemplate]=\"editEntrega\" [verticalAlign]=\"'middle'\">\r\n            <ng-template let-header=\"header\" #titleEntrega><span><strong>Entrega</strong></span></ng-template>\r\n            <ng-template let-row=\"row\" #columnEntrega>\r\n                <small>{{ planoTrabalhoService.tipoEntrega(row, entity).nome }}</small>\r\n                <div *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(planoTrabalhoService.tipoEntrega(row, entity).tipo)\" class=\"w-100\">\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_inicio)\" hint=\"Data de incio\"></badge>\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_fim)\" hint=\"Data de trmino\"></badge>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editEntrega>\r\n                <input-select *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" #entrega nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregas\" (change)=\"onEntregaChange($event)\"></input-select>\r\n                <div *ngIf=\"entrega?.selectedItem\" class=\"w-100\">\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_inicio)\" hint=\"Data de incio\"></badge>\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_fim)\" hint=\"Data de trmino\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column [titleTemplate]=\"titleForcaTrabalho\" [template]=\"columnForcaTrabalho\" [editTemplate]=\"editForcaTrabalho\" [width]=\"125\" [align]=\"'center'\">\r\n            <ng-template let-header=\"header\" #titleForcaTrabalho>\r\n                <div class=\"text-center\">\r\n                    <small><strong>% Fora Trab.</strong></small><br>\r\n                    <small><badge icon=\"bi bi-calculator\" [color]=\"totalForcaTrabalho == 100 ? 'success' : 'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge></small>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnForcaTrabalho><small>{{  row.forca_trabalho + '%' }}</small></ng-template>\r\n            <ng-template let-row=\"row\" #editForcaTrabalho><input-text number sufix=\"%\" controlName=\"forca_trabalho\" [control]=\"form!.controls.forca_trabalho\" (change)=\"onForcaTrabalhoChange(row)\" [attr.maxlength]=250></input-text></ng-template>\r\n        </column>\r\n        <column [maxWidth]=\"250\" [titleTemplate]=\"titleDescricao\" [template]=\"columnDescricao\" [editTemplate]=\"editDescricao\" [verticalAlign]=\"'middle'\">\r\n            <ng-template let-header=\"header\" #titleDescricao><div class=\"text-center\"><span><strong>Detalhamento/Descrio dos Trabalhos</strong></span></div></ng-template>\r\n            <ng-template let-row=\"row\" #columnDescricao><small>{{ row.descricao }}</small></ng-template>\r\n            <ng-template let-row=\"row\" #editDescricao><input-text controlName=\"descricao\" [control]=\"form!.controls.descricao\" [attr.maxlength]=250></input-text></ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { AvaliarComponent } from '../../uteis/avaliar/avaliar.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: PlanoTrabalhoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Planos de Trabalho\" } },\r\n  { path: 'new', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Incluso de Plano de Trabalho\", modal: true } },\r\n  { path: 'termo', component: PlanoTrabalhoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de adeso\", modal: true } },\r\n  { path: 'consolidacao/:consolidacaoId/avaliar', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliar Consolidao do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/recurso', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Recurso da Avaliao da Consolidao do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:usuarioId/:planoTrabalhoId', component: PlanoTrabalhoConsolidacaoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidaes do Plano de Trabalho\" } },\r\n  { path: 'consolidacao', component: PlanoTrabalhoConsolidacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidaes\" } },\r\n  { path: ':id/edit', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edio de Plano de Trabalho\", modal: true } },\r\n  { path: ':id/consult', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Plano de Trabalho\", modal: true } },\r\n  { path: 'entregaList', component: PlanoTrabalhoListEntregaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Lista de Entregas do Plano de Trabalho\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanoTrabalhoRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlanoTrabalhoRoutingModule } from './plano-trabalho-routing.module';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { PlanoTrabalhoListAccordeonComponent } from './plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from './plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlanoTrabalhoFormComponent,\r\n    PlanoTrabalhoListComponent,\r\n    PlanoTrabalhoListEntregaComponent,\r\n    PlanoTrabalhoFormTermoComponent,\r\n    PlanoTrabalhoConsolidacaoComponent,\r\n    PlanoTrabalhoConsolidacaoListComponent,\r\n    PlanoTrabalhoConsolidacaoFormComponent,\r\n    PlanoTrabalhoListAccordeonComponent    \r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    PlanoTrabalhoRoutingModule,\r\n    UteisModule\r\n  ]\r\n})\r\nexport class PlanoTrabalhoModule { }\r\n"],"names":["DaoBaseService","ComparecimentoDaoService","constructor","injector","searchFields","i0","inject","Injector","factory","fac","providedIn","PlanoTrabalhoConsolidacaoOcorrenciaDaoService","dataset","deeps","deepsFilter","Base","PlanoTrabalhoConsolidacao","data","data_inicio","Date","data_fim","status","avaliacoes","status_historico","plano_trabalho_id","avaliacao_id","initialization","ChangeDetectorRef","EditableFormComponent","PlanoTrabalhoConsolidacaoDaoService","PageFrameBase","Atividade","PlanoTrabalhoConsolidacaoOcorrencia","PlanoTrabalhoService","TipoAtividadeDaoService","PlanoEntregaService","AtividadeDaoService","AtividadeService","CalendarService","Comparecimento","UnidadeDaoService","element","property","ctx_r44","entityService","getIcon","row_r43","tipo_atividade","nome","elementStart","template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_badge_2_Template","elementEnd","text","advance","numero","ctx_r30","atividadeService","onIdClick","bind","textInterpolate","descricao","listener","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_6_Template_input_search_select_0_listener","$event","restoreView","_r48","ctx_r47","nextContext","resetView","onTipoAtividadeSelect","ctx_r32","lex","translate","formAtividade","controls","tipo_atividade_id","tipoAtividadeDao","auth","hasPermissionTo","undefined","tempo_r51","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_badge_1_Template","ctx_r34","temposAtividade","row_r49","ctx_r36","data_distribuicao","data_estipulada_entrega","data_entrega","etiqueta_r57","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_tr_1_i_2_Template","check_r59","checked","texto","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_tr_1_Template","row_r53","checklist","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_badge_1_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_separator_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_Template","progresso","etiquetas","length","ctx_r66","i_r68","check_r67","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_table_5_tr_1_Template","ctx_r65","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template_input_select_details_2_listener","_r70","ctx_r69","onEtiquetaConfigClick","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_separator_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_table_5_Template","ctx_r40","formEdit","addItemHandleEtiquetas","etiqueta","row_r62","status_r74","color","icon","label","row_r71","_r28","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_badge_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_comentarios_widget_3_Template","documento_requisicao","ctx_r42","getStatus","entity","editing","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_Template","templateRefExtractor","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_6_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_11_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_Template","row_r27","atividades","ctx_r4","disabled","addAtividade","entrega","loadAtividade","removeAtividade","saveAtividade","_r29","_r31","_r33","_r35","_r37","_r39","onColumnProgressoEtiquetasChecklistEdit","onColumnProgressoEtiquetasChecklistSave","_r41","atividadeOptionsMetadata","dynamicOptions","dynamicButtons","row_r76","badge","titulo","cor","row_r77","row_r78","forca_trabalho","row_r79","meta","metaRealizado","row_r80","progresso_realizado","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_div_1_Template_button_click_1_listener","restoredCtx","_r87","pObjetivo_r85","$implicit","ctx_r86","showPlanejamento","objetivo","planejamento_id","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_div_1_Template","ctx_r82","row_r81","objetivos","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_div_1_Template_button_click_1_listener","_r92","pProcesso_r90","ctx_r91","showCadeiaValor","processo","cadeia_valor_id","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_div_1_Template","ctx_r83","processos","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_Template","row_r94","tipo_motivo_afastamento","icone","textInterpolate1","observacao","ctx_r23","row_r95","unidade","sigla","ctx_r25","unidadeDao","PlanoTrabalhoConsolidacaoFormComponent","noPersist","value","control","bindEntity","_disabled","cdRef","detectChanges","joinAtividade","itemsEntregas","itemsOcorrencias","itemsComparecimentos","itemsAfastamentos","validateAtividade","controlName","result","indexOf","includes","util","isDataValid","getTime","validateOcorrencia","formOcorrencia","validateComparecimento","between","start","end","get","dao","consolidacaoOcorrenciaDao","comparecimentoDao","atividadeDao","calendar","ocorrenciaDao","planoTrabalhoService","planoEntregaService","fh","FormBuilder","default","comentarios","esforco","tempo_planejado","formComparecimento","data_comparecimento","unidade_id","detalhamento","refreshId","atividadeRefreshId","removeId","atividadeRemoveId","refresh","loadData","form","_metadata","planoTrabalhoConsolidacaoFormComponent","id","atividade","forEach","foundIndex","findIndex","x","getById","then","splice","ngAfterViewInit","_this","_asyncToGenerator","loadConsolidacao","dados","entregas","map","plano_entrega_entrega","plano_entrega","planosEntregas","find","pe","plano_entrega_id","filter","y","plano_trabalho_entrega_id","tipoEntrega","planoTrabalho","getValorMeta","getValorRealizado","programa","ocorrencias","comparecimentos","afastamentos","plano_trabalho","_this2","gridEntregas","loading","dadosConsolidacao","_this3","efemerides","calculaDataTempoUnidade","carga_horaria","tempoPlanejado","horasUteis","dataInicio","setTime","dataFim","generateUuid","plano_trabalho_entrega","plano_trabalho_consolidacao","demandante","usuario","tempo_despendido","tempoUtil","plano_trabalho_consolidacao_id","demandante_id","usuario_id","metadados","atrasado","tempo_atraso","pausado","iniciado","concluido","avaliado","arquivado","produtividade","extra","_status","row","_this4","patchValue","_this5","confirm","dialog","delete","_this6","markAllAsTouched","valid","fillForm","submitting","save","atividadeDynamicButtons","push","Object","assign","BUTTON_EDIT","BUTTON_DELETE","_this7","setValue","merge","a","b","key","config","clone","_this8","saved","update","error","go","navigate","route","params","modal","modalClose","modalResult","selectedItem","item","textHash","validateLookupItem","loadTipoAtividade","tipoAtividade","buildEtiquetas","buildChecklist","comentarioAtividade","addOcorrencia","_this9","loadOcorrencia","_this10","removeOcorrencia","_this11","ocorrencia","saveOcorrencia","_this12","ocorrenciaDynamicButtons","addComparecimento","_this13","loadComparecimento","_this14","removeComparecimento","_this15","comparecimento","saveComparecimento","_this16","comparecimentoDynamicButtons","addAfastamento","_this17","metadata","consolidacao","filterSnapshot","querySnapshot","afastamentoDynamicButtons","OPTION_INFORMACOES","onClick","doc","_this18","cadeia_valor_id_id","_this19","directiveInject","selectors","viewQuery","PlanoTrabalhoConsolidacaoFormComponent_Query","rf","ctx","PlanoTrabalhoConsolidacaoFormComponent_ng_template_5_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_10_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_13_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_19_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_22_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_42_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_51_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_53_Template","_r1","_r3","_r5","_r7","_r9","_r11","_r13","_r15","_r19","_r22","_r24","GridComponent","PlanoTrabalhoDaoService","AvaliacaoDaoService","isDisabled","row_r14","ctx_r6","getDateFormatted","row_r16","ctx_r8","row_r17","ctx_r12","lookup","getColor","CONSOLIDACAO_STATUS","row_r19","getValue","PlanoTrabalhoConsolidacaoListComponent","items","consolidacoes","validate","avaliacaoDao","planoTrabalhoDao","title","code","modalWidth","urlParams","has","getByUsuario","planos","agora","v","asTimestamp","grid","expand","addConsolidacao","removeConsolidacao","saveConsolidacao","refreshConsolidacao","consolidacaoForm","refreshExpanded","concluir","response","message","cancelarConclusao","anterior","reduce","proximo","avaliar","fazerRecurso","recurso","avaliacao","cancelarAvaliacao","isUsuarioConsolidacao","isAvaliador","isGestorUnidade","isIntegrante","isUsuarioDoPlano","BOTAO_CONCLUIR","hint","BOTAO_CANCELAR_CONCLUSAO","BOTAO_AVALIAR","BOTAO_REAVALIAR","BOTAO_FAZER_RECURSO","BOTAO_CANCELAR_AVALIACAO","canConcluir","canCancelarConclusao","canAvaliar","canCancelarAvaliacao","diasParaConcluirConsolidacao","data_avaliacao","dias_tolerancia_recurso_avaliacao","daystamp","hora","PlanoTrabalhoConsolidacaoListComponent_Query","PlanoTrabalhoConsolidacaoListComponent_ng_template_4_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_6_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_9_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_12_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_15_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_Template","TabsComponent","data_r13","url_foto","apelido","data_r14","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_3_ng_template_1_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_3_ng_template_3_Template","usuario_r8","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_div_2_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_3_Template","textInterpolate2","ctx_r5","usuarios","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_Template","ctx_r1","_r4","ctx_r3","arquivados","PlanoTrabalhoConsolidacaoComponent","loadingUnidade","tabs","active","queryParams","tab","unidadeGestor","lotados","PlanoTrabalhoConsolidacaoComponent_Query","PlanoTrabalhoConsolidacaoComponent_tab_2_Template","PlanoTrabalhoConsolidacaoComponent_ng_template_4_Template","isModal","_r2","DocumentoDaoService","ProgramaDaoService","TipoDocumentoDaoService","TipoModalidadeDaoService","UsuarioDaoService","ListenerAllPagesService","PlanoTrabalho","PageFormBase","NavigateResult","PlanoTrabalhoFormTermoComponent","numero_processo","formValidation","tipoDocumento","selectedEntity","tipo_documento_id","titleEdit","join","programaDao","usuarioDao","tipoDocumentoDao","allPages","tipoModalidadeDao","documentoDao","tempo_total","tempo_proporcional","programa_id","documento_id","documentos","vinculadas","tipo_modalidade_id","forma_contagem_carga_horaria","onVinculadasChange","event","formValue","Promise","all","loadSearch","tipoModalidade","tipo_modalidade","id_processo","initializeData","saveData","resolve","reject","codigo_tipo_documento","codigo","formaContagemCargaHoraria","forma","PlanoTrabalhoFormTermoComponent_Query","PlanoTrabalhoFormTermoComponent_Template_editable_form_submit_0_listener","onSaveData","PlanoTrabalhoFormTermoComponent_Template_editable_form_cancel_0_listener","onCancel","PlanoTrabalhoFormTermoComponent_Template_input_switch_change_24_listener","formDisabled","ganho_produtividade","attribute","DocumentoService","TemplateService","UtilService","ctx_r10","horasTotais","ctx_r11","horasParciais","elementContainerStart","PlanoTrabalhoFormComponent_ng_container_16_Template_input_workload_change_2_listener","onCargaHorariaChenge","PlanoTrabalhoFormComponent_ng_container_16_separator_5_Template","PlanoTrabalhoFormComponent_ng_container_16_separator_6_Template","elementContainerEnd","onFormaContagemCargaHorariaChange","ctx_r7","editar_texto_complementar_unidade","planoDataset","editar_texto_complementar_usuario","ctx_r9","needSign","extraTags","editingId","datasource","template_tcr","PlanoTrabalhoFormComponent","gestoresUnidadeExecutora","_ref","_x","apply","arguments","joinPrograma","documentoService","templateService","utilService","unidade_texto_complementar","usuario_texto_complementar","ngOnInit","segment","url","path","action","buscaGestoresUnidadeExecutora","atualizarTcr","loadEntity","textoUsuario","textoUnidade","documento","template","isTermos","onUnidadeSelect","selected","entidade","texto_complementar_plano","onProgramaSelect","updateValueAndValidity","calculaTempos","onUsuarioSelect","onDataInicioChange","onDataFimChange","inicio","fim","carga","loadFeriadosCadastrados","feriados","carga_horaria_padrao","plano","fill","requests","responses","onTabSelect","documentoDynamicButtons","signDocumento","html","conteudo","sign","unit","isVigente","gestor","gestor_substituto","gestor_delegado","PlanoTrabalhoFormComponent_Query","PlanoTrabalhoFormComponent_Template_editable_form_submit_0_listener","PlanoTrabalhoFormComponent_Template_editable_form_cancel_0_listener","PlanoTrabalhoFormComponent_Template_input_search_select_5_listener","PlanoTrabalhoFormComponent_Template_input_search_select_7_listener","PlanoTrabalhoFormComponent_Template_input_search_select_9_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_12_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_13_listener","PlanoTrabalhoFormComponent_ng_container_16_Template","PlanoTrabalhoFormComponent_top_alert_18_Template","PlanoTrabalhoFormComponent_div_19_Template","PlanoTrabalhoFormComponent_tab_20_Template","PlanoTrabalhoFormComponent_tab_21_Template","pureFunction0","_c11","plano_trabalho_calcula_horas","checkFilled","_c12","_c13","badge_r7","PlanoTrabalhoListAccordeonComponent_ng_template_2_badge_10_Template","item_r5","ctx_r2","getPlanoBadges","PLANO_TRABALHO_STATUS","item_r8","PlanoTrabalhoListAccordeonComponent","_arquivados","viewInit","selectedIndex","accordion","usuarioId","self","i","concluidos","avaliados","getLookup","textValue","toString","JSON","stringify","badges","PlanoTrabalhoListAccordeonComponent_Query","PlanoTrabalhoListAccordeonComponent_ng_template_2_Template","PlanoTrabalhoListAccordeonComponent_ng_template_4_Template","PlanoTrabalhoEntrega","PlanoTrabalhoEntregaDaoService","PlanoEntregaDaoService","PlanoEntregaEntregaDaoService","row_r26","ctx_r27","orgao","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_3_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_4_Template","plano_entrega_entrega_id","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template_input_search_change_0_listener","onPlanoEntregaChange","ctx_r33","_c3","_r32","pureFunction1","_c5","_c4","_c7","_c6","planoEntregaDao","PlanoTrabalhoListEntregaComponent_ng_template_8_Template_input_select_change_0_listener","_r40","row_r31","ctx_r39","onOrigemChange","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_input_text_3_Template","origem","ORIGENS_ENTREGAS_PLANO_TRABALHO","_c8","ctx_r43","row_r42","PlanoTrabalhoListEntregaComponent_ng_template_13_div_2_Template","tipo","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template_input_select_change_0_listener","_r50","ctx_r49","onEntregaChange","ctx_r46","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_div_1_Template","ctx_r14","totalForcaTrabalho","row_r52","PlanoTrabalhoListEntregaComponent_ng_template_22_Template_input_text_change_0_listener","_r55","ctx_r54","onForcaTrabalhoChange","ctx_r18","row_r57","ctx_r24","PlanoTrabalhoListEntregaComponent","gridControl","options","e","peeDao","validateEntregas","planoInterval","entregaPlano","entregaDataFim","entregaInterval","intersection","_superprop_getNgOnInit","call","Math","round","somaForcaTrabalho","novaEntrega","addEntrega","loadEntrega","carregarEntregas","removeEntrega","isNoPersist","saveEntrega","idPlanoOuPlano","planoEntrega","planoEntregaComUnidade","epe","query","where","asPromise","onSelectClick","Event","index","PlanoTrabalhoListEntregaComponent_Query","PlanoTrabalhoListEntregaComponent_ng_template_4_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_Template","PlanoTrabalhoListEntregaComponent_ng_template_11_Template","PlanoTrabalhoListEntregaComponent_ng_template_13_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_Template","PlanoTrabalhoListEntregaComponent_ng_template_18_Template","PlanoTrabalhoListEntregaComponent_ng_template_20_Template","PlanoTrabalhoListEntregaComponent_ng_template_22_Template","PlanoTrabalhoListEntregaComponent_ng_template_25_Template","PlanoTrabalhoListEntregaComponent_ng_template_27_Template","PlanoTrabalhoListEntregaComponent_ng_template_29_Template","groupBy","_r17","_r21","_r23","RouterModule","AuthGuard","ConfigResolver","PlanoTrabalhoListComponent","AvaliarComponent","routes","component","canActivate","runGuardsAndResolvers","PlanoTrabalhoRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UteisModule","PlanoTrabalhoModule","declarations","NgIf","i2","i3","ColumnsComponent","i4","ColumnComponent","i5","FilterComponent","i6","ToolbarComponent","i7","PaginationComponent","i8","InputSwitchComponent","i9","InputSearchComponent","i10","InputTextComponent","i11","InputDatetimeComponent","i12","InputSelectComponent","i13","ReportComponent","i14","OrderComponent","i15","BadgeComponent","i16","DocumentosBadgeComponent"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
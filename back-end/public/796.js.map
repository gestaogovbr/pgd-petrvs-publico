{"version":3,"file":"796.js","mappings":"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","sources":["./src/app/models/plano-trabalho-atividade.model.ts","./src/app/models/plano-trabalho-entrega.model.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-routing.module.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho.module.ts"],"sourcesContent":["import { Base } from './base.model';\r\nimport { Atividade } from './atividade.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\n\r\nexport class PlanoTrabalhoAtividade extends Base {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public atividade?: Atividade;\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public atividade_id: string = \"\";\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}\r\n","import { Base } from './base.model';\r\nimport { Entrega } from './entrega.model';\r\nimport { PlanoEntregaEntrega } from './plano-entrega-entrega.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\n\r\nexport class PlanoTrabalhoEntrega extends Base {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public entrega?: Entrega;\r\n    public plano_entrega_entrega?: PlanoEntregaEntrega;\r\n\r\n    public descricao: string = \"\";\r\n    public forca_trabalho: number = 1;\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public entrega_id: string | null = null;\r\n    public plano_entrega_entrega_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form-termo',\r\n  templateUrl: './plano-trabalho-form-termo.component.html',\r\n  styleUrls: ['./plano-trabalho-form-termo.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormTermoComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public processo?: SeiKeys;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos\", \"atividades.atividade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio_vigencia: {default: new Date()},\r\n      data_fim_vigencia: {default: new Date()},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      vinculadas: {default: true},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.searchObj && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.plano_trabalho.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        /* TODO Gerar documento do TCR\r\n        termo: this.termo!.conteudo,\r\n        atividades_termo_adesao: this.termo!.atividades.map((x: { nome: string; }) => this.util.removeAcentos(x.nome.toLowerCase())),*/\r\n        codigo_tipo_documento: (this.tipoDocumento?.searchObj as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"TCR\") + ' ' + this.lex.translate(\"do Plano de Trabalho\") + ': ' + (entity?.usuario?.nome || \"\");\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <separator [title]=\"lex.translate('Plano de trabalho')\" collapse [collapsed]=\"false\">\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"6\" disabled controlName=\"programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-search #usuario [size]=\"6\" disabled  controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search #unidade [size]=\"5\" disabled controlName=\"unidade_id\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-search #tipoModalidade disabled [size]=\"3\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            <input-text numbers disabled [size]=\"2\" label=\"% prod.\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Ser descontado do ' + lex.translate('tempo pactuado')+')'\"></input-text>\r\n            <input-display [size]=\"2\" label=\"H. Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-display>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime [size]=\"3\" disabled label=\"Incio\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio_vigencia\" [control]=\"form!.controls.data_inicio_vigencia\" labelInfo=\"Incio da Vigncia do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"3\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim_vigencia\" [control]=\"form!.controls.data_fim_vigencia\" labelInfo=\"Final da Vigncia do Programa\"></input-datetime>\r\n            <input-workload [size]=\"3\" disabled [unit]=\"formaContagemCargaHoraria\" label=\"C. Horria\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" labelInfo=\"Carga horria do usurio\"></input-workload>\r\n            <input-display [size]=\"3\" label=\"H. Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas teis de trabalho no perodo de vigncia considerando a carga horria, feriados e fins de semana\"></input-display>\r\n        </div>\r\n    </separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"3\" disabled label=\"Data e hora\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de cadastro do termo\"></input-datetime>\r\n        <input-text [label]=\"'Nmero ' + lex.translate('Processo')\" [size]=\"3\" controlName=\"numero_processo\" [control]=\"form!.controls.numero_processo\" disabled labelInfo=\"Nmero do processo, com a formatao de origem\"></input-text>\r\n        <input-search [size]=\"4\" #tipoDocumento [disabled]=\"!form!.controls.numero_processo.value?.length ? 'true' : undefined\" controlName=\"tipo_documento_id\" [dao]=\"tipoDocumentoDao\"></input-search>\r\n        <input-switch label=\"Vinculadas\" [disabled]=\"entity?.atividades?.length ? 'true' : undefined\" [size]=\"2\" controlName=\"vinculadas\" [control]=\"form!.controls.vinculadas\" (change)=\"onVinculadasChange($event)\" labelInfo=\"Se inclui as atividades das unidades vinculadas a unidade do plano\"></input-switch>\r\n    </div>\r\n    <!--separator title=\"Pr-visualizao do termo de adeso\" collapse [collapsed]=\"true\">\r\n        <plano-termo-adesao #termo [plano]=\"entity\" [vinculadas]=\"!!form?.controls?.vinculadas?.value\"></plano-termo-adesao>\r\n    </separator/-->\r\n</editable-form>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { PlanoTrabalhoAtividade } from 'src/app/models/plano-trabalho-atividade.model';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { DocumentoService } from 'src/app/modules/uteis/documentos/documento.service';\r\nimport { DocumentosComponent } from 'src/app/modules/uteis/documentos/documentos.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { TemplateDataset, TemplateService } from 'src/app/modules/uteis/templates/template.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form',\r\n  templateUrl: './plano-trabalho-form.component.html',\r\n  styleUrls: ['./plano-trabalho-form.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('atividade', { static: false }) public atividade?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @ViewChild('documentos', { static: false }) public documentos?: DocumentosComponent;\r\n\r\n  public formAtividades: FormGroup;\r\n  public formEntregas: FormGroup;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public documentoService: DocumentoService;\r\n  public templateService: TemplateService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public planoEntregaDao: PlanoEntregaDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public horasTotais?: Efemerides;\r\n  public horasParciais?: Efemerides;\r\n  public planoDataset: TemplateDataset[];\r\n  public documentoId?: string;\r\n  public entregas: LookupItem[] = [];\r\n  public programa?: Programa;\r\n  public unidade?: Unidade;\r\n\r\n  private _datasource: any;\r\n  private _entityDocumentos: PlanoTrabalho = new PlanoTrabalho();\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade.entidade\", \"entregas.entrega\", \"entregas.plano_entrega_entrega:id,plano_entrega_id\", \"plano_entrega.entregas.entrega\", \"plano_entrega.unidade.entidade\", \"plano_entrega.programa\", \r\n                \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos.assinaturas.usuario:id,nome,apelido\", \"atividades.atividade\", \"entregas.plano_entrega_entrega.entrega\"];\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.documentoService = injector.get<DocumentoService>(DocumentoService);\r\n    this.templateService = injector.get<TemplateService>(TemplateService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.dao!.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio_vigencia: {default: new Date()},\r\n      data_fim_vigencia: {default: new Date()},\r\n      usuario_id: {default: \"\"},\r\n      plano_entrega_id: {default: \"\"},\r\n      documento_id: {default: null},\r\n      documentos: {default: []},\r\n      atividades: {default: []},\r\n      entregas: {default: []},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"},\r\n      editar_texto_complementar_unidade: {default: false},\r\n      editar_texto_complementar_usuario: {default: false},\r\n      unidade_texto_complementar: {default: \"\"},\r\n      usuario_texto_complementar: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.formAtividades = this.fh.FormBuilder({\r\n      atividade_id: {default: \"\"}\r\n    }, this.cdRef, this.validateAtividades);\r\n    this.formEntregas = this.fh.FormBuilder({\r\n      nome: {default: \"\"},\r\n      entrega_id: {default: \"\"}\r\n    }, this.cdRef, this.validateEntregas);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length-1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n  }\r\n\r\n  public get datasource(): any {\r\n    /* _entityDocumentos  atualizado pelo angular na chamada do get entityDocumentos() */\r\n    let data = this.dao!.datasource(this._entityDocumentos);\r\n    /* Atualiza os campos de texto complementar do usurio e da unidade */\r\n    data.usuario.texto_complementar_plano = this.form!.controls.usuario_texto_complementar.value || \"\";\r\n    data.unidade.texto_complementar_plano = this.form!.controls.unidade_texto_complementar.value || \"\";\r\n    if(JSON.stringify(data) != this.JSON.stringify(this._datasource)) {\r\n      this._datasource = data;\r\n      /* Se o termo for um documento obrigatrio, ento ser gerado um termo automaticamente */\r\n      this.documentoId = undefined;\r\n      if(this.programa?.termo_obrigatorio) {\r\n        this.documentoId = this.form!.controls.documento_id.value;\r\n        let documentos: Documento[] = this.form!.controls.documentos.value || [];\r\n        let documento = documentos?.find((x: Documento) => x.id == this.documentoId);\r\n        if(!this.documentoId?.length || !documento || documento.assinaturas?.length || documento.tipo == \"LINK\") {\r\n          this.documentoId = this.dao?.generateUuid(),\r\n          documentos.push(new Documento({\r\n            id: this.documentoId, \r\n            tipo: \"HTML\",\r\n            especie: \"TCR\",\r\n            titulo: \"Termo de Cincia e Responsabilidade\",\r\n            conteudo: this.templateService.renderTemplate(this.programa.template_tcr?.conteudo || \"\", this._datasource),\r\n            status: \"GERADO\",\r\n            _status: \"ADD\",\r\n            template: this.programa.template_tcr?.conteudo,\r\n            dataset: this.dao!.dataset(),\r\n            datasource: this._datasource,\r\n            entidade_id: this.auth.entidade?.id,\r\n            plano_trabalho_id: this.entity?.id,\r\n            template_id: this.programa.template_tcr_id\r\n          }));\r\n          this.form!.controls.documento_id.setValue(this.documentoId);\r\n          this.form!.controls.documentos.setValue(documentos);\r\n        }\r\n      }\r\n    }\r\n    return this._datasource;\r\n  }\r\n\r\n  public get template(): Template | undefined {\r\n    /* _entityDocumentos  atualizado pelo angular na chamada do get entityDocumentos() */\r\n    return this.planoTrabalhoService.template(this._entityDocumentos);\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validateAtividades = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == 'atividade_id' && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateEntregas = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == 'entrega_id' && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if(['usuario_id', 'plano_entrega_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatrio\";\r\n    }\r\n    if(['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n      result = \"Valor no pode ser zero.\";\r\n    } \r\n    if(['data_inicio_vigencia', 'data_fim_vigencia'].includes(controlName)) {\r\n      if(!this.util.isDataValid(control.value)) {\r\n        result = \"Invlido\";\r\n      }\r\n    } else if(this.programa && controlName == 'data_inicio_vigencia' && (control.value as Date).getTime() < this.programa!.data_inicio_vigencia.getTime()) {\r\n        result = \"Menor que programa\";\r\n    } else if(this.programa && controlName == 'data_fim_vigencia' && (control.value as Date).getTime() > this.programa!.data_fim_vigencia.getTime()) {\r\n        result = \"Maior que programa\";\r\n    } \r\n\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(this.gridAtividades?.editing) {\r\n      this.tabs!.active = \"ATIVIDADES\";\r\n      return \"Salve ou cancele o registro atual em edio\";\r\n    }\r\n    // Validar se o unidade & programa & plano de entrega so interlidados\r\n    // Validar se as entregas pertencem ao plano de entregas da unidade\r\n    // Validar o perodo est dentro do plano de entregas\r\n    // Validar se o usurios est habilitado no programa\r\n    return undefined;\r\n  };\r\n\r\n  public updateEntregas(planoEntrega: PlanoEntrega | undefined) {\r\n    this.entregas = planoEntrega?.entregas?.map(x => Object.assign({}, { key: x.id, value: x.entrega?.nome || x.descricao, data: x })) || [];\r\n  }\r\n\r\n  public onPlanoEntregaSelect(selected: SelectItem) {\r\n    let planoEntrega = selected.entity as PlanoEntrega;\r\n    this.updateEntregas(planoEntrega);\r\n    this.form?.controls.data_inicio_vigencia.updateValueAndValidity();\r\n    this.form?.controls.data_fim_vigencia.updateValueAndValidity();\r\n    this.programa = planoEntrega?.programa as Programa;\r\n    this.unidade = planoEntrega?.unidade as Unidade;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(this.unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(this.unidade?.texto_complementar_plano || \"\");\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.form!.controls.usuario_texto_complementar.setValue((selected.entity as Usuario)?.texto_complementar_plano || \"\");\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onCargaHorariaChenge(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public calculaTempos() {\r\n    const inicio = this.form?.controls.data_inicio_vigencia.value;\r\n    const fim = this.form?.controls.data_fim_vigencia.value;\r\n    const carga = this.form?.controls.carga_horaria.value || 8;\r\n    const usuario = this.usuario?.searchObj as Usuario;\r\n    if(usuario && this.unidade && this.util.isDataValid(inicio) && this.util.isDataValid(fim)) {\r\n      this.calendar.loadFeriadosCadastrados(this.unidade.id).then((feriados) => {\r\n        this.horasTotais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, this.unidade!, \"ENTREGA\", [], []);\r\n        this.horasParciais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, this.unidade!, \"ENTREGA\", [], usuario.afastamentos);\r\n        this.form?.controls.tempo_total.setValue(this.horasTotais.tempoUtil);\r\n        this.form?.controls.tempo_proporcional.setValue(this.horasParciais.tempoUtil);\r\n      });\r\n    }\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    this.updateEntregas(entity.plano_entrega);\r\n    await Promise.all([\r\n      this.calendar.loadFeriadosCadastrados(entity.unidade_id),\r\n      this.usuario?.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id),\r\n      this.planoEntrega?.loadSearch(entity.plano_entrega || entity.plano_entrega_id)\r\n    ]);\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    let documento = entity.documentos.find(x => x.id == entity.documento_id);\r\n    if(documento) this._datasource = documento.datasource;\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if(this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new PlanoTrabalho();\r\n      this.entity.carga_horaria = this.auth.entidade?.carga_horaria_padrao || 8;\r\n      this.entity.forma_contagem_carga_horaria = this.auth.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n    }\r\n    await this.loadData(this.entity, this.form!);\r\n  }\r\n\r\n  /* Atividades */  \r\n  public async addAtividades() {\r\n    return new PlanoTrabalhoAtividade({ plano_trabalho_id: this.entity?.id, _status: \"ADD\" }) as IIndexable;\r\n  }\r\n\r\n  public async loadAtividades(form: FormGroup, row: any) {\r\n    form.controls.atividade_id.setValue(row.atividade_id);\r\n  }\r\n\r\n  public async removeAtividades(row: any) {\r\n    row._status = \"DELETE\";\r\n    return false;\r\n  }\r\n \r\n  public async saveAtividades(form: FormGroup, row: any) {\r\n    row.atividade_id = form.controls.atividade_id.value;\r\n    row.atividade = this.atividade?.searchObj as Atividade;\r\n    row._status = row._status == \"ADD\" ? row._status : \"EDIT\";\r\n    /*this.dialog.showSppinerOverlay(\"Carregando dados da atividade...\");\r\n    try {\r\n      row.atividade = await this.atividadeDao?.getById(row.atividade_id)!;\r\n    } finally {\r\n      this.dialog.closeSppinerOverlay();\r\n    }*/\r\n    return row;\r\n  }\r\n\r\n  /* Entregas */\r\n  public async addEntregas() {\r\n    return new PlanoTrabalhoEntrega({ plano_trabalho_id: this.entity?.id, _status: \"ADD\" }) as IIndexable;\r\n  }\r\n\r\n  public async loadEntregas(form: FormGroup, row: any) {\r\n    form.controls.entrega_id.setValue(row.entrega_id);\r\n    form.controls.nome.setValue(row.nome);\r\n  }\r\n\r\n  public async removeEntregas(row: any) {\r\n    row._status = \"DELETE\";\r\n    return false;\r\n  }\r\n \r\n  public async saveEntregas(form: FormGroup, row: any) {\r\n    row.entrega_id = form.controls.entrega_id.value;\r\n    row.entrega = this.entrega?.selectedItem?.data as PlanoTrabalhoEntrega;\r\n    row.nome = form.controls.nome.value;\r\n    row._status = row._status == \"ADD\" ? row._status : \"EDIT\";\r\n    return row;\r\n  }\r\n\r\n  /* Gera o objeto entity baseado nas informaes atuais do formulrio para ser utilizado por Documentos */\r\n  public get entityDocumentos(): PlanoTrabalho {\r\n    let plano = this.loadEntity();\r\n    /* Remove campo de documentos para comparar */\r\n    plano.documentos = [];\r\n    this._entityDocumentos.documentos = [];\r\n    if(JSON.stringify(plano) != JSON.stringify(this._entityDocumentos)) {\r\n      this._entityDocumentos = plano;  \r\n    }\r\n    /* Atribui novamente o campo de documentos */\r\n    this._entityDocumentos.documentos = this.form!.controls.documentos.value;\r\n    return this._entityDocumentos;\r\n  }\r\n\r\n  /* Cria um objeto Plano baseado nos dados do formulrio */\r\n  public loadEntity(): PlanoTrabalho {\r\n    let plano: PlanoTrabalho = this.util.fill(new PlanoTrabalho(), this.entity!);\r\n    plano = this.util.fillForm(plano, this.form!.value);\r\n    plano.usuario = this.usuario!.searchObj as Usuario;\r\n    plano.unidade = (this.entity?.unidade || this.unidade) as Unidade;\r\n    plano.programa = (this.entity?.programa || this.programa) as Programa;\r\n    plano.tipo_modalidade = this.tipoModalidade!.searchObj as TipoModalidade;\r\n    return plano;\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<PlanoTrabalho | boolean> {\r\n    let plano = this.loadEntity();\r\n    /* Confirma dados do documento */\r\n    this.documentos?.saveData();\r\n    plano.documentos = plano.documentos.filter((documento: Documento) => {\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(documento._status || \"\")\r\n    });\r\n    /* Salva separadamente as informaes do plano */\r\n    this.submitting = true;\r\n    try {\r\n      this.entity = await this.dao!.save(plano);\r\n      if(this.form!.controls.editar_texto_complementar_unidade.value) {\r\n        await this.unidadeDao.update(plano.unidade_id, {texto_complementar_plano: this.form!.controls.unidade_texto_complementar.value});\r\n      }\r\n      if(this.form!.controls.editar_texto_complementar_usuario.value) {\r\n        await this.usuarioDao.update(plano.unidade_id, {texto_complementar_plano: this.form!.controls.usuario_texto_complementar.value});\r\n      }\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"Plano de Trabalho\") + ': ' + (entity?.usuario?.apelido || \"\");\r\n  }\r\n\r\n  public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if(this.isTermos && this.planoTrabalhoService.needSign(this.entity, documento)) {\r\n      result.push({hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({title: \"Termo de adeso\", modalWidth: 1000}, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  /*public needSign(documento: Documento): boolean {\r\n    const tipoModalidade = this.entity!.tipo_modalidade!; //(this.tipoModalidade?.searchObj as TipoModalidade);\r\n    const usuario = this.entity!.usuario!; // (this.usuario?.searchObj as Usuario);\r\n    const unidade = this.entity!.unidade!; // (this.unidade?.searchObj as Unidade);\r\n    const entidade = unidade?.entidade;\r\n    const alredySigned = !!documento.assinaturas.find(x => x.usuario_id == this.auth.usuario!.id);\r\n    let ids: string[] = [];\r\n    if(tipoModalidade?.exige_assinatura && usuario) ids.push(usuario.id);\r\n    if(tipoModalidade?.exige_assinatura_gestor_unidade && unidade) ids.push(unidade.gestor_id || \"\", unidade.gestor_substituto_id || \"\");\r\n    if(tipoModalidade?.exige_assinatura_gestor_entidade && entidade) ids.push(entidade.gestor_id || \"\", entidade.gestor_substituto_id || \"\");\r\n    return !alredySigned && tipoModalidade && ids.includes(this.auth.usuario!.id);\r\n  }*/\r\n\r\n  public async signDocumento(documento: Documento) {\r\n    await this.documentoService.sign([documento]);\r\n    this.cdRef.detectChanges();\r\n    /*this.dialog.confirm(\"Assinar\", \"Deseja realmente assinar o documento?\").then(response => {\r\n      if(response) {\r\n        this.loading = true;\r\n        this.documentoDao.assinar([documento.id]).then(response => {\r\n          if(response?.length) {\r\n            let documentos = (this.form!.controls.documentos.value || []) as Documento[];\r\n            let found = documentos.find(x => x.id == documento?.id);\r\n            if(found) found.assinaturas = response[0].assinaturas;\r\n            this.form!.controls.documentos.setValue(documentos);\r\n            this.gridDocumentos?.reset();\r\n          }\r\n        }).finally(() => this.loading = false);\r\n      }\r\n    });*/\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    //const forma = (this.unidade?.searchObj as Unidade)?.entidade?.forma_contagem_carga_horaria || this.auth.unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n    //console.log(\"FORMA: \", (this.unidade?.searchObj as Unidade)?.entidade?.forma_contagem_carga_horaria, this.auth.unidade?.entidade?.forma_contagem_carga_horaria);\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public onFormaContagemCargaHorariaChange(unit: UnitWorkload) {\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unit == \"day\" ? \"DIA\" : unit == \"week\" ? \"SEMANA\" : \"MES\");\r\n  }\r\n\r\n  public async addDocumento() {\r\n    const documento = new Documento();\r\n    documento.id = this.dao!.generateUuid();\r\n    documento.plano_trabalho_id = this.entity!.id;\r\n    documento.especie = \"TCR\";\r\n    documento._status = \"ADD\";\r\n    this.go.navigate({route: ['gestao', 'plano', 'termo']}, {metadata: {documento: documento, plano_trabalho: this.entity}, modalClose: (modalResult) => {\r\n      if(modalResult) {\r\n        (async () => {\r\n          let documentos = (this.form!.controls.documentos.value || []) as Documento[];\r\n          if(this.isTermos) {\r\n            this.clearErros();\r\n            this.dialog.showSppinerOverlay(\"Salvando dados do formulrio\");\r\n            try {\r\n              modalResult = await this.documentoDao.save(Object.assign(new Documento(), {\r\n                especie: \"TCR\",\r\n                conteudo: modalResult?.termo,\r\n                plano_trabalho_id: this.entity!.id,\r\n                status: \"GERADO\"\r\n              }), [\"assinaturas.usuario:id,nome,apelido\"]);\r\n            } catch (error: any) {\r\n              this.error(error.message ? error.message : error);\r\n              modalResult = undefined;\r\n            } finally {\r\n              this.dialog.closeSppinerOverlay();\r\n            }\r\n          }\r\n          if(modalResult) {\r\n            documentos.push(modalResult);\r\n            this.form!.controls.documentos.setValue(documentos);\r\n            this.dialog.showSppinerOverlay(\"Recarregando dados do plano\");\r\n            await this.initializeData(this.form!);\r\n            this.dialog.closeSppinerOverlay();\r\n          }\r\n          this.cdRef.detectChanges();\r\n        })();\r\n      }\r\n    }});\r\n    return undefined;\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public onProcessoClick(row: any) {\r\n    this.allPages.openDocumentoSei(row.id_processo, row.id_documento);\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\">\r\n        <tab key=\"DADOS\" label=\"Dados\">\r\n            <div class=\"row\">\r\n                <!-- (RI_PTR_1) No formulrio de incluso/edio de um plano de trabalho, o input-search de plano de entregas deve ficar desabilitado nas edies e habilitado apenas nas incluses; -->\r\n                <input-search #planoEntrega [size]=\"6\" [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" [join]=\"['entregas.entrega','unidade.entidade','programa.template_tcr']\" (select)=\"onPlanoEntregaSelect($event)\"></input-search>\r\n                <input-search #usuario [size]=\"6\" controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos']\" (select)=\"onUsuarioSelect($event)\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-datetime [size]=\"3\" label=\"Incio\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio_vigencia\" [control]=\"form!.controls.data_inicio_vigencia\" (change)=\"onDataInicioChange($event)\" labelInfo=\"'Incio da Vigncia do '+ lex.translate('Plano de trabalho')\"></input-datetime>\r\n                <input-datetime [size]=\"3\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim_vigencia\" [control]=\"form!.controls.data_fim_vigencia\" (change)=\"onDataFimChange($event)\" labelInfo=\"'Final da Vigncia do ' +lex.translate('Plano de trabalho')\"></input-datetime>\r\n                <input-search #tipoModalidade [size]=\"6\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            </div>\r\n            <ng-container *ngIf=\"tipoModalidade!.selectedItem?.entity?.plano_trabalho_calcula_horas\">\r\n                <div class=\"row\">\r\n                    <input-workload [size]=\"4\" [unit]=\"formaContagemCargaHoraria\" label=\"Carga Horria\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [unitChange]=\"onFormaContagemCargaHorariaChange.bind(this)\" (change)=\"onCargaHorariaChenge($event)\" labelInfo=\"Carga horria do usurio (Mx.: diria 24 horas; semana 24*5=240 horas; mensal 24*20=480 horas)\"></input-workload>\r\n                    <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas teis de trabalho no perodo de vigncia considerando a carga horria, feriados e fins de semana\"></input-timer>\r\n                    <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-timer>\r\n                </div>\r\n                <separator *ngIf=\"horasTotais\" title=\"Clculos das horas totais\" collapse>\r\n                    <calendar-efemerides [efemerides]=\"horasTotais\" [partial]=\"false\"></calendar-efemerides>\r\n                </separator>\r\n                <separator *ngIf=\"horasParciais\" title=\"Clculos das horas parciais\" collapse>\r\n                    <calendar-efemerides [efemerides]=\"horasParciais\"></calendar-efemerides>\r\n                </separator>\r\n            </ng-container>\r\n            <separator [title]=\"lex.translate('Entrega') + lex.translate('plano de trabalho')\">\r\n                <top-alert *ngIf=\"!form!.controls.plano_entrega_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega') + ' neste ' + lex.translate('Plano de Trabalho') + ',  necessrio selecionar um ' + lex.translate('Plano de Entregas') + '!'\"></top-alert>\r\n                <div *ngIf=\"form!.controls.plano_entrega_id.value?.length\">\r\n                    <editable-form [form]=\"formEntregas!\"  [noButtons]=\"'true'\">\r\n                        <plano-trabalho-list-entrega noPersist [entity]=\"entity\" [entregasDoPlanoEntrega]=\"entregas\"></plano-trabalho-list-entrega>\r\n                    </editable-form>\r\n                </div>\r\n            </separator>\r\n        </tab>\r\n        <!--tab key=\"ENTREGAS\" [label]=\"lex.translate('Entrega', true)\">\r\n            <top-alert *ngIf=\"!form!.controls.plano_entrega_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega',true) + ' neste ' + lex.translate('Plano de Trabalho') + ',  necessrio selecionar um ' + lex.translate('Plano de Entregas') + '!'\"></top-alert>\r\n            <div *ngIf=\"form!.controls.plano_entrega_id.value?.length\">\r\n                <editable-form [form]=\"formEntregas!\"  [noButtons]=\"'true'\">\r\n                    <plano-trabalho-list-entrega noPersist [entity]=\"entity\" [entregasDoPlanoEntrega]=\"entregas\"></plano-trabalho-list-entrega>\r\n                </editable-form>\r\n            </div>\r\n        </tab//-->\r\n        <tab *ngIf=\"checkFilled(['usuario_id'])\" key=\"MENSAGENS\" label=\"Texto Complementar\">\r\n            <separator [title]=\"'Texto complementar da '+ lex.translate('unidade')\">\r\n                <input-switch controlName=\"editar_texto_complementar_unidade\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar na '+ lex.translate('unidade')\"></input-switch>\r\n                <input-editor controlName=\"unidade_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_unidade.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n            <separator title=\"Texto complementar do usuario\">\r\n                <input-switch controlName=\"editar_texto_complementar_usuario\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar do '+ lex.translate('usurio')\"></input-switch>\r\n                <input-editor controlName=\"usuario_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_usuario.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n        </tab>\r\n        <tab *ngIf=\"checkFilled(['usuario_id', 'tipo_modalidade_id'])\" key=\"TERMO\" label=\"Termo\">\r\n            <!--top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opo Termos de adeso na tela de listagem, ou utilize o Sei\"></top-alert/-->\r\n            <div clss=\"row\">\r\n                <documentos #documentos [entity]=\"entityDocumentos\" noPersist [cdRef]=\"cdRef\" [needSign]=\"planoTrabalhoService.needSign\" [extraTags]=\"planoTrabalhoService.extraTags\" especie=\"TCR\" \r\n                    [editingId]=\"documentoId\" [datasource]=\"datasource\" [template]=\"template\"></documentos>\r\n                <!--grid [control]=\"form!.controls.documentos\" #gridDocumentos [disabled]=\"undefined\" #documentos [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"isTermos\" [add]=\"isTermos ? addDocumento.bind(this) : undefined\" editable>\r\n                    <columns>\r\n                        <column title=\"Data\" [template]=\"dataInicio\">\r\n                            <ng-template let-row=\"row\" #dataInicio>\r\n                                <span class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Data da incluso\">\r\n                                    <i class=\"bi bi-calendar-plus\"></i>\r\n                                    {{util.getDateTimeFormatted(row.data_inicio)}}\r\n                                </span>\r\n                                <span *ngIf=\"row.data_fim\" class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Data substituio\">\r\n                                    <i class=\"bi bi-calendar-x\"></i>\r\n                                    {{util.getDateTimeFormatted(row.data_fim)}}\r\n                                </span>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column title=\"Documento Sei\" [template]=\"documento\">\r\n                            <ng-template let-row=\"row\" #documento>\r\n                                <span *ngIf=\"row.numero_processo?.length\" class=\"badge bg-light text-dark\" [attr.role]=\"row.numero_processo?.length ? 'button' : undefined\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" (click)=\"onProcessoClick(row)\" [title]=\"allPages.getButtonTitle(row.numero_processo, row.numero_documento)\">\r\n                                    <i [class]=\"'bi ' + (row.numero_processo?.length ? 'bi bi-folder-symlink' : 'bi bi-x-lg')\"></i>\r\n                                    {{row.numero_processo?.length ? row.numero_processo : \"No atribudo\"}}\r\n                                    <small *ngIf=\"row.numero_documento?.length\"><br>Sei n {{row.numero_documento}}</small>\r\n                                </span>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column title=\"Status\" [template]=\"vigente\">\r\n                            <ng-template let-row=\"row\" #vigente>\r\n                                <badge [color]=\"lookup.getColor(lookup.DOCUMENTO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.DOCUMENTO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.DOCUMENTO_STATUS, row.status)\"></badge>\r\n                                <span *ngIf=\"isVigente(row)\" class=\"badge rounded-pill bg-info text-dark\">\r\n                                    <i class=\"bi bi-clipboard-check\"></i>\r\n                                    Vigente\r\n                                </span>\r\n                                <div class=\"d-block\">\r\n                                    <span *ngFor=\"let assinatura of row.assinaturas\" class=\"badge rounded-pill bg-primary\">\r\n                                        <i class=\"bi bi-pen\"></i>\r\n                                        {{util.apelidoOuNome(assinatura.usuario)}}\r\n                                    </span>\r\n                                </div>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column type=\"options\" [dynamicButtons]=\"documentoDynamicButtons.bind(this)\"></column>\r\n                    </columns>\r\n                </grid//-->\r\n            </div>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalhoEntregaDaoService } from 'src/app/dao/plano-trabalho-entrega-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { EntregaDaoService } from 'src/app/dao/entrega-dao.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\n\r\nexport type badgeEntrega = {\r\n  label: string,\r\n  cor: string,\r\n  nome: string\r\n}\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-entrega',\r\n  templateUrl: './plano-trabalho-list-entrega.component.html',\r\n  styleUrls: ['./plano-trabalho-list-entrega.component.scss']\r\n})\r\nexport class PlanoTrabalhoListEntregaComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('origem', { static: false }) public origem?: InputSelectComponent;\r\n  @ViewChild('entregaMesmaUnidade', { static: false }) public entregaMesmaUnidade?: InputSelectComponent;\r\n  @ViewChild('entregaOutraUnidade', { static: false }) public entregaOutraUnidade?: InputSelectComponent;\r\n  @ViewChild('entregaCatalogo', { static: false }) public entregaCatalogo?: InputSelectComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) { if (this._disabled != value) this._disabled = value; } get disabled(): boolean { return this._disabled; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() set entregasDoPlanoEntrega(value: LookupItem[]) {\r\n    if (JSON.stringify(value) != JSON.stringify(this._entregasDoPlanoEntrega)) {\r\n      this._entregasDoPlanoEntrega = value;\r\n      this.entregasMesmaUnidade = this.carregarEntregasMesmaUnidade();\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  get entregasDoPlanoEntrega(): LookupItem[] { return this._entregasDoPlanoEntrega; }\r\n\r\n  public get items(): PlanoTrabalhoEntrega[] {\r\n    if (!this.gridControl.value) this.gridControl.setValue(new PlanoTrabalho());\r\n    if (!this.gridControl.value.entregas) this.gridControl.value.entregas = [];\r\n    return this.gridControl.value.entregas;\r\n  }\r\n  public options: ToolbarButton[] = [];\r\n  public entregaDao?: EntregaDaoService;\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoEntregaDao?: PlanoEntregaDaoService;\r\n  public peeDao?: PlanoEntregaEntregaDaoService;\r\n  public totalForcaTrabalho: number = 0;\r\n  public entregasMesmaUnidade: LookupItem[] = [];\r\n  public entregasOutraUnidade: LookupItem[] = [];\r\n  public entregasCatalogo: LookupItem[] = [];\r\n  public planoEntregaOutraUnidade?: PlanoEntrega | null;\r\n  public novaEntrega?: PlanoTrabalhoEntrega;\r\n\r\n  private _disabled: boolean = false;\r\n  private _entregasDoPlanoEntrega: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoEntregaDaoService>(PlanoTrabalhoEntregaDaoService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.entregaDao = injector.get<EntregaDaoService>(EntregaDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.peeDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.join = [\"entrega\", \"plano_entrega_entrega.entrega\"];\r\n    this.form = this.fh.FormBuilder({\r\n      origem: { default: null },\r\n      entregaMesmaUnidade: { default: null },\r\n      entregaOutraUnidade: { default: null },\r\n      entregaCatalogo: { default: null },\r\n      descricao: { default: \"\" },\r\n      forca_trabalho: { default: 1 },\r\n      plano_trabalho_id: { default: null },\r\n      entrega_id: { default: null },\r\n      plano_entrega_entrega_id: { default: null }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para a validao dos campos do formulrio, por ocasio da edio ou insero de itens.\r\n   * @param control \r\n   * @param controlName \r\n   * @returns \r\n   */\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao', 'forca_trabalho'].indexOf(controlName) >= 0 && !control.value?.length) result = \"Obrigatrio!\";\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && (control.value < 1 || control.value > 100)) result = \"Deve estar entre 1 e 100\";\r\n    if (['entrega_id'].indexOf(controlName) >= 0) {\r\n      if (this.form?.controls.origem.value == 'CATALOGO' && !control.value) result = \"Este campo no pode ser nulo!\";\r\n      let cont = this.entity?.entregas?.filter(e => !!e.entrega_id && !e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.entrega_id).reduce((acc, id) => { if (id === control.value) return acc + 1; else return acc; }, 0) || 0; // (*1)\r\n      if (cont > 0) result = \"Esta entrega est em duplicidade!\";\r\n    }\r\n    if (['plano_entrega_entrega_id'].indexOf(controlName) >= 0) {\r\n      if (['MESMA_UNIDADE', 'OUTRA_UNIDADE'].includes(this.form?.controls.origem.value) && !control.value) result = \"Este campo no pode ser nulo!\";\r\n      let cont = this.entity?.entregas?.filter(e => !e.entrega_id && !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.plano_entrega_entrega_id).reduce((acc, id) => { if (id === control.value) return acc + 1; else return acc; }, 0) || 0; // (*2)\r\n      if (cont > 0) result = \"Esta entrega est em duplicidade!\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado na inicializao do componente. Neste momento so carregadas as entregas do catlogo e as entregas da mesma unidade do plano de trabalho,\r\n   * visto que esses itens no se alteram durante a vida do componente e podero ser utilizados durante sua utilizao.\r\n   */\r\n  async ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity = this.metadata?.entity || this.entity;\r\n    this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n    this.entregasCatalogo = await this.carregarEntregasCatalogo();\r\n    this.entregasMesmaUnidade = this.carregarEntregasMesmaUnidade();\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para inserir uma entrega de plano de trabalho no grid, seja este componente persistente ou no.\r\n   * @returns \r\n   */\r\n  public async addEntrega() {\r\n    return Object.assign(new PlanoTrabalhoEntrega(), {\r\n      _status: this.isNoPersist ? \"ADD\" : \"\",\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity?.id\r\n    }) as IIndexable;\r\n  }\r\n\r\n  /**\r\n   * Mtodo utilizado durante a incluso/alterao de uma entrega de plano de trabalho no grid, seja este componente persistente ou no\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadEntrega(form: FormGroup, row: any) {\r\n    form.controls.descricao.setValue(row.descricao);\r\n    form.controls.forca_trabalho.setValue(row.forca_trabalho);\r\n    form.controls.plano_trabalho_id.setValue(row.plano_trabalho_id);\r\n    if (!row.entrega_id?.length && !row.plano_entrega_entrega_id?.length) { //  uma nova entrega\r\n      form.controls.origem.setValue('MESMA_UNIDADE');\r\n      form.controls.entrega_id.setValue(null);\r\n      form.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if (!row.plano_entrega_entrega_id?.length && !!row.entrega_id?.length) { //  uma entrega do tipo catlogo\r\n      form.controls.origem.setValue('CATALOGO');\r\n      form.controls.entrega_id.setValue(row.entrega_id);\r\n      form.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if (!row.entrega_id?.length && !!row.plano_entrega_entrega_id?.length && (row.objeto?.plano_entrega_id || row.plano_entrega_entrega?.plano_entrega_id) == this.entity?.plano_entrega_id) {\r\n      form.controls.origem.setValue('MESMA_UNIDADE');\r\n      form.controls.entrega_id.setValue(null);\r\n      form.controls.plano_entrega_entrega_id.setValue(row.plano_entrega_entrega_id);\r\n    } else if (!row.entrega_id?.length && !!row.plano_entrega_entrega_id?.length && (row.objeto?.plano_entrega_id || row.plano_entrega_entrega?.plano_entrega_id) != this.entity?.plano_entrega_id) {\r\n      form.controls.origem.setValue('OUTRA_UNIDADE');\r\n      form.controls.entrega_id.setValue(null);\r\n      await this.carregarEntregasOutraUnidade(row.plano_entrega_entrega?.plano_entrega_id);\r\n      form.controls.plano_entrega_entrega_id.setValue(row.plano_entrega_entrega_id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para a excluso de uma entrega de plano de trabalho do grid, seja este componente persistente ou no. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeEntrega(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if (confirm) {\r\n      this.loading = true;\r\n      try {\r\n        this.isNoPersist ? Object.assign(row, { _status: \"DELETE\" }) : await this.dao?.delete(row.id);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho - ((row as PlanoTrabalhoEntrega).forca_trabalho * 1)) * 100) / 100;\r\n      return this.isNoPersist ? false : true; // (*3)\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado no salvamento de uma entrega do plano de trabalho do grid, seja este componente persistente ou no.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveEntrega(form: FormGroup, row: any) {\r\n    this.novaEntrega = row as PlanoTrabalhoEntrega;\r\n    this.novaEntrega.entrega_id = this.form?.controls.entrega_id.value ?? null;\r\n    this.novaEntrega.plano_entrega_entrega_id = this.form?.controls.plano_entrega_entrega_id.value;\r\n    this.novaEntrega.descricao = this.form?.controls.descricao.value;\r\n    this.novaEntrega.forca_trabalho = this.form?.controls.forca_trabalho.value;\r\n    this.loading = true;\r\n    try {\r\n      if (!this.isNoPersist) {\r\n        this.novaEntrega = await (this.dao as PlanoTrabalhoEntregaDaoService).save(this.novaEntrega, this.join);\r\n        if (this.grid?.adding) this.grid!.items[this.grid!.items.length - 1].id = '';  // (*4)\r\n      }\r\n    } catch (e: any) {\r\n      this.error(e.message ? e.message : e.toString() || e);\r\n    } finally {\r\n      row.objeto = this.entregaCatalogo?.selectedItem?.data || this.entregaMesmaUnidade?.selectedItem?.data || this.entregaOutraUnidade?.selectedItem?.data; // (*)\r\n      row.forca_trabalho = this.form?.controls.forca_trabalho.value * 1;\r\n      this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n      this.loading = false;\r\n    }\r\n    return this.novaEntrega;\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para somar os percentuais das foras de trabalho do array de entregas passado como parmetro.\r\n   * @param entregas Array de entregas do plano de trabalho\r\n   * @returns \r\n   */\r\n  public somaForcaTrabalho(entregas: PlanoTrabalhoEntrega[] = []): number {\r\n    return entregas.map(x => x.forca_trabalho * 1).reduce((a, b) => a + b, 0);\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado na inicializao do componente para armazenar as entregas da mesma unidade do plano de trabalho.\r\n   * @returns \r\n   */\r\n  public carregarEntregasMesmaUnidade(): LookupItem[] {\r\n    if (!this.entity?.id?.length) return this.entregasDoPlanoEntrega; // (*5)\r\n    let entregasPlanoEntrega = this.entity?.plano_entrega?.entregas || [];\r\n    let result = entregasPlanoEntrega.map(epe => Object.assign({}, { key: epe.id, value: epe.entrega?.nome || epe.descricao, data: epe }));\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para carregar as entregas de uma outra unidade, com base no seu plano de entregas passado como parmetro.\r\n   * @param idPlanoOuPlano ID do plano de entregas ou o seu objeto completo.\r\n   */\r\n  public async carregarEntregasOutraUnidade(idPlanoOuPlano: string | PlanoEntrega): Promise<void> {\r\n    this.cdRef.detectChanges();\r\n    this.planoEntregaOutraUnidade = typeof idPlanoOuPlano == 'string' ? await this.planoEntregaDao!.getById(idPlanoOuPlano, [\"entregas.entrega\", \"unidade\"]) : idPlanoOuPlano;\r\n    this.entregasOutraUnidade = this.planoEntregaOutraUnidade?.entregas.map(epe => Object.assign({}, { key: epe.id, value: epe.entrega?.nome || epe.descricao, data: epe })) || [];\r\n  }\r\n\r\n  /**\r\n   * Mtodo chamado para carregar as entregas existentes no Catlogo de Entregas.\r\n   * @returns \r\n   */\r\n  public async carregarEntregasCatalogo(): Promise<LookupItem[]> {\r\n    let result: LookupItem[] = [];\r\n    result = (await this.entregaDao?.query().getAll())?.map(ee => Object.assign({}, { key: ee.id, value: ee.nome, data: ee })) || [];\r\n    return result;\r\n  }\r\n\r\n  public tipoEntrega(row: any): badgeEntrega {\r\n    if (!!row.entrega_id?.length) return { label: 'Catlogo', cor: 'secondary', nome: !!row.objeto?.id?.length ? row.objeto?.nome || \"Desconhecido\" : row.entrega?.nome || \"Desconhecido1\" };\r\n    let IdDoPlanoEntregaDoPlanoTrabalho: string, IdDoPlanoEntregaDaEntrega: string, badge: string, nome: string, cor: string;\r\n    IdDoPlanoEntregaDoPlanoTrabalho = this.entity?.plano_entrega_id || this.entregasDoPlanoEntrega[0]?.data.plano_entrega_id || 'Desconhecido2';\r\n    IdDoPlanoEntregaDaEntrega = !!row.objeto?.id.length ? row.objeto?.plano_entrega_id || \"Desconhecido3\" : row.plano_entrega_entrega?.plano_entrega_id || \"Desconhecido4\";\r\n    [badge, cor] = IdDoPlanoEntregaDoPlanoTrabalho == IdDoPlanoEntregaDaEntrega ? ['Mesma unidade', 'success'] : ['Outra unidade', 'primary'];\r\n    nome = !!row.objeto?.id.length ? row.objeto?.entrega.nome || \"Desconhecido5\" : row.plano_entrega_entrega?.entrega.nome || \"Desconhecido6\";\r\n    return { label: badge, cor: cor, nome: nome };\r\n  }\r\n\r\n  /* ---------  TRATAMENTO DOS EVENTOS ----------- */\r\n\r\n  public onOrigemChange(row: any) {\r\n    let value = this.form!.controls.origem.value;\r\n    if (['MESMA_UNIDADE', 'OUTRA_UNIDADE'].includes(value)) {\r\n      this.form?.controls.entrega_id.setValue(null);\r\n      this.cdRef.detectChanges();\r\n      if (value == \"OUTRA_UNIDADE\") this.entregaOutraUnidade?.onSearchClick(this.entregaOutraUnidade?.searchRoute);\r\n    } else if (value == 'CATALOGO') {\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    }\r\n  }\r\n\r\n  public onEntregaMesmaUnidadeChange(event: Event) {\r\n    if (this.entregaMesmaUnidade?.selectedItem) {\r\n      this.form?.controls.descricao.setValue(this.entregaMesmaUnidade?.selectedItem?.value || '');\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(this.entregaMesmaUnidade?.selectedItem?.key);\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public onEntregaOutraUnidadeChange(event: Event) {\r\n    if (this.entregaOutraUnidade?.selectedItem) {\r\n      this.form?.controls.descricao.setValue(this.entregaOutraUnidade?.selectedItem?.value || '');\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(this.entregaOutraUnidade?.selectedItem?.key);\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public onEntregaCatalogoChange(event: Event) {\r\n    if (this.entregaCatalogo?.selectedItem) {\r\n      this.form?.controls.descricao.setValue(this.entregaCatalogo?.selectedItem?.value || '');\r\n      this.form?.controls.entrega_id.setValue(this.entregaCatalogo?.selectedItem?.key);\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public onForcaTrabalhoChange(row: any) {\r\n    let index = this.items.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.totalForcaTrabalho = Math.round((this.somaForcaTrabalho(this.grid?.items as PlanoTrabalhoEntrega[]) - (this.items[index].forca_trabalho * 1) + (this.form?.controls.forca_trabalho.value * 1)) * 100) / 100;\r\n  }\r\n}\r\n\r\n\r\n/*\r\nTESTES\r\n\r\n                                                  GRID PERSISTENTE                      GRID NO-PERSISTENTE\r\n                                              Fluxo Feliz    Validaes                Fluxo Feliz    Validaes\r\nIncluso Entrega Catlogo                          \r\nIncluso Entrega Mesma Unidade                     \r\nIncluso Entrega Outra Unidade                     \r\nAlterao Entrega Catlogo                         \r\nAlterao Entrega Mesma Unidade                    \r\nAlterao Entrega Outra Unidade                    \r\nCancelamento Entrega Catlogo                      \r\nCancelamento Entrega Mesma Unidade                 \r\nCancelamento Entrega Outra Unidade                 \r\nExcluso Entrega Catlogo                          \r\nExcluso Entrega Mesma Unidade                     \r\nExcluso Entrega Outra Unidade                     \r\n\r\n*/\r\n\r\n/*\r\nOBSERVAES:\r\n\r\n(*1)  let cont = this.entity?.entregas?.filter(e => !!e.entrega_id && !e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.entrega_id).reduce((acc, id) => { if(id === control.value) return acc + 1; else return acc; }, 0) || 0;\r\nFiltra as entregas da mesma unidade do plano de trabalho excluindo a entrega que est sendo editada. Em seguida conta aquelas que possuem o mesmo ID da que est sendo editada e dessa forma o resultado deve ser igual a 0, caso contrrio a entrega editada\r\nj existe no grid.\r\n\r\n(*2)  let cont = this.entity?.entregas?.filter(e => !e.entrega_id && !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.plano_entrega_entrega_id).reduce((acc, id) => { if(id === control.value) return acc + 1; else return acc; }, 0) || 0;\r\nIdem  obs 1, em relao s entregas de outras unidades.\r\n\r\n(*3)  return this.isNoPersist ? false : true;\r\nAps confirmada a remoo pelo usurio, a entrega  setada com _status = \"DELETE\" e  excluda da tela e sua confirmao  retornada para o mtodo onDeleteItem() do gridComponent, que a excluir tambm dos items do grid.\r\nEntretanto, quando se trata de um grid no persistente, ela no deve ser excluda dos items do grid, pois sua excluso s se efetivar quando entity for salva, levando\r\ntodas as suas entregas para o back-end, que finalmente excluir as que possurem _status = \"DELETE\".\r\n\r\n(*4)  if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';\r\nNo caso de o componente ser 'persistente', essa linha apaga o ID que foi criado pelo banco de dados permitindo ao mtodo saveItem do grid.component localiz-lo na sua lista de items para atualizar suas informaes na tela.\r\n\r\n(*5)  if(!this.entity?.id?.length) return this.entregasPlanoEntrega;\r\nQuando o componente for chamado por um plano de trabalho (entity) que j existe, no poder haver alterao no seu plano de entregas, portanto as entregas da mesma unidade do plano de trabalho sero lidas\r\nna prpria entity. No entanto, quando o plano de trabalho (entity) ainda no existir (!this.entity?.id?.length), essas entregas vo variar de acordo com o plano de entregas\r\nselecionado no inputSelectComponent, e portanto elas sero lidas na varivel que reflete essa escolha (this.entregasPlanoEntrega), e essa reflexo ocorre por causa do bind @Input() set/get entregasPlanoEntrega.\r\n\r\n\r\n----------------------+--------------------------------------+----------------------------+--------+--------+------------------------------------\r\nID do Plano           |       Pode ser que a 'row'           |  Caractersticas           | Possui | inputs | entrega_id \r\nde Trabalho           |                                      |                            | objeto | search | plano_entrega_entrega_id\r\n----------------------+--------------------------------------+----------------------------+--------+--------+-------------------------------------\r\n                      | - J tenha vindo do banco (TIPO I)   |                            |   NO  | nenhum | um dos dois\r\n                      |   (foi carregada junto com o Plano)  |                            |        |        |\r\n                      |--------------------------------------+----------------------------+--------+--------+--------------------------------------\r\n  EXISTE              | - Tenho sido salva agora no banco    |                            |   SIM  | um dos | um dos dois\r\n  - Ento o Grid     |   (TIPO II)                          |                            |        | trs   |\r\n    Persistente       |--------------------------------------+----------------------------+--------+--------+------------------------------------\r\n                      | - Esteja sendo criada agora          | addEntrega loadEntrega     |   NO  | um dos | nenhum\r\n                      |                                      |                            |        | trs   |\r\n                      |--------------------------------------+----------------------------+--------+--------+-----------------------------------     \r\n                      | - Seja do TIPO I e esteja sendo      | loadEntrega                |   NO  | um dos | um dos dois\r\n                      |   editada agora                      |                            |        | trs   |\r\n                      +--------------------------------------+----------------------------+--------+--------+------------------------------------\r\n                      | - Seja do TIPO II e esteja sendo     | loadEntrega                |   SIM  | um dos | um dos dois\r\n                      |   editada agora                      |                            |        | trs   |\r\n----------------------+--------------------------------------+----------------------------+--------+--------+-----------------------------------------\r\n  NO                 | - J exista nos itens do grid        |                            |   SIM  | nenhum | um dos dois\r\n  EXISTE              |   (foi salva agora, no no banco)    | Possui _status == \"ADD\"    |        |        |\r\n  - Ento o Grid     |--------------------------------------+----------------------------+--------+--------+---------------------------------------\r\n    No-persistente   | - Esteja sendo criada agora          | Possui _status == \"ADD\"    |   NO  | um dos | nenhum\r\n                      |                                      | addEntrega loadEntrega     |        | trs   |\r\n                      |--------------------------------------+----------------------------+--------+--------+---------------------------------------\r\n                      | - Tenha acabado de ser criada e      | Possui _status == \"ADD\"    |   SIM  | um dos | um dos dois\r\n                      |   j est sendo editada              | loadEntrega                |        | trs   |\r\n------------------------------------------------------------------------------------------+--------+--------+--------------------------------------\r\n(*) O ADD  inserido pelo mtodo addEntrega e s sai quando persiste no banco e volta\r\n(*) O objeto  inserido pelo mtodo saveEntrega e permanece mesmo depois de persistida no banco\r\n\r\n*/","<editable-form noButtons [form]=\"form!\" [disabled]=\"formDisabled\">\r\n    <div class=\"row\">\r\n        <grid [items]=\"items\" [form]=\"form!\" #gridEntregas editable [selectable]=\"false\" [minHeight]=\"items.length > 2 ? 0 : 220\" [join]=\"join\" [groupBy]=\"groupBy\"\r\n            [add]=\"addEntrega.bind(this)\" [remove]=\"removeEntrega.bind(this)\" [save]=\"saveEntrega.bind(this)\" [load]=\"loadEntrega.bind(this)\"\r\n            [hasDelete]=\"true\" [hasEdit]=\"true\" [hasAdd]=\"!disabled\">\r\n            <columns>\r\n                <column [titleTemplate]=\"titleOrigem\" [template]=\"columnOrigem\" [editTemplate]=\"editOrigem\" [verticalAlign]=\"'middle'\" [width]=\"125\" [align]=\"'center'\">\r\n                    <ng-template let-header=\"header\" #titleOrigem><div class=\"text-center\"><span><strong>Origem</strong></span></div></ng-template>\r\n                    <ng-template let-row=\"row\" #columnOrigem><span><small><badge [label]=\"tipoEntrega(row).label\" [color]=\"tipoEntrega(row).cor\"></badge></small></span></ng-template>\r\n                    <ng-template let-row=\"row\" #editOrigem><input-select #origem controlName=\"origem\" controlName=\"origem\" [control]=\"form!.controls.origem\" [items]=\"lookup.ORIGENS_ENTREGAS_PLANO_TRABALHO\" (change)=\"onOrigemChange(row)\"></input-select></ng-template>\r\n                </column>\r\n                <column [maxWidth]=\"350\" [titleTemplate]=\"titleEntrega\" [template]=\"columnEntrega\" [editTemplate]=\"editEntrega\" [verticalAlign]=\"'middle'\">\r\n                    <ng-template let-header=\"header\" #titleEntrega><span><strong>Entrega</strong></span></ng-template>\r\n                    <ng-template let-row=\"row\" #columnEntrega><small>{{ tipoEntrega(row).nome }}</small></ng-template>\r\n                    <ng-template let-row=\"row\" #editEntrega>\r\n                        <input-select *ngIf=\"origem?.value == 'MESMA_UNIDADE'\" #entregaMesmaUnidade nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregasMesmaUnidade\" (change)=\"onEntregaMesmaUnidadeChange($event)\"></input-select>\r\n                        <input-select *ngIf=\"origem?.value == 'OUTRA_UNIDADE'\" #entregaOutraUnidade nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregasOutraUnidade\" (change)=\"onEntregaOutraUnidadeChange($event)\" searchButton [sufix]=\"planoEntregaOutraUnidade?.unidade?.sigla\" [searchRoute]=\"{route: ['gestao', 'plano-entrega']}\" [afterSearch]=\"carregarEntregasOutraUnidade.bind(this)\"></input-select>\r\n                        <input-select *ngIf=\"origem?.value == 'CATALOGO'\" #entregaCatalogo nullable itemNull=\"- Selecione -\" controlName=\"entrega_id\" [control]=\"form!.controls.entrega_id\" [items]=\"entregasCatalogo\" (change)=\"onEntregaCatalogoChange($event)\"></input-select>\r\n                    </ng-template>\r\n                </column>\r\n                <column [titleTemplate]=\"titleForcaTrabalho\" [template]=\"columnForcaTrabalho\" [editTemplate]=\"editForcaTrabalho\" [width]=\"125\" [align]=\"'center'\">\r\n                    <ng-template let-header=\"header\" #titleForcaTrabalho>\r\n                        <div class=\"text-center\">\r\n                            <small><strong>% Fora Trab.</strong></small><br>\r\n                            <small><badge icon=\"bi bi-calculator\" [color]=\"totalForcaTrabalho == 100 ? 'success' : 'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge></small>\r\n                        </div>\r\n                    </ng-template>\r\n                    <ng-template let-row=\"row\" #columnForcaTrabalho><small>{{  row.forca_trabalho + '%' }}</small></ng-template>\r\n                    <ng-template let-row=\"row\" #editForcaTrabalho><input-text number sufix=\"%\" controlName=\"forca_trabalho\" [control]=\"form!.controls.forca_trabalho\" (change)=\"onForcaTrabalhoChange(row)\"></input-text></ng-template>\r\n                </column>\r\n                <column [maxWidth]=\"250\" [titleTemplate]=\"titleDescricao\" [template]=\"columnDescricao\" [editTemplate]=\"editDescricao\" [verticalAlign]=\"'middle'\">\r\n                    <ng-template let-header=\"header\" #titleDescricao><div class=\"text-center\"><span><strong>Detalhamento</strong></span></div></ng-template>\r\n                    <ng-template let-row=\"row\" #columnDescricao><small>{{ row.descricao }}</small></ng-template>\r\n                    <ng-template let-row=\"row\" #editDescricao><input-text controlName=\"descricao\" [control]=\"form!.controls.descricao\"></input-text></ng-template>\r\n                </column>\r\n                <column type=\"options\"></column>\r\n            </columns>\r\n        </grid>\r\n    </div>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: PlanoTrabalhoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Planos de Trabalho\" } },\r\n  { path: 'new', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Incluso de Plano de Trabalho\", modal: true } },\r\n  { path: 'termo', component: PlanoTrabalhoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de adeso\", modal: true } },\r\n  { path: ':id/edit', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edio de Plano de Trabalho\", modal: true } },\r\n  { path: ':id/consult', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Plano de Trabalho\", modal: true } },\r\n  { path: 'entregaList', component: PlanoTrabalhoListEntregaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Lista de Entregas do Plano de Trabalho\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanoTrabalhoRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlanoTrabalhoRoutingModule } from './plano-trabalho-routing.module';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlanoTrabalhoFormComponent,\r\n    PlanoTrabalhoListComponent,\r\n    PlanoTrabalhoListEntregaComponent,\r\n    PlanoTrabalhoFormTermoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    PlanoTrabalhoRoutingModule,\r\n    UteisModule\r\n  ]\r\n})\r\nexport class PlanoTrabalhoModule { }\r\n"],"names":["Base","PlanoTrabalhoAtividade","constructor","data","plano_trabalho_id","atividade_id","initialization","PlanoTrabalhoEntrega","descricao","forca_trabalho","entrega_id","plano_entrega_entrega_id","EditableFormComponent","DocumentoDaoService","PlanoTrabalhoDaoService","ProgramaDaoService","TipoDocumentoDaoService","TipoModalidadeDaoService","UnidadeDaoService","UsuarioDaoService","ListenerAllPagesService","PlanoTrabalho","PageFormBase","NavigateResult","PlanoTrabalhoFormTermoComponent","injector","validate","control","controlName","result","value","length","form","controls","numero_processo","formValidation","tipoDocumento","searchObj","tipo_documento_id","undefined","titleEdit","entity","lex","translate","usuario","nome","join","unidadeDao","get","programaDao","usuarioDao","tipoDocumentoDao","allPages","tipoModalidadeDao","documentoDao","fh","FormBuilder","carga_horaria","default","tempo_total","tempo_proporcional","data_inicio_vigencia","Date","data_fim_vigencia","programa_id","usuario_id","unidade_id","documento_id","documentos","vinculadas","tipo_modalidade_id","forma_contagem_carga_horaria","cdRef","onVinculadasChange","event","detectChanges","loadData","_this","_asyncToGenerator","formValue","Object","assign","util","fillForm","Promise","all","unidade","loadSearch","programa","tipoModalidade","tipo_modalidade","processo","id_processo","data_inicio","auth","hora","patchValue","initializeData","_this2","dao","getById","metadata","plano_trabalho","id","saveData","resolve","reject","codigo_tipo_documento","codigo","formaContagemCargaHoraria","forma","i0","directiveInject","Injector","selectors","viewQuery","PlanoTrabalhoFormTermoComponent_Query","rf","ctx","elementStart","listener","PlanoTrabalhoFormTermoComponent_Template_editable_form_submit_0_listener","onSaveData","PlanoTrabalhoFormTermoComponent_Template_editable_form_cancel_0_listener","onCancel","element","elementEnd","PlanoTrabalhoFormTermoComponent_Template_input_switch_change_24_listener","$event","property","formDisabled","isModal","title","advance","ganho_produtividade","atividades","AtividadeDaoService","PlanoEntregaDaoService","Documento","DocumentoService","CalendarService","PlanoTrabalhoService","TemplateService","ctx_r9","horasTotais","ctx_r10","horasParciais","elementContainerStart","PlanoTrabalhoFormComponent_ng_container_14_Template_input_workload_change_2_listener","restoreView","_r12","ctx_r11","nextContext","resetView","onCargaHorariaChenge","template","PlanoTrabalhoFormComponent_ng_container_14_separator_5_Template","PlanoTrabalhoFormComponent_ng_container_14_separator_6_Template","elementContainerEnd","ctx_r4","onFormaContagemCargaHorariaChange","bind","ctx_r5","ctx_r6","formEntregas","entregas","ctx_r7","editar_texto_complementar_unidade","planoDataset","editar_texto_complementar_usuario","ctx_r8","entityDocumentos","planoTrabalhoService","needSign","extraTags","documentoId","datasource","template","PlanoTrabalhoFormComponent","_entityDocumentos","validateAtividades","validateEntregas","indexOf","includes","isDataValid","getTime","gridAtividades","editing","tabs","active","apelido","atividadeDao","planoEntregaDao","documentoService","templateService","calendar","modalWidth","dataset","plano_entrega_id","unidade_texto_complementar","usuario_texto_complementar","formAtividades","ngOnInit","segment","url","path","action","texto_complementar_plano","JSON","stringify","_datasource","termo_obrigatorio","documento","find","x","assinaturas","tipo","generateUuid","push","especie","titulo","conteudo","renderTemplate","template_tcr","status","_status","entidade_id","entidade","template_id","template_tcr_id","setValue","isTermos","updateEntregas","planoEntrega","map","key","entrega","onPlanoEntregaSelect","selected","updateValueAndValidity","calculaTempos","onUsuarioSelect","onDataInicioChange","onDataFimChange","inicio","fim","carga","loadFeriadosCadastrados","then","feriados","calculaDataTempoUnidade","afastamentos","tempoUtil","plano_entrega","urlParams","carga_horaria_padrao","addAtividades","_this3","loadAtividades","row","removeAtividades","saveAtividades","_this4","atividade","addEntregas","_this5","loadEntregas","removeEntregas","saveEntregas","_this6","selectedItem","plano","loadEntity","fill","_this7","filter","submitting","save","update","documentoDynamicButtons","hint","icon","onClick","signDocumento","dialog","html","_this8","sign","unit","addDocumento","_this9","go","navigate","route","modalClose","modalResult","clearErros","showSppinerOverlay","termo","error","message","closeSppinerOverlay","isVigente","onProcessoClick","openDocumentoSei","id_documento","PlanoTrabalhoFormComponent_Query","PlanoTrabalhoFormComponent_Template_editable_form_submit_0_listener","PlanoTrabalhoFormComponent_Template_editable_form_cancel_0_listener","PlanoTrabalhoFormComponent_Template_input_search_select_5_listener","PlanoTrabalhoFormComponent_Template_input_search_select_7_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_10_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_11_listener","PlanoTrabalhoFormComponent_ng_container_14_Template","PlanoTrabalhoFormComponent_top_alert_16_Template","PlanoTrabalhoFormComponent_div_17_Template","PlanoTrabalhoFormComponent_tab_18_Template","PlanoTrabalhoFormComponent_tab_19_Template","pureFunction0","_c9","_c10","_r3","plano_trabalho_calcula_horas","checkFilled","_c11","_c12","ChangeDetectorRef","GridComponent","PageFrameBase","PlanoTrabalhoEntregaDaoService","EntregaDaoService","PlanoEntregaEntregaDaoService","text","tipoEntrega","row_r26","label","cor","PlanoTrabalhoListEntregaComponent_ng_template_10_Template_input_select_change_0_listener","restoredCtx","_r30","row_r27","ctx_r29","onOrigemChange","origem","lookup","ORIGENS_ENTREGAS_PLANO_TRABALHO","textInterpolate","row_r32","PlanoTrabalhoListEntregaComponent_ng_template_17_input_select_0_Template_input_select_change_0_listener","_r39","ctx_r38","onEntregaMesmaUnidadeChange","ctx_r34","entregasMesmaUnidade","PlanoTrabalhoListEntregaComponent_ng_template_17_input_select_1_Template_input_select_change_0_listener","_r42","ctx_r41","onEntregaOutraUnidadeChange","ctx_r35","entregasOutraUnidade","planoEntregaOutraUnidade","sigla","pureFunction1","_c5","_c4","carregarEntregasOutraUnidade","PlanoTrabalhoListEntregaComponent_ng_template_17_input_select_2_Template_input_select_change_0_listener","_r45","ctx_r44","onEntregaCatalogoChange","ctx_r36","entregasCatalogo","PlanoTrabalhoListEntregaComponent_ng_template_17_input_select_0_Template","PlanoTrabalhoListEntregaComponent_ng_template_17_input_select_1_Template","PlanoTrabalhoListEntregaComponent_ng_template_17_input_select_2_Template","ctx_r12","ctx_r14","totalForcaTrabalho","row_r47","PlanoTrabalhoListEntregaComponent_ng_template_24_Template_input_text_change_0_listener","_r50","row_r48","ctx_r49","onForcaTrabalhoChange","ctx_r18","row_r52","ctx_r24","PlanoTrabalhoListEntregaComponent","disabled","_disabled","noPersist","entregasDoPlanoEntrega","_entregasDoPlanoEntrega","carregarEntregasMesmaUnidade","items","gridControl","options","cont","e","grid","reduce","acc","entregaDao","planoTrabalhoDao","peeDao","entregaMesmaUnidade","entregaOutraUnidade","entregaCatalogo","_superprop_getNgOnInit","call","Math","round","somaForcaTrabalho","carregarEntregasCatalogo","addEntrega","isNoPersist","loadEntrega","objeto","plano_entrega_entrega","removeEntrega","confirm","loading","delete","saveEntrega","novaEntrega","adding","toString","a","b","entregasPlanoEntrega","epe","idPlanoOuPlano","query","getAll","ee","IdDoPlanoEntregaDoPlanoTrabalho","IdDoPlanoEntregaDaEntrega","badge","onSearchClick","searchRoute","index","findIndex","PlanoTrabalhoListEntregaComponent_Query","PlanoTrabalhoListEntregaComponent_ng_template_6_Template","templateRefExtractor","PlanoTrabalhoListEntregaComponent_ng_template_8_Template","PlanoTrabalhoListEntregaComponent_ng_template_10_Template","PlanoTrabalhoListEntregaComponent_ng_template_13_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_Template","PlanoTrabalhoListEntregaComponent_ng_template_17_Template","PlanoTrabalhoListEntregaComponent_ng_template_20_Template","PlanoTrabalhoListEntregaComponent_ng_template_22_Template","PlanoTrabalhoListEntregaComponent_ng_template_24_Template","PlanoTrabalhoListEntregaComponent_ng_template_27_Template","PlanoTrabalhoListEntregaComponent_ng_template_29_Template","PlanoTrabalhoListEntregaComponent_ng_template_31_Template","groupBy","_r1","_r5","_r7","_r9","_r11","_r13","_r15","_r17","_r19","_r21","_r23","RouterModule","AuthGuard","ConfigResolver","PlanoTrabalhoListComponent","routes","component","canActivate","config","runGuardsAndResolvers","modal","PlanoTrabalhoRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UteisModule","PlanoTrabalhoModule","declarations","NgIf","i2","i3","ColumnsComponent","i4","ColumnComponent","i5","FilterComponent","i6","ToolbarComponent","i7","PaginationComponent","i8","InputSwitchComponent","i9","InputSearchComponent","i10","InputTextComponent","i11","InputDatetimeComponent","i12","InputSelectComponent","i13","ReportComponent","i14","OrderComponent","i15","DocumentosBadgeComponent"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[8448],{6067:(H,f,o)=>{o.r(f),o.d(f,{ClienteModule:()=>P});var j=o(6610),B=o(8832),E=o(8425),h=o(1260),d=o(1620),m=o(6819),v=o(5611),u=o(5099),C=o(5492),D=o(291);class c extends D.C{constructor(){super(...arguments),this.nome="",this.tipo_cliente_id="",this.unidade_id=""}}var b=o(9062),e=o(3279),F=o(2034),L=o(5852),R=o(7772),V=o(2305),M=o(6764),g=o(16),G=o(3678);function N(s,X){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&s){const n=X.row;e.R7$(),e.SpI(" ",null==n.tipo_cliente?null:n.tipo_cliente.nome,"")}}let A=(()=>{class s extends b.P{constructor(n,l){super(n,c,u.K),this.injector=n,this.filterWhere=t=>{let i=[],a=t.value;return a.nome?.length&&i.push(["nome","like","%"+a.nome.trim().replace(" ","%")+"%"]),t?.controls.tipo_cliente_id?.value?.length&&i.push(["tipo_cliente_id","==",t?.controls.tipo_cliente_id?.value]),i},this.tipoClienteDao=n.get(C.E),this.dao=l,this.title=this.lex.translate("Clientes"),this.filter=this.fh.FormBuilder({nome:{default:""},tipo_cliente_id:{default:null}}),this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.join=["tipoCliente"],this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(n){n.controls.nome.setValue(""),super.filterClear(n)}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(e.zZn),e.rXU(u.K))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-cliente-list"]],viewQuery:function(l,t){if(1&l&&e.GBs(v._,5),2&l){let i;e.mGM(i=e.lsd())&&(t.grid=i.first)}},features:[e.Vt3],decls:13,vars:29,consts:[["columnTipo",""],[3,"select","dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit","selectable"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","tipo_cliente_id","nullable","",3,"size","label","control","dao"],["controlName","nome",3,"size","label","control","placeholder"],["title","Tipo",3,"template"],["title","Descri\xe7\xe3o","field","nome"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(l,t){if(1&l){const i=e.RV6();e.j41(0,"grid",1),e.bIt("select",function(r){return e.eBV(i),e.Njj(t.onSelect(r))}),e.nrm(1,"toolbar"),e.j41(2,"filter",2)(3,"div",3),e.nrm(4,"input-select",4)(5,"input-text",5),e.k0s()(),e.j41(6,"columns")(7,"column",6),e.DNE(8,N,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.nrm(10,"column",7)(11,"column",8),e.k0s(),e.nrm(12,"pagination",9),e.k0s()}if(2&l){const i=e.sdS(9);e.Y8G("dao",t.dao)("add",t.add)("title",t.isModal?"":t.title)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join)("hasAdd",!0)("hasEdit",!0)("selectable",t.selectable),e.R7$(2),e.Y8G("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",t.filterCollapsed),e.R7$(2),e.Y8G("size",4)("label",t.lex.translate("Tipo Cliente"))("control",t.filter.controls.tipo_cliente_id)("dao",t.tipoClienteDao),e.R7$(),e.Y8G("size",8)("label","Nome")("control",t.filter.controls.nome)("placeholder","Nome"),e.BMQ("maxlength",250),e.R7$(2),e.Y8G("template",i),e.R7$(4),e.Y8G("onEdit",t.edit)("options",t.options),e.R7$(),e.Y8G("rows",t.rowsLimit)}},dependencies:[v._,F.T,L.I,R.i,V.H,M.e,g.H,G.K]})}}return s})();var z=o(3308),y=o(1641),I=o(3535),$=o(24),Y=o(9226);const U=["tipoCliente"],O=["unidade"],Q=["nome"];let p=(()=>{class s extends $.n{constructor(n){super(n,c,u.K),this.injector=n,this.tiposCliente=[],this.tipoClienteDao=n.get(C.E),this.unidadeDao=n.get(I.s),this.form=this.fh.FormBuilder({nome:{default:""},tipo_cliente_id:{default:""},unidade_id:{default:""}})}loadData(n,l){var t=this;return(0,z.A)(function*(){let i=Object.assign({},l.value),a=t.util.fillForm(i,n);const r=yield t.tipoClienteDao.query().getAll();t.tiposCliente=r.map(T=>({key:T.id,value:T.nome})),l.patchValue(a)})()}initializeData(n){this.loadData(new c,n)}saveData(n){return new Promise((l,t)=>{const i=this.util.fill(new c,this.entity);l(this.util.fillForm(i,this.form.value))})}alteraTipo(){"c28122f5-708d-11ef-8e76-0242ac1c0002"==this.tipoCliente?.value?(this.unidade?.selfElement?.nativeElement.classList.remove("d-none"),this.nome?.selfElement?.nativeElement.classList.add("d-none")):(this.form?.controls.unidade_id.setValue(""),this.unidade?.selfElement?.nativeElement.classList.add("d-none"),this.nome?.selfElement?.nativeElement.classList.remove("d-none"))}selecionaUnidade(n){this.form?.controls.nome.setValue(n.entity?.nome)}static{this.\u0275fac=function(l){return new(l||s)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-cliente-form"]],viewQuery:function(l,t){if(1&l&&(e.GBs(y.Q,5),e.GBs(U,5),e.GBs(O,5),e.GBs(Q,5)),2&l){let i;e.mGM(i=e.lsd())&&(t.editableForm=i.first),e.mGM(i=e.lsd())&&(t.tipoCliente=i.first),e.mGM(i=e.lsd())&&(t.unidade=i.first),e.mGM(i=e.lsd())&&(t.nome=i.first)}},features:[e.Vt3],decls:8,vars:11,consts:[["tipoCliente",""],["unidade",""],["nome",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Tipo","itemTodos","- Selecione -","controlName","tipo_cliente_id",3,"change","size","valueTodos","items"],["label","Unidade","controlName","unidade_id",3,"select","size","dao","classList"],["label","Nome","controlName","nome","required","",3,"size"]],template:function(l,t){if(1&l){const i=e.RV6();e.j41(0,"editable-form",3),e.bIt("submit",function(){return e.eBV(i),e.Njj(t.onSaveData())})("cancel",function(){return e.eBV(i),e.Njj(t.onCancel())}),e.j41(1,"div",4)(2,"input-select",5,0),e.bIt("change",function(){return e.eBV(i),e.Njj(t.alteraTipo())}),e.k0s(),e.j41(4,"input-search",6,1),e.bIt("select",function(r){return e.eBV(i),e.Njj(t.selecionaUnidade(r))}),e.k0s(),e.nrm(6,"input-text",7,2),e.k0s()()}2&l&&(e.Y8G("form",t.form)("disabled",t.formDisabled)("title",t.isModal?"":t.title),e.R7$(2),e.Y8G("size",3)("valueTodos",null)("items",t.tiposCliente),e.R7$(2),e.Y8G("size",9)("dao",t.unidadeDao)("classList","d-none"),e.R7$(2),e.Y8G("size",9),e.BMQ("maxlength",250))},dependencies:[y.Q,Y.O,g.H,G.K]})}}return s})();const S=[{path:"",component:A,canActivate:[d.q],resolve:{config:m.L},runGuardsAndResolvers:"always",data:{title:"Clientes"}},{path:"new",component:p,canActivate:[d.q],resolve:{config:m.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Cliente",modal:!0}},{path:":id/edit",component:p,canActivate:[d.q],resolve:{config:m.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Cliente",modal:!0}},{path:":id/consult",component:p,canActivate:[d.q],resolve:{config:m.L},runGuardsAndResolvers:"always",data:{title:"Consulta a Cliente",modal:!0}}];let K=(()=>{class s{static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(S),h.iI]})}}return s})(),P=(()=>{class s{static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[j.MD,E.h,B.X1,K]})}}return s})()}}]);
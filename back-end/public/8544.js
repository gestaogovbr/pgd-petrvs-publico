"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[8544],{8544:(bt,T,l)=>{l.r(T),l.d(T,{TipoAvaliacaoModule:()=>vt});var c=l(6610),b=l(8069),m=l(1620),u=l(6819),p=l(3308),A=l(1641),j=l(3283),v=l(291);class d extends v.C{constructor(n){super(),this.notas=[],this.tipo="QUANTITATIVO",this.nome="",this.initialization(n)}}var G=l(24),I=l(1508),R=l(7923);class O extends v.C{constructor(n){super(),this.sequencia=0,this.nota=0,this.descricao="",this.aprova=!1,this.justifica=!1,this.pergunta="",this.icone="",this.cor="",this.codigo="",this.justificativas=[],this.tipo_avaliacao_id="",this.initialization(n)}}class D extends v.C{constructor(n){super(),this.tipo_avaliacao_nota_id="",this.tipo_justificativa_id="",this.initialization(n)}}var t=l(3279),h=l(5611),C=l(2034),N=l(5852),Y=l(114),E=l(16),y=l(3678),$=l(4054),L=l(1230),S=l(8857),F=l(5201),z=l(368);const B=()=>["cadastros","tipo-justificativa","new"],V=a=>({route:a});function P(a,n){if(1&a&&(t.j41(0,"strong"),t.EFF(1),t.k0s()),2&a){const o=n.row;t.R7$(),t.JRh(o.nota)}}function M(a,n){if(1&a&&t.nrm(0,"input-number",24),2&a){const o=t.XpG(2);t.Y8G("control",o.formNota.controls.nota)}}function J(a,n){if(1&a&&t.nrm(0,"input-text",24),2&a){const o=t.XpG(2);t.Y8G("control",o.formNota.controls.nota),t.BMQ("maxlength",250)}}function Q(a,n){if(1&a&&(t.DNE(0,M,1,1,"input-number",22)(1,J,1,2,"input-text",22),t.nrm(2,"input-text",23)),2&a){const o=t.XpG();t.Y8G("ngIf","QUANTITATIVO"==o.form.controls.tipo.value),t.R7$(),t.Y8G("ngIf","QUALITATIVO"==o.form.controls.tipo.value),t.R7$(),t.Y8G("control",o.formNota.controls.codigo),t.BMQ("maxlength",250)}}function X(a,n){if(1&a&&t.nrm(0,"badge",25),2&a){const o=n.row;t.Y8G("label",o.descricao)("icon",o.icone)("color",o.cor)}}function w(a,n){if(1&a&&t.nrm(0,"input-text",26)(1,"input-select",27)(2,"input-color",28),2&a){const o=t.XpG();t.Y8G("control",o.formNota.controls.descricao),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",6)("control",o.formNota.controls.icone)("items",o.lookup.ICONES),t.R7$(),t.Y8G("size",6)("control",o.formNota.controls.cor)}}function U(a,n){1&a&&t.nrm(0,"badge",32)}function x(a,n){1&a&&t.nrm(0,"badge",33)}function k(a,n){if(1&a&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.j41(2,"div",29),t.DNE(3,U,1,0,"badge",30)(4,x,1,0,"badge",31),t.k0s()),2&a){const o=n.row;t.R7$(),t.JRh(o.pergunta),t.R7$(2),t.Y8G("ngIf",o.aprova),t.R7$(),t.Y8G("ngIf",o.justifica)}}function H(a,n){if(1&a&&(t.nrm(0,"input-text",24),t.j41(1,"div",12),t.nrm(2,"input-switch",34)(3,"input-switch",35),t.k0s()),2&a){const o=t.XpG();t.Y8G("control",o.formNota.controls.pergunta),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("size",12)("control",o.formNota.controls.aprova),t.R7$(),t.Y8G("size",12)("control",o.formNota.controls.justifica)}}function W(a,n){1&a&&t.nrm(0,"badge",37),2&a&&t.Y8G("label",n.$implicit.tipo_justificativa.nome)}function Z(a,n){if(1&a&&(t.j41(0,"div",29),t.DNE(1,W,1,1,"badge",36),t.k0s()),2&a){const o=n.row;t.R7$(),t.Y8G("ngForOf",o.justificativas)}}function K(a,n){if(1&a&&(t.j41(0,"input-multiselect",38),t.nrm(1,"input-select",39,10),t.k0s()),2&a){const o=t.sdS(2),e=t.XpG();t.Y8G("size",12)("canEdit",!0)("addItemControl",o)("control",e.formNota.controls.justificativas),t.R7$(),t.Y8G("size",12)("control",e.formNota.controls.tipo_justificativa_id)("dao",e.tipoJustificativaDao)("addRoute",t.eq3(9,V,t.lJ4(8,B)))}}let g=(()=>{class a extends G.n{constructor(o){super(o,d,j.h),this.injector=o,this.justificativasLista=[],this.tipoJustificativa=new R.x,this.validate=(e,i)=>{let s=null;return["nome"].indexOf(i)>=0&&!e.value?.length&&(s="Obrigat\xf3rio"),s},this.validateNota=(e,i)=>{let s=null;return["pergunta","descricao","icone"].indexOf(i)>=0&&!e.value?.length&&(s="Obrigat\xf3rio"),s},this.titleEdit=e=>"Editando "+this.lex.translate("Tipo de Avalia\xe7\xe3o")+": "+(e?.nome||""),this.tipoJustificativaDao=o.get(I.s),this.join=["notas.justificativas.tipo_justificativa"],this.form=this.fh.FormBuilder({nome:{default:""},tipo:{default:"QUANTITATIVO"},notas:{default:[]}},this.cdRef,this.validate),this.formNota=this.fh.FormBuilder({descricao:{default:""},nota:{default:0},codigo:{default:""},aprova:{default:!1},pergunta:{default:""},justifica:{default:!1},icone:{default:""},cor:{default:""},justificativas:{default:[]},tipo_justificativa_id:{default:null}},this.cdRef,this.validateNota)}loadData(o,e){let i=Object.assign({},e.value);e.patchValue(this.util.fillForm(i,o))}initializeData(o){this.entity=new d,this.loadData(this.entity,o)}saveData(o){return new Promise((e,i)=>{let s=this.util.fill(new d,this.entity);s=this.util.fillForm(s,this.form.value),e(s)})}addNota(){var o=this;return(0,p.A)(function*(){return new O({tipo_avaliacao_id:o.entity.id,sequencia:o.form.controls.notas.value.length+1})})()}loadNota(o,e){return(0,p.A)(function*(){o.patchValue(e),o.controls.tipo_justificativa_id.setValue(null),o.controls.justificativas.setValue(e.justificativas?.map(i=>Object.assign({},{key:i.tipo_justificativa_id,value:i.tipo_justificativa.nome,data:i.tipo_justificativa}))||[])})()}removeNota(o){var e=this;return(0,p.A)(function*(){return yield e.dialog.confirm("Exclui ?","Deseja realmente excluir?")})()}saveNota(o,e){var i=this;return(0,p.A)(function*(){let s=o.controls.justificativas.value||[];return i.util.fillForm(e,o.value),e.justificativas=s.map(r=>(e.justificativas||[]).find(_=>_.tipo_justificativa_id==r.key)||new D({tipo_avaliacao_nota_id:i.entity.id,tipo_justificativa_id:r.key,tipo_justificativa:r.data})),e})()}static{this.\u0275fac=function(e){return new(e||a)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-tipo-avaliacao-form"]],viewQuery:function(e,i){if(1&e&&t.GBs(A.Q,5),2&e){let s;t.mGM(s=t.lsd())&&(i.editableForm=s.first)}},features:[t.Vt3],decls:30,vars:25,consts:[["tipo",""],["grid",""],["columnNota",""],["editNota",""],["columnDescricao",""],["editDescricao",""],["columnPerguntaConfiguracoes",""],["editPerguntaConfiguracoes",""],["columnJustificativas",""],["editJustificativas",""],["justificativa",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","T\xedtulo","controlName","nome","required","",3,"size"],["label","Tipo da nota","controlName","tipo",3,"size","items"],["title","Notas"],["editable","",3,"control","form","hasDelete","add","load","remove","save"],["title","Nota",3,"template","editTemplate"],["title","Descri\xe7\xe3o/Icone/Cor",3,"template","editTemplate"],[3,"title","template","editTemplate"],[3,"title","width","template","editTemplate"],["type","options"],[3,"control",4,"ngIf"],["placeholder","C\xf3digo integra\xe7\xe3o",3,"control"],[3,"control"],[3,"label","icon","color"],["placeholder","Descri\xe7\xe3o",3,"control"],["icon","fas fa-sign-out-alt",3,"size","control","items"],[3,"size","control"],[1,"one-per-line"],["color","success","icon","bi bi-check","label","Aprova","hint","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel",4,"ngIf"],["color","warning","icon","bi bi-patch-question","label","Justifica","hint","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa",4,"ngIf"],["color","success","icon","bi bi-check","label","Aprova","hint","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel"],["color","warning","icon","bi bi-patch-question","label","Justifica","hint","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa"],["scale","small","labelPosition","right","label","Aprova?","labelInfo","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel",3,"size","control"],["scale","small","labelPosition","right","label","Justifica?","labelInfo","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa",3,"size","control"],["color","light",3,"label",4,"ngFor","ngForOf"],["color","light",3,"label"],["noBox","",3,"size","canEdit","addItemControl","control"],["fullEntity","",3,"size","control","dao","addRoute"]],template:function(e,i){if(1&e){const s=t.RV6();t.j41(0,"editable-form",11),t.bIt("submit",function(){return t.eBV(s),t.Njj(i.onSaveData())})("cancel",function(){return t.eBV(s),t.Njj(i.onCancel())}),t.j41(1,"div",12),t.nrm(2,"input-text",13)(3,"input-select",14,0),t.k0s(),t.j41(5,"separator",15)(6,"grid",16,1)(8,"columns")(9,"column",17),t.DNE(10,P,2,1,"ng-template",null,2,t.C5r)(12,Q,3,4,"ng-template",null,3,t.C5r),t.k0s(),t.j41(14,"column",18),t.DNE(15,X,1,3,"ng-template",null,4,t.C5r)(17,w,3,7,"ng-template",null,5,t.C5r),t.k0s(),t.j41(19,"column",19),t.DNE(20,k,5,3,"ng-template",null,6,t.C5r)(22,H,4,6,"ng-template",null,7,t.C5r),t.k0s(),t.j41(24,"column",20),t.DNE(25,Z,2,1,"ng-template",null,8,t.C5r)(27,K,3,11,"ng-template",null,9,t.C5r),t.k0s(),t.nrm(29,"column",21),t.k0s()()()()}if(2&e){const s=t.sdS(11),r=t.sdS(13),f=t.sdS(16),_=t.sdS(18),ht=t.sdS(21),gt=t.sdS(23),_t=t.sdS(26),Tt=t.sdS(28);t.Y8G("form",i.form)("disabled",i.formDisabled)("title",i.isModal?"":i.title),t.R7$(2),t.Y8G("size",8),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",4)("items",i.lookup.TIPO_AVALIACAO_TIPO),t.R7$(3),t.Y8G("control",i.form.controls.notas)("form",i.formNota)("hasDelete",!0)("add",i.addNota.bind(i))("load",i.loadNota.bind(i))("remove",i.removeNota.bind(i))("save",i.saveNota.bind(i)),t.R7$(3),t.Y8G("template",s)("editTemplate",r),t.R7$(5),t.Y8G("template",f)("editTemplate",_),t.R7$(5),t.Y8G("title","Pergunta motivacional\nConfigura\xe7\xf5es")("template",ht)("editTemplate",gt),t.R7$(5),t.Y8G("title",i.lex.translate("Tipos de justificativa"))("width",300)("template",_t)("editTemplate",Tt)}},dependencies:[c.Sq,c.bT,h._,C.T,N.I,A.Q,Y.S,E.H,y.K,$.f,L.b,S.F,F.n,z.n]})}}return a})();var q=l(9062),tt=l(7772),ot=l(2305),at=l(6764);function it(a,n){1&a&&t.nrm(0,"toolbar")}function et(a,n){1&a&&t.EFF(0),2&a&&t.SpI(" ",n.row.nome," ")}function nt(a,n){if(1&a&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&a){const o=t.XpG().row,e=t.XpG();t.R7$(),t.SpI(" ",e.getNotasText(o.notas)," ")}}function lt(a,n){1&a&&t.nrm(0,"badge",19)}function st(a,n){1&a&&t.nrm(0,"badge",20)}function rt(a,n){if(1&a&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"badge",16),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nrm(5,"br"),t.j41(6,"small"),t.EFF(7),t.k0s(),t.nrm(8,"br"),t.k0s(),t.j41(9,"td"),t.DNE(10,lt,1,0,"badge",17)(11,st,1,0,"badge",18),t.k0s()()),2&a){const o=n.$implicit;t.R7$(2),t.Y8G("label",o.nota)("icon",o.icon)("color",o.cor),t.R7$(2),t.SpI(" ",o.descricao,""),t.R7$(3),t.JRh(o.pergunta),t.R7$(3),t.Y8G("ngIf",o.aprova),t.R7$(),t.Y8G("ngIf",o.justifica)}}function ct(a,n){if(1&a&&(t.j41(0,"table",13)(1,"thead")(2,"tr")(3,"th",14),t.EFF(4,"Nota"),t.k0s(),t.j41(5,"th",14),t.EFF(6,"Descri\xe7\xe3o"),t.nrm(7,"br"),t.j41(8,"small"),t.EFF(9,"Pergunta motivacional"),t.k0s()(),t.j41(10,"th",14),t.EFF(11,"Op\xe7\xf5es"),t.k0s()()(),t.j41(12,"tbody"),t.DNE(13,rt,12,7,"tr",15),t.k0s()()),2&a){const o=t.XpG().row,e=t.XpG();t.R7$(13),t.Y8G("ngForOf",e.notasOrdenadas(o).notas)}}function mt(a,n){if(1&a&&t.DNE(0,nt,2,1,"div",12)(1,ct,14,1,"ng-template",null,2,t.C5r),2&a){const o=t.sdS(2),e=t.XpG();t.Y8G("ngIf",e.selectable)("ngIfElse",o)}}const ut=[{path:"",component:(()=>{class a extends q.P{constructor(o){super(o,d,j.h),this.injector=o,this.filterWhere=e=>{let i=[],s=e.value;return s.nome?.length&&i.push(["nome","like","%"+s.nome.trim().replace(" ","%")+"%"]),i},this.title=this.lex.translate("Tipos de Avalia\xe7\xe3o"),this.code="MOD_TIPO_AVAL",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.addOption(this.OPTION_INFORMACOES),this.addOption(this.OPTION_EXCLUIR,"MOD_TIPO_AVAL_EXCL"),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}getNotasText(o){return o.map(e=>e.nota).join(", ")}notasOrdenadas(o){let e=o.notas;return e.sort((i,s)=>i.sequencia-s.sequencia),o.notas=e,o}static{this.\u0275fac=function(e){return new(e||a)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-tipo-avaliacao-list"]],viewQuery:function(e,i){if(1&e&&t.GBs(h._,5),2&e){let s;t.mGM(s=t.lsd())&&(i.grid=s.first)}},features:[t.Vt3],decls:14,vars:25,consts:[["columnNome",""],["columnNotas",""],["tabelaNotas",""],[3,"select","dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit"],[4,"ngIf"],[3,"deleted","form","where","submit","collapseChange","collapsed"],[1,"row"],["controlName","nome","placeholder","Nome...",3,"size","label","control"],["title","Nome",3,"template"],["title","Notas",3,"template"],["type","options",3,"onEdit","options"],[3,"rows"],[4,"ngIf","ngIfElse"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"label","icon","color"],["icon","bi bi-hand-thumbs-up","color","success","label","Aprova",4,"ngIf"],["icon","bi bi-patch-question","color","primary","label","Justifica",4,"ngIf"],["icon","bi bi-hand-thumbs-up","color","success","label","Aprova"],["icon","bi bi-patch-question","color","primary","label","Justifica"]],template:function(e,i){if(1&e){const s=t.RV6();t.j41(0,"grid",3),t.bIt("select",function(f){return t.eBV(s),t.Njj(i.onSelect(f))}),t.DNE(1,it,1,0,"toolbar",4),t.j41(2,"filter",5)(3,"div",6),t.nrm(4,"input-text",7),t.k0s()(),t.j41(5,"columns")(6,"column",8),t.DNE(7,et,1,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(9,"column",9),t.DNE(10,mt,3,2,"ng-template",null,1,t.C5r),t.k0s(),t.nrm(12,"column",10),t.k0s(),t.nrm(13,"pagination",11),t.k0s()}if(2&e){const s=t.sdS(8),r=t.sdS(11);t.Y8G("dao",i.dao)("add",i.add)("title",i.isModal?"":i.title)("orderBy",i.orderBy)("groupBy",i.groupBy)("join",i.join)("selectable",i.selectable)("hasAdd",i.auth.hasPermissionTo("MOD_TIPO_AVAL_INCL"))("hasEdit",i.auth.hasPermissionTo("MOD_TIPO_AVAL_EDT")),t.R7$(),t.Y8G("ngIf",!i.selectable),t.R7$(),t.Y8G("deleted",i.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",i.filter)("where",i.filterWhere)("submit",i.filterSubmit.bind(i))("collapseChange",i.filterCollapseChange.bind(i))("collapsed",i.filterCollapsed),t.R7$(2),t.Y8G("size",12)("label","Nome "+i.lex.translate("tipo de avalia\xe7\xe3o"))("control",i.filter.controls.nome),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("template",s),t.R7$(3),t.Y8G("template",r),t.R7$(3),t.Y8G("onEdit",i.edit)("options",i.options),t.R7$(),t.Y8G("rows",i.rowsLimit)}},dependencies:[c.Sq,c.bT,h._,C.T,N.I,tt.i,ot.H,at.e,E.H,F.n]})}}return a})(),canActivate:[m.q],resolve:{config:u.L},runGuardsAndResolvers:"always",data:{title:"Tipos de Avalia\xe7\xe3o"}},{path:"new",component:g,canActivate:[m.q],resolve:{config:u.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Tipo de Avalia\xe7\xe3o",modal:!0}},{path:":id/edit",component:g,canActivate:[m.q],resolve:{config:u.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Tipo de Avalia\xe7\xe3o",modal:!0}},{path:":id/consult",component:g,canActivate:[m.q],resolve:{config:u.L},runGuardsAndResolvers:"always",data:{title:"Consulta a Tipo de Avalia\xe7\xe3o",modal:!0}}];let pt=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(ut),b.iI]})}}return a})();var dt=l(9455),ft=l(8832);let vt=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[c.MD,dt.h,ft.X1,pt]})}}return a})()}}]);
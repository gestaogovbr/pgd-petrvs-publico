"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[2076],{6353:(O,h,l)=>{l.d(h,{Q:()=>f});var s=l(3308),d=l(9592),i=l(3609),u=l(901),c=l(3279),m=l(6098),_=l(6610);const p=v=>({cursor:v});let f=(()=>{class v extends d.x{set imgIcon(e){this._imgIcon!=e&&(this._imgIcon=e,this.loadSvg())}get imgIcon(){return this._imgIcon}constructor(e,o){super(e),this.injector=e,this.sanitizer=o,this.title="",this.textColor="#ddd",this.borderColor="#000",this.externalLink=!1,this._imgIcon=!1,this.go=e.get(i.T),this.server=e.get(u.Z)}ngOnInit(){}loadSvg(){var e=this;return(0,s.A)(function*(){e.seuCodigoSvg$=yield e.server.getSvg(e.imgIcon)})()}onClick(){this.route&&(this.externalLink?window.open(this.route.route.toString(),"_blank"):this.go.navigate(this.route,this.metadata))}static{this.\u0275fac=function(o){return new(o||v)(c.rXU(c.zZn),c.rXU(m.up))}}static{this.\u0275cmp=c.VBU({type:v,selectors:[["app-button-dashboard"]],inputs:{title:"title",textColor:"textColor",borderColor:"borderColor",route:"route",metadata:"metadata",externalLink:"externalLink",imgIcon:"imgIcon"},features:[c.Vt3],decls:6,vars:7,consts:[[1,"card","h-100",3,"click","ngStyle"],[1,"card-body","text-center","buttons-home"],[3,"innerHTML"],[1,"fs-5","fw-semibold","mt-3"]],template:function(o,t){if(1&o&&(c.j41(0,"div",0),c.bIt("click",function(){return t.onClick()}),c.j41(1,"div",1),c.nrm(2,"div",2),c.nI1(3,"async"),c.j41(4,"h2",3),c.EFF(5),c.k0s()()()),2&o){let n;c.Y8G("ngStyle",c.eq3(5,p,t.route?"pointer":"inherit")),c.R7$(2),c.Y8G("innerHTML",t.sanitizer.bypassSecurityTrustHtml(null!==(n=c.bMT(3,3,t.seuCodigoSvg$))&&void 0!==n?n:""),c.npT),c.R7$(3),c.JRh(t.title)}},dependencies:[_.B3,_.Jj],styles:[".card[_ngcontent-%COMP%]:hover{box-shadow:inset 5px -8px 9px #a5a5a554}"]})}}return v})()},5556:(O,h,l)=>{l.d(h,{j:()=>p});var s=l(3279),d=l(8832),i=l(9328),u=l(6610),c=l(3890);const m=["inputElement"];function _(f,v){if(1&f){const a=s.RV6();s.j41(0,"input",5,0),s.bIt("change",function(o){s.eBV(a);const t=s.XpG();return s.Njj(t.onChange(o))}),s.k0s()}if(2&f){const a=s.XpG();s.AVh("is-invalid",a.isInvalid()),s.Y8G("formControl",a.workControl)("id",a.generatedId(a.controlName))("readonly",a.isDisabled),s.BMQ("aria-describedby",a.controlName+"_button")("max",a.isDaysOrHours?void 0:a.maxValue)}}let p=(()=>{class f extends i.O{set unit(a){this._unit!=a&&(this._unit=a,this.maxValue="day"==this.unit?24:"week"==this.unit?120:480,this.valueToWork(),this.detectChanges())}get unit(){return this._unit}set control(a){this._control=a}get control(){return this.getControl()}set size(a){this.setSize(a)}get size(){return this.getSize()}constructor(a){super(a),this.injector=a,this.class="form-group",this.change=new s.bkB,this.hostClass="",this.labelPosition="top",this.controlName=null,this.icon="",this.label="",this.labelInfo="",this.bold=!1,this.value=0,this.loading=!1,this.workControl=new d.MJ,this.maxValue=24,this._unit="day"}ngAfterViewInit(){super.ngAfterViewInit(),this.control&&(this.control.valueChanges.subscribe(a=>this.valueToWork()),this.valueToWork())}onButtonClick(a){const e=this.isDaysOrHours?"day"==this.unit?"hour":"day":"day"==this.unit?"week":"week"==this.unit?"mouth":"day";console.log(this.unit,e),this.unit=e,this.unitChange&&this.unitChange(e)}get isDaysOrHours(){return null!=this.daysOrHours}get iconWork(){return"hour"==this.unit?"bi bi-clock":"day"==this.unit?"bi bi-calendar3-event":"week"==this.unit?"bi bi-calendar3-week":"bi bi-calendar3"}get unitWork(){return"hour"==this.unit?"horas":"day"==this.unit?this.isDaysOrHours?"dias":"h/dia":"week"==this.unit?"h/semana":"h/m\xeas"}onChange(a){this.workToValue(),this.change&&this.change.emit(a)}valueToWork(){const a=["hour","day"].includes(this.unit)?1:"week"==this.unit?5:20,e=this.control?this.control.value*a:this.value*a;this.workControl.value!=e&&this.workControl.setValue(e)}workToValue(){const a=["hour","day"].includes(this.unit)?1:"week"==this.unit?5:20,e=this.workControl.value/a;this.control?this.control.value!=e&&this.control.setValue(e):this.value!=e&&(this.value=e)}static{this.\u0275fac=function(e){return new(e||f)(s.rXU(s.zZn))}}static{this.\u0275cmp=s.VBU({type:f,selectors:[["input-workload"]],viewQuery:function(e,o){if(1&e&&s.GBs(m,5),2&e){let t;s.mGM(t=s.lsd())&&(o.inputElement=t.first)}},hostVars:2,hostBindings:function(e,o){2&e&&s.HbH(o.class)},inputs:{hostClass:"hostClass",labelPosition:"labelPosition",controlName:"controlName",disabled:"disabled",icon:"icon",label:"label",labelInfo:"labelInfo",labelClass:"labelClass",bold:"bold",value:"value",loading:"loading",form:"form",source:"source",path:"path",daysOrHours:"daysOrHours",maxLength:"maxLength",required:"required",unitChange:"unitChange",unit:"unit",control:"control",size:"size"},outputs:{change:"change"},features:[s.Jv_([],[{provide:d.ZU,useExisting:d.j4}]),s.Vt3],decls:6,vars:18,consts:[["inputElement",""],[3,"labelPosition","labelClass","controlName","required","control","loading","disabled","label","labelInfo","icon","bold"],[1,"input-group"],["type","number","class","form-control","min","0",3,"formControl","id","is-invalid","readonly","change",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","id"],["type","number","min","0",1,"form-control",3,"change","formControl","id","readonly"]],template:function(e,o){1&e&&(s.j41(0,"input-container",1)(1,"div",2),s.DNE(2,_,2,7,"input",3),s.j41(3,"button",4),s.bIt("click",function(n){return o.onButtonClick(n)}),s.nrm(4,"i"),s.EFF(5),s.k0s()()()),2&e&&(s.Y8G("labelPosition",o.labelPosition)("labelClass",o.labelClass)("controlName",o.controlName)("required",o.required)("control",o.control)("loading",!1)("disabled",o.disabled)("label",o.label)("labelInfo",o.labelInfo)("icon",o.icon)("bold",o.bold),s.R7$(2),s.Y8G("ngIf",o.viewInit),s.R7$(),s.AVh("disabled",o.isDisabled),s.Y8G("id",o.generatedId(o.controlName)+"_button"),s.R7$(),s.HbH(o.iconWork),s.R7$(),s.SpI(" ",o.unitWork," "))},dependencies:[u.bT,d.me,d.Q0,d.BC,d.VZ,d.l_,c.t],styles:["input[type=number][_ngcontent-%COMP%]:read-only, input[type=number][_ngcontent-%COMP%]:disabled{background-color:#e9ecef}"]})}}return f})()},8320:(O,h,l)=>{l.d(h,{L:()=>i});var s=l(4423),d=l(3279);let i=(()=>{class u extends s.F{constructor(m){super("Produto",m),this.injector=m,this.inputSearchConfig.searchFields=["nome"]}ativarTodos(){return new Promise((m,_)=>{this.server.post("api/"+this.collection+"/ativar-todos",{}).subscribe(p=>{p.error?_(p.error):m(!!p?.success)},p=>_(p))})}desativarTodos(){return new Promise((m,_)=>{this.server.post("api/"+this.collection+"/desativar-todos",{}).subscribe(p=>{p.error?_(p.error):m(!!p?.success)},p=>_(p))})}static{this.\u0275fac=function(_){return new(_||u)(d.KVO(d.zZn))}}static{this.\u0275prov=d.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},7682:(O,h,l)=>{l.d(h,{l:()=>s});class s{constructor(i){i&&Object.assign(this,i)}}},9492:(O,h,l)=>{l.d(h,{k:()=>i});var s=l(4423),d=l(3279);let i=(()=>{class u extends s.F{constructor(m){super("SolucaoUnidade",m),this.injector=m}static{this.\u0275fac=function(_){return new(_||u)(d.KVO(d.zZn))}}static{this.\u0275prov=d.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},2096:(O,h,l)=>{l.d(h,{t:()=>d});var s=l(291);class d extends s.C{constructor(){super(...arguments),this.nome="",this.tipo_cliente_id="",this.unidade_id=null}}},7923:(O,h,l)=>{l.d(h,{x:()=>d});var s=l(291);class d extends s.C{constructor(u){super(),this.nome="",this.initialization(u)}}},7293:(O,h,l)=>{l.d(h,{d:()=>f});var s=l(3308),d=l(9755),i=l(3279),u=l(5739),c=l(2342),m=l(114),_=l(5524),p=l(1230);let f=(()=>{class v{set disabled(e){this._disabled!=e&&(this._disabled=e,this.loadExpediente())}get disabled(){return this._disabled}set control(e){var o=this;this._control!=e&&(this._control=e,this.expediente=this.control?.value,e?.valueChanges.subscribe(function(){var t=(0,s.A)(function*(n){o.expediente=n});return function(n){return t.apply(this,arguments)}}()))}get control(){return this._control}set expediente(e){this._expediente!=e&&(this._expediente=e,this.loadExpediente())}get expediente(){return this._expediente}constructor(e,o,t){this.fh=e,this.cdRef=o,this.util=t,this.diasSemana=["domingo","segunda","terca","quarta","quinta","sexta","sabado"],this.validate=(n,r)=>{for(let E of this.diasSemana)if(r.startsWith(E)&&r.endsWith("_fim")&&n?.value?.length){let I=this.form?.controls[E+"_inicio"]?.value;if(!this.util.isTimeValid(I)||!this.util.isTimeValid(n.value)||this.util.getStrTimeHours(I)>this.util.getStrTimeHours(n.value))return"Inv\xe1lido"}return null},this.form=e.FormBuilder({domingo:{default:[]},segunda:{default:[]},terca:{default:[]},quarta:{default:[]},quinta:{default:[]},sexta:{default:[]},sabado:{default:[]},especial:{default:[]},domingo_inicio:{default:""},domingo_fim:{default:""},segunda_inicio:{default:""},segunda_fim:{default:""},terca_inicio:{default:""},terca_fim:{default:""},quarta_inicio:{default:""},quarta_fim:{default:""},quinta_inicio:{default:""},quinta_fim:{default:""},sexta_inicio:{default:""},sexta_fim:{default:""},sabado_inicio:{default:""},sabado_fim:{default:""},especial_inicio:{default:""},especial_fim:{default:""},especial_data:{default:null},especial_sem:{default:!1}},this.cdRef,this.validate)}ngOnInit(){}get isDisabled(){return null!=this._disabled}loadExpediente(){let e=(this.isDisabled?this.expedienteDisabled:this._expediente)||new d.U;const o=(t,n)=>t.map(r=>Object.assign({},{key:this.util.textHash(("especial"==n?this.util.getDateFormatted(r.data):"")+n+r.inicio+r.fim),value:("especial"==n?this.util.getDateFormatted(r.data)+" - ":"")+r.inicio+" at\xe9 "+r.fim,data:{inicio:r.inicio,fim:r.fim,data:r.data,sem:r.sem}}));this.isDisabled||(this._expediente=e),this.form.controls.domingo.setValue(o(e.domingo,"domingo")),this.form.controls.segunda.setValue(o(e.segunda,"segunda")),this.form.controls.terca.setValue(o(e.terca,"terca")),this.form.controls.quarta.setValue(o(e.quarta,"quarta")),this.form.controls.quinta.setValue(o(e.quinta,"quinta")),this.form.controls.sexta.setValue(o(e.sexta,"sexta")),this.form.controls.sabado.setValue(o(e.sabado,"sabado")),this.form.controls.especial.setValue(o(e.especial,"especial"))}saveExpediente(){this.isDisabled||(this._expediente=this._expediente||new d.U,this._expediente.domingo=this.form.controls.domingo.value.map(e=>e.data),this._expediente.segunda=this.form.controls.segunda.value.map(e=>e.data),this._expediente.terca=this.form.controls.terca.value.map(e=>e.data),this._expediente.quarta=this.form.controls.quarta.value.map(e=>e.data),this._expediente.quinta=this.form.controls.quinta.value.map(e=>e.data),this._expediente.sexta=this.form.controls.sexta.value.map(e=>e.data),this._expediente.sabado=this.form.controls.sabado.value.map(e=>e.data),this._expediente.especial=this.form.controls.especial.value.map(e=>e.data),this.control&&(this.control.setValue(this._expediente),this.cdRef.detectChanges()))}isEmpty(){return!1}addItemHandleDomingo(){return this.addItemHandle("domingo")}addItemHandleSegunda(){return this.addItemHandle("segunda")}addItemHandleTerca(){return this.addItemHandle("terca")}addItemHandleQuarta(){return this.addItemHandle("quarta")}addItemHandleQuinta(){return this.addItemHandle("quinta")}addItemHandleSexta(){return this.addItemHandle("sexta")}addItemHandleSabado(){return this.addItemHandle("sabado")}addItemHandleEspecial(){return this.addItemHandle("especial")}onChange(){this.saveExpediente()}addItemHandle(e){let o;const t=this.form.controls[e+"_inicio"].value,n=this.form.controls[e+"_fim"].value,r=this.form.controls.especial_data.value,D=this.form.controls.especial_sem.value,E=this.util.textHash(("especial"==e?this.util.getDateFormatted(r):"")+e+t+n),I=this.form.controls[e].value;return this.util.isTimeValid(t)&&this.util.isTimeValid(n)&&this.util.getStrTimeHours(t)<this.util.getStrTimeHours(n)&&("especial"!=e||r)&&this.util.validateLookupItem(this.form.controls[e].value,E)&&(o={key:E,value:("especial"==e?this.util.getDateFormatted(r)+" - ":"")+t+" at\xe9 "+n,data:{inicio:t,fim:n,data:r,sem:D}}),I.length>0&&I.forEach(C=>{const g=C.data.inicio,b=C.data.fim;(t>=g&&n<=g||t<=g&&n>=g||t>=g&&n<=g||t<=g&&n>=b||t>=g&&t<=b||n>=g&&n<=b||t==b||n==g)&&(console.log("Conflitante"),o=void 0)}),this.form.controls[e+"_inicio"].setValue(""),this.form.controls[e+"_fim"].setValue(""),"especial"==e&&(this.form.controls[e+"_data"].setValue(null),this.form.controls[e+"_sem"].setValue(!1)),o}static{this.\u0275fac=function(o){return new(o||v)(i.rXU(u.s),i.rXU(i.gRc),i.rXU(c.a))}}static{this.\u0275cmp=i.VBU({type:v,selectors:[["calendar-expediente"]],inputs:{expedienteDisabled:"expedienteDisabled",disabled:"disabled",control:"control",expediente:"expediente"},decls:28,vars:76,consts:[[1,"row"],["label","Domingo","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","domingo_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","domingo_fim",3,"size","control"],["label","Segunda","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","segunda_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","segunda_fim",3,"size","control"],["label","Ter\xe7a","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","terca_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","terca_fim",3,"size","control"],["label","Quarta","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","quarta_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","quarta_fim",3,"size","control"],["label","Quinta","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","quinta_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","quinta_fim",3,"size","control"],["label","Sexta","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","sexta_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","sexta_fim",3,"size","control"],["label","Sabado","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","sabado_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","sabado_fim",3,"size","control"],["label","Especial","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","date","","label","Dia","controlName","especial_data",3,"size","control"],["label","Sem","controlName","especial_sem","labelInfo","Sem expediente. Se o hor\xe1rio ir\xe1 representar um per\xedodo que n\xe1o haver\xe1 expediente.",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","especial_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","especial_fim",3,"size","control"]],template:function(o,t){1&o&&(i.j41(0,"div",0)(1,"input-multiselect",1),i.nrm(2,"input-datetime",2)(3,"input-datetime",3),i.k0s(),i.j41(4,"input-multiselect",4),i.nrm(5,"input-datetime",5)(6,"input-datetime",6),i.k0s(),i.j41(7,"input-multiselect",7),i.nrm(8,"input-datetime",8)(9,"input-datetime",9),i.k0s(),i.j41(10,"input-multiselect",10),i.nrm(11,"input-datetime",11)(12,"input-datetime",12),i.k0s()(),i.j41(13,"div",0)(14,"input-multiselect",13),i.nrm(15,"input-datetime",14)(16,"input-datetime",15),i.k0s(),i.j41(17,"input-multiselect",16),i.nrm(18,"input-datetime",17)(19,"input-datetime",18),i.k0s(),i.j41(20,"input-multiselect",19),i.nrm(21,"input-datetime",20)(22,"input-datetime",21),i.k0s(),i.j41(23,"input-multiselect",22),i.nrm(24,"input-datetime",23)(25,"input-switch",24)(26,"input-datetime",25)(27,"input-datetime",26),i.k0s()()),2&o&&(i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.domingo)("size",3)("addItemHandle",t.addItemHandleDomingo.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.domingo_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.domingo_fim),i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.segunda)("size",3)("addItemHandle",t.addItemHandleSegunda.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.segunda_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.segunda_fim),i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.terca)("size",3)("addItemHandle",t.addItemHandleTerca.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.terca_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.terca_fim),i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.quarta)("size",3)("addItemHandle",t.addItemHandleQuarta.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.quarta_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.quarta_fim),i.R7$(2),i.Y8G("disabled",t.disabled)("control",t.form.controls.quinta)("size",3)("addItemHandle",t.addItemHandleQuinta.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.quinta_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.quinta_fim),i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.sexta)("size",3)("addItemHandle",t.addItemHandleSexta.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.sexta_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.sexta_fim),i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.sabado)("size",3)("addItemHandle",t.addItemHandleSabado.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",6)("control",t.form.controls.sabado_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.sabado_fim),i.R7$(),i.Y8G("disabled",t.disabled)("control",t.form.controls.especial)("size",3)("addItemHandle",t.addItemHandleEspecial.bind(t))("change",t.onChange.bind(t)),i.R7$(),i.Y8G("size",8)("control",t.form.controls.especial_data),i.R7$(),i.Y8G("size",4)("control",t.form.controls.especial_sem),i.R7$(),i.Y8G("size",6)("control",t.form.controls.especial_inicio),i.R7$(),i.Y8G("size",6)("control",t.form.controls.especial_fim))},dependencies:[m.S,_.r,p.b]})}}return v})()},5723:(O,h,l)=>{l.d(h,{H:()=>p});var s=l(3308),d=l(568),i=l(2342),u=l(7065),c=l(9622),m=l(3130),_=l(3279);let p=(()=>{class f{constructor(a){this.injector=a,this.lookup=this.injector.get(d.s),this.lex=this.injector.get(c.y),this.dialog=this.injector.get(u.o),this.util=this.injector.get(i.a)}converterAtribuicoes(a){return a.map(e=>Object.assign({},{key:e,value:this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,e),icon:this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO,e),color:this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO,e)}))}haAlteracaoGestor(a,e,o,t){let n="",r=this.util.array_diff(e.atribuicoes,a).includes("GESTOR"),D=this.util.array_diff(a,e.atribuicoes).includes("GESTOR");if(!r&&!D)return["nenhuma",-1,"",!1];let E=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,"GESTOR")+" "+this.lex.translate("da Unidade")+" ";if(r)return n=t.toUpperCase()+" deixar\xe1 de ser "+E+e.unidade_sigla?.toUpperCase()+".",["perda",-1,n,!1];let I=e.atribuicoes.includes("LOTADO");n=t.toUpperCase()+" passar\xe1 a ser "+E+e.unidade_sigla?.toUpperCase();let C=o.find(b=>b.atribuicoes.includes("GESTOR")),g=o.findIndex((b,T,P)=>b.atribuicoes.includes("LOTADO"));return n=C?.id.length?n+" e deixar\xe1 de ser "+E+C.unidade_sigla+". ":n+". ",!I&&g>=0&&(n+="Por consequ\xeancia, sua lota\xe7\xe3o ser\xe1 alterada de "+o[g].unidade_sigla?.toUpperCase()+" para "+e.unidade_sigla?.toUpperCase()+"."),C?.id.length?["troca",o.findIndex(b=>b.id==C?.id),n,!0]:["ganho",-1,n,!I]}haAlteracaoGerencia(a,e,o,t){let n="",r=this.util.array_diff(e.atribuicoes,a).includes("GESTOR"),D=this.util.array_diff(a,e.atribuicoes).includes("GESTOR");if(!r&&!D)return["nenhuma",-1,"",!1];let E=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,"GESTOR")+" "+this.lex.translate("da Unidade")+" ";if(r)return n=e.usuario_nome?.toUpperCase()+" deixar\xe1 de ser "+E+t.toUpperCase()+".",["perda",-1,n,!1];let I=e.atribuicoes.includes("LOTADO");n=e.usuario_nome?.toUpperCase()+" passar\xe1 a ser "+E+t.toUpperCase();let C=o.find(b=>b.atribuicoes.includes("GESTOR"));n=(C?.id.length?n+" em substitui\xe7\xe3o a "+C.usuario_nome?.toUpperCase():n)+". ";let g=o.findIndex((b,T,P)=>b.atribuicoes.includes("LOTADO"));return!I&&g>=0&&(n+="Como \xe9 lotado em outra unidade, a lota\xe7\xe3o de "+e.usuario_nome?.toUpperCase()+" ser\xe1 alterada para "+this.lex.translate("a Unidade")+" - "+t.toUpperCase()+"."),C?.id.length?["troca",o.findIndex(b=>b.id==C?.id),n,!0]:["ganho",-1,n,!I]}haAlteracaoLotacao(a,e,o,t){let n=a.controls.atribuicoes.value.map(I=>I.key),r=o.findIndex((I,C,g)=>I.atribuicoes.includes("LOTADO"));if(!n.includes("LOTADO")||-1==r)return[!1,-1,"",""];let D=this.lex.translate("A lota\xe7\xe3o")+" de "+t.toUpperCase()+" passar\xe1 de "+o[r].unidade_sigla?.toUpperCase()+" para "+e.unidade_sigla?.toUpperCase()+".",E="N\xe3o \xe9 poss\xedvel alterar a lota\xe7\xe3o de "+t.toUpperCase()+" porque \xe9 Chefe da sua atual unidade de lota\xe7\xe3o - "+o[r].unidade_sigla?.toUpperCase()+".";return a.controls.unidade_id.value!=o[r].unidade_id?[!0,r,D,E]:[!1,-1,"",""]}inserirAtribuicao(a,e){let o=this.lookup.getLookup(this.lookup.UNIDADE_INTEGRANTE_TIPO,e);return o&&a.push(o),this.lookup.uniqueLookupItem(a)}ordenarIntegrantes(a){return a.sort((e,o)=>{let t=(e.usuario_nome||e.unidade_nome)?.toLowerCase(),n=(o.usuario_nome||o.unidade_nome)?.toLowerCase();return t<n?-1:t>n?1:0}),a.forEach(e=>{e.atribuicoes.sort()}),a}completarIntegrante(a,e,o,t){return Object.assign({},a,{unidade_id:e,usuario_id:o,atribuicoes:t})}ehPermitidoApagar(a){var e=this;let t=!["LOTADO"].includes(a),n="LOTADO"==a?"A lota\xe7\xe3o do servidor n\xe3o pode ser apagada. Para alter\xe1-la, lote-o em outra Unidade.":"";return(0,s.A)(function*(){t||(yield e.dialog.alert("N\xc3O PERMITIDO!",n))})(),t}substituirItem(a,e,o){let t=a.itens.findIndex(D=>D.id==a.id),n=o instanceof m.P;return a.itens[t]=this.completarIntegrante(n?{id:a.id,unidade_sigla:a.apelidoOuSigla,unidade_nome:a.nome,unidade_codigo:a.codigo}:{id:a.id,usuario_apelido:a.apelidoOuSigla,usuario_nome:a.nome},n?a.id:o.id,n?o.id:a.id,e),a.itens}static{this.\u0275fac=function(e){return new(e||f)(_.KVO(_.zZn))}}static{this.\u0275prov=_.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},8790:(O,h,l)=>{l.d(h,{t:()=>i});var s=l(3279),d=l(4796);let i=(()=>{class u{constructor(m){this.auth=m,this.programa=[]}programaVigente(m){return!m||m.data_fim>=new Date}static{this.\u0275fac=function(_){return new(_||u)(s.KVO(d.u))}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);